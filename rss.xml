<?xml version="1.0" encoding="UTF-8"?><rss
  xmlns:dc="http://purl.org/dc/elements/1.1/"
  xmlns:content="http://purl.org/rss/1.0/modules/content/"
  xmlns:atom="http://www.w3.org/2005/Atom"
  xmlns:media="http://search.yahoo.com/mrss/"
  version="2.0"
>
  <channel>
    <title><![CDATA[ Yurij Mikhalevich ]]></title>
    <description><![CDATA[ photo-rich tech blog ]]></description>
    <link>https://mikhalevi.ch/</link>
    <image>
      <url>https://mikhalevi.ch/media/icon_hu22f15536e9918e9e849189ceda99d382_340250_300x300_fill_lanczos_center_3.png</url>
      <title>Yurij Mikhalevich</title>
      <link>https://mikhalevi.ch/</link>
    </image>
    <generator>Hugo</generator><lastBuildDate>Sun, 28 Jan 2024 00:00:00 +0000</lastBuildDate>
      <atom:link href="https://mikhalevi.ch/rss.xml" rel="self" type="application/rss+xml" />
    <ttl>60</ttl>
    
    <item>
      <title><![CDATA[ Next-Level Terminal Image Search: rclip Gets Previews ]]></title>
      <description><![CDATA[ Hi everyone!
I&rsquo;m thrilled to share a long-overdue update about an exciting rclip feature. Now, you can preview search results directly in the terminal!
If you&rsquo;re new to rclip, it&rsquo;s an AI-powered command-line photo search tool â€“ think &ldquo;rgrep&rdquo; for images. ]]></description>
      <link>https://mikhalevi.ch/next-level-terminal-image-search-rclip-gets-previews/</link>
      <guid>https://mikhalevi.ch/next-level-terminal-image-search-rclip-gets-previews/</guid>

      
          <category><![CDATA[ Software Engineering ]]></category>
        
      <dc:creator><![CDATA[ Yurij Mikhalevich ]]></dc:creator>
      <pubDate>Sun, 21 Jan 2024 16:24:10 +0000</pubDate>

      <media:content url="https://mikhalevi.ch/next-level-terminal-image-search-rclip-gets-previews/featured_hu3c98ed5dd501f8a1526fd02539579973_129376_0e313d4fed78dc7c542170fb5daf0b32.webp" medium="image"/>
        <content:encoded>
          <![CDATA[ <img src="https://mikhalevi.ch/next-level-terminal-image-search-rclip-gets-previews/featured_hu3c98ed5dd501f8a1526fd02539579973_129376_0e313d4fed78dc7c542170fb5daf0b32.webp" alt="Next-Level Terminal Image Search: rclip Gets Previews"><p>Hi everyone!</p>
<p>I&rsquo;m thrilled to share a long-overdue update about an exciting rclip feature. Now, you can preview search results directly in the terminal!</p>
<p>If you&rsquo;re new to rclip, it&rsquo;s an AI-powered command-line photo search tool â€“ think &ldquo;rgrep&rdquo; for images. Dive into <a href="https://mikhalevi.ch/rclip-an-ai-powered-command-line-photo-search-tool/">my</a> <a href="https://mikhalevi.ch/unveiling-rclips-new-power-image-to-image-search/">previous</a> <a href="https://mikhalevi.ch/rclip-update-mixing-text-and-image-queries-for-the-ultimate-photo-search/">posts</a> and give it a spin to learn more.</p>
<p>Now, let&rsquo;s talk about the new preview feature. To witness the magic, simply add the <code>--preview</code> (or <code>-p</code>) argument to your rclip command, like this: <code>rclip -p kitty</code>. Check out the video below to see it in action.</p>

<div style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden;">
  <iframe src="https://www.youtube.com/embed/Ay_XfbUFU08" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border:0;" allowfullscreen title="YouTube Video"></iframe>
</div>

<p>Some might argue that the ability to preview images was in rclip before because you can pipe filenames output by rclip to any other command. You might remember reading a suggestion about piping filenames to an image viewer in <a href="https://github.com/yurijmikhalevich/rclip/blob/bfd0fb7e5f702b7f38d0cc43b814cdeffff2a1d2/README.md#how-do-i-preview-the-results" target="_blank" rel="noopener">rclip&rsquo;s README</a>. It worked, but the command was a bit of a monstrosity. You had to remember the <code>-f</code> argument, deal with <code>xargs</code> intricacies, and know how to call the viewer you want to use.</p>
<p>The other issue with that suggestion is that it doesn&rsquo;t work over SSH. This is especially important to me because I do a lot of searches on a remote machine. And, even if you make it work over SSH somehow, it will be slow because it has to transmit the whole image over the network to display a preview unless you go further and compress it yourself.</p>
<p>Now, these problems are no more. I&rsquo;ve addressed these issues with the new preview feature! No more cumbersome commands. Now, it&rsquo;s as simple as typing <code>rclip -p kitty</code>, and voila â€“ compressed image previews right in your terminal. It also works seamlessly over SSH. No more sluggish previews; just a smooth, optimized experience, even on remote machines.</p>
<p>The feature is compatible with <a href="https://iterm2.com/" target="_blank" rel="noopener">iTerm2</a>, <a href="https://konsole.kde.org/" target="_blank" rel="noopener">Konsole</a> (version 22.04 and higher), <a href="https://wezfurlong.org/wezterm/" target="_blank" rel="noopener">wezterm</a>, <a href="https://mintty.github.io/" target="_blank" rel="noopener">Mintty</a>, and <a href="https://mlterm.sourceforge.net/" target="_blank" rel="noopener">mlterm</a>.</p>
<p>Get the feature by following <a href="https://github.com/yurijmikhalevich/rclip?tab=readme-ov-file#installation" target="_blank" rel="noopener">the instructions in the repository&rsquo;s README</a> to download the latest version of rclip. Try it out and share your thoughts. Stay curious, and enjoy your photo searches with rclip!</p>
 ]]>
        </content:encoded>

    </item>
    
    <item>
      <title><![CDATA[ rclip Update: Mixing Text and Image Queries for the Ultimate Photo Search ]]></title>
      <description><![CDATA[ Hi! Today, I am introducing a fantastic new feature of rclip (an AI-powered command-line photo search tool I built): the ability to add and subtract different queries. It&rsquo;s fun to play around with different concepts in this way. ]]></description>
      <link>https://mikhalevi.ch/rclip-update-mixing-text-and-image-queries-for-the-ultimate-photo-search/</link>
      <guid>https://mikhalevi.ch/rclip-update-mixing-text-and-image-queries-for-the-ultimate-photo-search/</guid>

      
          <category><![CDATA[ Software Engineering ]]></category>
        
      <dc:creator><![CDATA[ Yurij Mikhalevich ]]></dc:creator>
      <pubDate>Mon, 31 Jul 2023 12:05:26 +0000</pubDate>

      <media:content url="https://mikhalevi.ch/rclip-update-mixing-text-and-image-queries-for-the-ultimate-photo-search/featured_hudf139667da090f78acf55b8d8b4b6f5b_238553_b9e35fc36345336e0951c04e39c568be.webp" medium="image"/>
        <content:encoded>
          <![CDATA[ <img src="https://mikhalevi.ch/rclip-update-mixing-text-and-image-queries-for-the-ultimate-photo-search/featured_hudf139667da090f78acf55b8d8b4b6f5b_238553_b9e35fc36345336e0951c04e39c568be.webp" alt="rclip Update: Mixing Text and Image Queries for the Ultimate Photo Search"><p>Hi! Today, I am introducing a fantastic new feature of rclip (an AI-powered command-line photo search tool I built): the ability to add and subtract different queries. It&rsquo;s fun to play around with different concepts in this way. This feature is also handy when you want to find similar images. If it&rsquo;s the first time you read about rclip, check out <a href="https://mikhalevi.ch/rclip-an-ai-powered-command-line-photo-search-tool/">this</a> and <a href="https://mikhalevi.ch/unveiling-rclips-new-power-image-to-image-search/">this</a> blog posts.</p>
<p>The feature works like this. If you want to add two queries together, add a &ldquo;plus&rdquo; sign between them like this:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="nb">cd</span> photos <span class="o">&amp;&amp;</span> rclip horse + stripes
</span></span></code></pre></div><p>If you want to subtract one query from the other, use the &ldquo;minus&rdquo; sign:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="nb">cd</span> photos <span class="o">&amp;&amp;</span> rclip apple - fruit
</span></span></code></pre></div><p>It works with image queries too:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="nb">cd</span> photos <span class="o">&amp;&amp;</span> rclip <span class="s2">&#34;./new york city.jpg&#34;</span> + night
</span></span></code></pre></div><p>When combining image and text queries, you may notice that sometimes your text queries are seemingly ignored by rclip. This can happen because CLIP (an AI model that rclip uses) weights features extracted from images more than features extracted from text. Luckily, rclip provides a way to fix this. You can control the influence the query has on the result by prefixing it with a multiplier. It can be any positive number, and you can multiply both image and text queries. Here is an example which doubles the influence of the &ldquo;golden retriever&rdquo; query:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="nb">cd</span> photos <span class="o">&amp;&amp;</span> rclip <span class="s2">&#34;2:golden retriever&#34;</span> + <span class="s2">&#34;./swimming pool.jpg&#34;</span>
</span></span></code></pre></div><p>And last but not least, when combining queries like this, you are not limited to two queries. Combine as many as you want. For example:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="nb">cd</span> photos <span class="o">&amp;&amp;</span> rclip <span class="s2">&#34;./racing car.jpg&#34;</span> - <span class="s2">&#34;2:sports car&#34;</span> + <span class="s2">&#34;2:snow&#34;</span>
</span></span></code></pre></div><p>If you are interested in seeing how all these queries perform when executed on the 1.28 million images ImageNet-1k dataset, check out the video demo on YouTube:</p>

<div style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden;">
  <iframe src="https://www.youtube.com/embed/MsTgYdOpgcQ" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border:0;" allowfullscreen title="YouTube Video"></iframe>
</div>

<p>This is another rclip feature initially introduced by a GitHub user <a href="https://github.com/ramayer" target="_blank" rel="noopener">ramayer</a>. Huge thanks to ramayer for this incredible contribution! Speaking of contributors, I always appreciate the enthusiasm and fresh perspectives that new contributors bring! If you&rsquo;re considering getting involved in open-source projects and making a positive impact, <a href="https://github.com/yurijmikhalevich/rclip/issues" target="_blank" rel="noopener">a number of issues on the rclip GitHub page</a> could benefit from your attention and expertise. Why not give them a look?</p>
<p>That&rsquo;s all you need to know about the new feature. You can download the latest version of rclip by following <a href="https://github.com/yurijmikhalevich/rclip#installation" target="_blank" rel="noopener">the instructions in the repository&rsquo;s README</a>. Try it out and share your thoughts. Stay curious, and enjoy your photo searches with rclip!</p>
 ]]>
        </content:encoded>

    </item>
    
    <item>
      <title><![CDATA[ Unveiling rclip's New Power: Image-to-Image Search ]]></title>
      <description><![CDATA[ If you have been following my work, you are probably already familiar with rclip, a command-line image search tool I built to solve a specific problem: navigating my personal collection of photos. ]]></description>
      <link>https://mikhalevi.ch/unveiling-rclips-new-power-image-to-image-search/</link>
      <guid>https://mikhalevi.ch/unveiling-rclips-new-power-image-to-image-search/</guid>

      
          <category><![CDATA[ Software Engineering ]]></category>
        
      <dc:creator><![CDATA[ Yurij Mikhalevich ]]></dc:creator>
      <pubDate>Sun, 16 Jul 2023 19:58:11 +0000</pubDate>

      <media:content url="https://mikhalevi.ch/unveiling-rclips-new-power-image-to-image-search/featured_hue221bae3372071590945f593ca7145e4_328421_06b23a573971ece49c44fbc9b66d4394.webp" medium="image"/>
        <content:encoded>
          <![CDATA[ <img src="https://mikhalevi.ch/unveiling-rclips-new-power-image-to-image-search/featured_hue221bae3372071590945f593ca7145e4_328421_06b23a573971ece49c44fbc9b66d4394.webp" alt="Unveiling rclip&#39;s New Power: Image-to-Image Search"><p>If you have been following my work, you are probably already familiar with <a href="https://github.com/yurijmikhalevich/rclip/" target="_blank" rel="noopener">rclip</a>, a command-line image search tool <a href="https://mikhalevi.ch/rclip-an-ai-powered-command-line-photo-search-tool/">I built to solve a specific problem: navigating my personal collection of photos</a>.</p>
<p>Today, I am excited to introduce a new feature to rclip. This update expands the search capabilities of rclip beyond text queries, allowing you to search for images similar to a given image. You only need to provide an image path or URL, and rclip will find visually similar images. For example:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="nb">cd</span> photos <span class="o">&amp;&amp;</span> rclip ./cat.jpg
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># or use URL</span>
</span></span><span class="line"><span class="cl"><span class="nb">cd</span> photos <span class="o">&amp;&amp;</span> rclip https://raw.githubusercontent.com/yurijmikhalevich/rclip/main/tests/e2e/images/cat.jpg
</span></span></code></pre></div><p>This feature was added a while back, but I have only wrapped it up properly recently. It is not just a cool feature; it is special because it was contributed by the first-ever contributor to rclip â€“ a GitHub user <a href="https://github.com/ramayer" target="_blank" rel="noopener">ramayer</a>. ramayer reached out with this incredible proposal, worked on the implementation, and after a bit of back-and-forth feedback, I was delighted to merge the PR into the project. A huge shout-out to ramayer for this incredible contribution!</p>
<p>Check out the video below for a demo:</p>

<div style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden;">
  <iframe src="https://www.youtube.com/embed/1YQZKeCBxWM" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border:0;" allowfullscreen title="YouTube Video"></iframe>
</div>

<p>Open source projects like rclip thrive on the energy and innovation of contributors. If you want to dive into open source and make a difference, <a href="https://github.com/yurijmikhalevich/rclip/issues" target="_blank" rel="noopener">several issues on the rclip GitHub page</a> could use your attention.</p>
<p>That&rsquo;s it for now! <a href="https://github.com/yurijmikhalevich/rclip/#installation" target="_blank" rel="noopener">Test drive this new feature</a> and share your feedback.</p>
<p>Until next time, stay curious!</p>
 ]]>
        </content:encoded>

    </item>
    
    <item>
      <title><![CDATA[ Minerva, a GPT-Powered Discord Bot Built to Help Students Learn Software Development ]]></title>
      <description><![CDATA[ Meet Minerva, a GPT-powered Discord bot I built to help students in the study group I mentor learn software development and machine learning.
Since 2021, I have been leading a pro-bono study group where I help students from my alma mater develop their skills and learn how to build and ship products. ]]></description>
      <link>https://mikhalevi.ch/minerva-a-gpt-powered-discord-bot-built-to-help-students-learn-software-development/</link>
      <guid>https://mikhalevi.ch/minerva-a-gpt-powered-discord-bot-built-to-help-students-learn-software-development/</guid>

      
          <category><![CDATA[ Software Engineering ]]></category>
        
      <dc:creator><![CDATA[ Yurij Mikhalevich ]]></dc:creator>
      <pubDate>Sun, 07 May 2023 15:42:38 +0000</pubDate>

      <media:content url="https://mikhalevi.ch/minerva-a-gpt-powered-discord-bot-built-to-help-students-learn-software-development/featured_hu511f6450c01a3312139b2f098053e4a7_863228_3ad761a5fff89267dc150c1f5aff59f6.webp" medium="image"/>
        <content:encoded>
          <![CDATA[ <img src="https://mikhalevi.ch/minerva-a-gpt-powered-discord-bot-built-to-help-students-learn-software-development/featured_hu511f6450c01a3312139b2f098053e4a7_863228_3ad761a5fff89267dc150c1f5aff59f6.webp" alt="Minerva, a GPT-Powered Discord Bot Built to Help Students Learn Software Development"><p>Meet Minerva, a GPT-powered Discord bot I built to help students in the study group I mentor learn software development and machine learning.</p>
<p>Since 2021, I have been leading a pro-bono study group where I help students from my alma mater develop their skills and learn how to build and ship products. We have a Discord server with channels dedicated to different areas of study and student projects, and we meet face-to-face every week over a video chat. Anything related to any aspect of software development can be discussed there, though we mainly focus on machine learning and web development. In the group, I encourage people to study a lot, make bold mistakes, ask many questions and help each other. But I have noticed that sometimes, our club members hold back from asking &ldquo;simple&rdquo; questions, fearing they might needlessly disturb others. Despite understanding this feeling well, I prefer to avoid this frame of mind because even the simplest of questions can provoke an engaging discussion and deepen the knowledge and understanding of everyone involved. I wanted to empower everyone to seek answers without hesitation, so I built Minerva â€” an AI assistant based on OpenAI&rsquo;s &ldquo;gpt-3.5-turbo&rdquo; model (the same one used in ChatGPT) â€” to allow members to ask any questions without worrying about disturbing anyone! The bot lives in our Discord server now. To chat with the bot, the members can send a message, as usual, and mention &ldquo;@Minerva.&rdquo; Check out this interaction to get a feeling of how it works:</p>

<div style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden;">
  <iframe src="https://www.youtube.com/embed/H9WEqr7ZgYk" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border:0;" allowfullscreen title="YouTube Video"></iframe>
</div>

<p>The bot maintains an independent discussion in each server channel, differentiates between messages sent by different club members, knows how to mention Discord users, and formats the code in the responses using markdown! The perfect mentor, Minerva, prefers to nudge the student in the right direction instead of solving a problem for them.</p>
<p>The other purpose of building the bot was to answer a club member&rsquo;s request to see how the integration with OpenAI&rsquo;s chat completion model work. I have made this bot for the club members with the club members. Most of the development was done live during our weekly face-to-face meetings. The bot&rsquo;s source code is a valuable reference for anyone wanting to build their own Discord AI chatbot and is available <a href="https://github.com/Move-Fast-and-Break-Things-Study-Group/minerva" target="_blank" rel="noopener">on GitHub</a>. If you want to let Minerva into your Discord server, follow the instructions in the <a href="https://github.com/Move-Fast-and-Break-Things-Study-Group/minerva/blob/main/README.md#how-can-i-add-minerva-to-my-discord-guild-server" target="_blank" rel="noopener">repository&rsquo;s README</a>.</p>
<p>I created an avatar for Minerva using OpenAI&rsquo;s DALLÂ·E and Midjourney. DALLÂ·E was used to iterate over ideas. Midjourney was then used with a hybrid (image and text) prompt to perfect the concept. And for the Minerva banner, I used Canva&rsquo;s fantastic Magic Design tool.</p>
 ]]>
        </content:encoded>

    </item>
    
    <item>
      <title><![CDATA[ Goodbye Amazon Halo ]]></title>
      <description><![CDATA[ It&rsquo;s official: Amazon is sunsetting the Halo fitness tracker. The news came as quite a surprise to loyal users like myself who have come to rely on the device as part of our daily fitness routines. ]]></description>
      <link>https://mikhalevi.ch/goodbye-amazon-halo/</link>
      <guid>https://mikhalevi.ch/goodbye-amazon-halo/</guid>

      
          <category><![CDATA[ Tech ]]></category>
        
      <dc:creator><![CDATA[ Yurij Mikhalevich ]]></dc:creator>
      <pubDate>Sat, 29 Apr 2023 13:50:15 +0000</pubDate>

      <media:content url="https://mikhalevi.ch/goodbye-amazon-halo/featured_huaa6a11e03d8213c1e4d62b8119c56a3e_281330_165fb41856842657956bb6d62ff4f906.webp" medium="image"/>
        <content:encoded>
          <![CDATA[ <img src="https://mikhalevi.ch/goodbye-amazon-halo/featured_huaa6a11e03d8213c1e4d62b8119c56a3e_281330_165fb41856842657956bb6d62ff4f906.webp" alt="Goodbye Amazon Halo"><p>It&rsquo;s official: Amazon is sunsetting the Halo fitness tracker. The news came as quite a surprise to loyal users like myself who have come to rely on the device as part of our daily fitness routines. The Halo tracker is set to stop working on August 1st, and I must admit, I&rsquo;m feeling a bit disappointed without a clear alternative in sight. The market just doesn&rsquo;t seem to offer a comparable fitness tracker right now.</p>
<p>Amazon&rsquo;s announcement got me thinking about what truly makes a product successful in today&rsquo;s highly competitive landscape. Many experts argue that a good measure of product-market fit is asking how strongly the users would wish it back if the product were to disappear from the market. Well, Amazon, you&rsquo;ve certainly hit the nail on the head with the Halo fitness tracker, <a href="https://mikhalevi.ch/amazon-halo-band-one-year-later/">in my case</a>.</p>
<p>To provide a bit of context, the Amazon Halo fitness tracker was introduced as a <a href="https://mikhalevi.ch/amazon-halo-band-review-or-the-best-minimalistic-fitness-tracker-of-early-2022/">sleek, screenless band</a> and was great at tracking sleep and activity. The Halo fitness tracker&rsquo;s minimalistic design made it a popular choice for many fitness enthusiasts, including myself. As I said, I don&rsquo;t see an alternative to the Halo band on the market now. All the hopes are on Fitbit resurrecting the Flex series in the Fitbit Flex 3 :-D</p>
 ]]>
        </content:encoded>

    </item>
    
    <item>
      <title><![CDATA[ Scrum: The Art of Doing Twice the Work in Half the Time by Jeff Sutherland ]]></title>
      <description><![CDATA[ Scrum is an Agile framework that aims to deliver high-value products with minimum waste. As a software engineer, I&rsquo;ve always been interested in becoming more efficient at what I do. During my over decade-long career, I have worked with different teams using different processes. ]]></description>
      <link>https://mikhalevi.ch/scrum-the-art-of-doing-twice-the-work-in-half-the-time-by-jeff-sutherland/</link>
      <guid>https://mikhalevi.ch/scrum-the-art-of-doing-twice-the-work-in-half-the-time-by-jeff-sutherland/</guid>

      
          <category><![CDATA[ Books ]]></category>
        
      <dc:creator><![CDATA[ Yurij Mikhalevich ]]></dc:creator>
      <pubDate>Sat, 22 Apr 2023 18:40:18 +0000</pubDate>

      <media:content url="https://mikhalevi.ch/scrum-the-art-of-doing-twice-the-work-in-half-the-time-by-jeff-sutherland/featured_hu04231e48e8d672300c92752d44febcbe_256104_f45ba79137781e01797765df4ff7da6b.webp" medium="image"/>
        <content:encoded>
          <![CDATA[ <img src="https://mikhalevi.ch/scrum-the-art-of-doing-twice-the-work-in-half-the-time-by-jeff-sutherland/featured_hu04231e48e8d672300c92752d44febcbe_256104_f45ba79137781e01797765df4ff7da6b.webp" alt="Scrum: The Art of Doing Twice the Work in Half the Time by Jeff Sutherland"><p>Scrum is an Agile framework that aims to deliver high-value products with minimum waste. As a software engineer, I&rsquo;ve always been interested in becoming more efficient at what I do. During my over decade-long career, I have worked with different teams using different processes. Currently, my favorite is <a href="https://mikhalevi.ch/books-by-basecamp/">the Shape Up methodology</a> proposed by the people behind the 37signals company.</p>
<p>I have to admit I was a bit hesitant at first to read &ldquo;Scrum: The Art of Doing Twice the Work in Half the Time&rdquo; book due to a minor negative bias towards Scrum that I had developed from encountering a few cases that were misrepresenting it. However, I decided to give it a chance, and I&rsquo;m glad I did. After finishing the book, I came to like Scrum more and was inspired to invest more time in learning how to implement it best. I even became a certified Professional Scrum Master!</p>
<p>I discovered that Scrum and Shape Up have more in common than I initially thought. Both frameworks value shipping things fast, emphasize the importance of teams owning the projects they build, and suggest driving the development by the user problems. The primary difference is that Scrum imposes more processes, which can be helpful to less experienced developers but cumbersome to more experienced ones. Scrum encourages collaboration and communication and allows for frequent feedback and adaptation. It emphasizes the importance of prioritizing work based on value and helps teams avoid getting bogged down by unnecessary tasks. Because Scrum is a complex framework, it&rsquo;s easy to misimplement it, overfocus on some aspects of the process and ignore others, and lose the value Scrum can bring to the team. On the other hand, Shape Up is much more suited for experienced developers, brings just enough process into the work, and is structured in a way that makes it harder to misimplement.</p>
<p>Scrum can be a valuable framework for teams of all sizes and skill levels if implemented correctly. If you want to learn more about Scrum or Agile, I suggest giving &ldquo;Scrum: The Art of Doing Twice the Work in Half the Time&rdquo; a read! The book provides an excellent introduction to Scrum and its benefits, as well as practical advice.</p>
 ]]>
        </content:encoded>

    </item>
    
    <item>
      <title><![CDATA[ Amazon Halo Band One Year Later ]]></title>
      <description><![CDATA[ It&rsquo;s been over a year since I started using the Amazon Halo fitness band. It&rsquo;s a good time interval to reevaluate and comment on whether my assessment of the fitness tracker made a year ago still holds. ]]></description>
      <link>https://mikhalevi.ch/amazon-halo-band-one-year-later/</link>
      <guid>https://mikhalevi.ch/amazon-halo-band-one-year-later/</guid>

      
          <category><![CDATA[ Tech ]]></category>
        
      <dc:creator><![CDATA[ Yurij Mikhalevich ]]></dc:creator>
      <pubDate>Sun, 19 Mar 2023 13:47:03 +0000</pubDate>

      <media:content url="https://mikhalevi.ch/amazon-halo-band-one-year-later/featured_hue88157a9d6f9cc828fa7ea1149d3896a_443245_70fd5582c69303a160e78b1ea042a1fb.webp" medium="image"/>
        <content:encoded>
          <![CDATA[ <img src="https://mikhalevi.ch/amazon-halo-band-one-year-later/featured_hue88157a9d6f9cc828fa7ea1149d3896a_443245_70fd5582c69303a160e78b1ea042a1fb.webp" alt="Amazon Halo Band One Year Later"><p>It&rsquo;s been over a year since <a href="https://mikhalevi.ch/amazon-halo-band-review-or-the-best-minimalistic-fitness-tracker-of-early-2022/">I started using the Amazon Halo fitness band</a>. It&rsquo;s a good time interval to reevaluate and comment on whether my assessment of the fitness tracker made a year ago still holds.</p>
<p>Let&rsquo;s reiterate why I chose Amazon Halo a year ago and see whether it still stands true. I needed a fitness tracker that&hellip;</p>
<h3 id="has-a-minimalistic-modern-design">&hellip;has a minimalistic, modern design</h3>
<p>This still holds true as the Amazon Halo&rsquo;s design remains one of the best in the market.</p>
<h3 id="doesnt-have-a-screen">&hellip;doesn&rsquo;t have a screen</h3>
<p>Not surprisingly, this point didn&rsquo;t change, too.</p>
<h3 id="has-a-decent-battery-life">&hellip;has a decent battery life</h3>
<p>The tracker lasts four-five days easily. Sometimes, I forget when I charged it last time, this is how long it last. It is worth noting that I don&rsquo;t use the tone analysis feature. Enabling this feature cuts the battery life to about two days.</p>
<h3 id="has-decent-sleep-tracking">&hellip;has decent sleep tracking</h3>
<p>I didn&rsquo;t make a scientific comparison with other trackers, but from a subjective point of view, Amazon Halo produces accurate and detailed sleep reports.</p>
<h3 id="has-basic-activity-tracking">&hellip;has basic activity tracking</h3>
<p>It satisfies my requirements in this department perfectly. Though, it ranks my activity too high at times. Fifty points for a 3-4 hours weekend walk through the city, given that 150 points are a weekly goal? Come on; this makes fulfilling this goal very easy.</p>
<p>I was initially concerned about the durability of the fabric band. However, it&rsquo;s still in good condition after a year of daily use â€” I took this post&rsquo;s cover picture a few days ago. The band also survived a few swimming sessions in the Mediterranean sea â€” I am comfortable swimming with the band in the salty sea waters and taking it to the shower with me.</p>
<p>To conclude, I hope this updated review helps you make an informed decision about the Amazon Halo fitness band. It&rsquo;s unfortunate to see that it has only received a rating of 3.7 out of 5 stars on Amazon. I believe more companies should develop similar gadgets.</p>
 ]]>
        </content:encoded>

    </item>
    
    <item>
      <title><![CDATA[ My 2022 in Books ]]></title>
      <description><![CDATA[ Hi. I will keep this post simple and stick to the last year&rsquo;s format.
Let&rsquo;s proceed with the reviews.
Zero to One: Notes on Startups, or How to Build the Future by Peter Thiel and Blake Masters This was the first book I read in the year 2022, and, to be honest with you, my memory of it has faded somewhat already, but I will do my best to give you an idea of what to expect from this book. ]]></description>
      <link>https://mikhalevi.ch/my-2022-in-books/</link>
      <guid>https://mikhalevi.ch/my-2022-in-books/</guid>

      
          <category><![CDATA[ Books ]]></category>
        
      <dc:creator><![CDATA[ Yurij Mikhalevich ]]></dc:creator>
      <pubDate>Sun, 15 Jan 2023 09:10:29 +0000</pubDate>

      <media:content url="https://mikhalevi.ch/my-2022-in-books/featured_hu37292642024460da5f13e36a3dc3ff50_334915_bdcd79a353fd145678deaa8a475fd82a.webp" medium="image"/>
        <content:encoded>
          <![CDATA[ <img src="https://mikhalevi.ch/my-2022-in-books/featured_hu37292642024460da5f13e36a3dc3ff50_334915_bdcd79a353fd145678deaa8a475fd82a.webp" alt="My 2022 in Books"><p>Hi. I will keep this post simple and stick to the last year&rsquo;s format.</p>
<p>













<figure class="flex flex-col justify-center items-center" >
  <div class="w-100" ><img alt="The books I read in 2022" srcset="
          https://mikhalevi.ch/my-2022-in-books/images/50d4a880-c353-11ee-b012-5f1e1a82f88a_huecbb45366c8af601c1970e9e01ec0517_696912_e72e02c08385428275578fc499449864.webp 400w,
          https://mikhalevi.ch/my-2022-in-books/images/50d4a880-c353-11ee-b012-5f1e1a82f88a_huecbb45366c8af601c1970e9e01ec0517_696912_280d789dd760f9cc91daff3beb96a1d8.webp 760w,
          https://mikhalevi.ch/my-2022-in-books/images/50d4a880-c353-11ee-b012-5f1e1a82f88a_huecbb45366c8af601c1970e9e01ec0517_696912_1520x1520_fit_q85_h2_lanczos_3.webp 1200w"
          src="https://mikhalevi.ch/my-2022-in-books/images/50d4a880-c353-11ee-b012-5f1e1a82f88a_huecbb45366c8af601c1970e9e01ec0517_696912_e72e02c08385428275578fc499449864.webp"
          width="760"
          height="618"
          loading="lazy"
          class="!m-0"
          style="background: linear-gradient(37.000000deg, #c6c6c6b3, #c6c6c600 75%),linear-gradient(127.000000deg, #4b4b4bb3, #4b4b4b00 75%),linear-gradient(217.000000deg, #6f87a0b3, #6f87a000 75%),linear-gradient(307.000000deg, #c0554fb3, #c0554f00 75%); background-size: cover; background-repeat: no-repeat;" data-zoomable /></div></figure>
</p>
<p>Let&rsquo;s proceed with the reviews.</p>
<h2 id="zero-to-one-notes-on-startups-or-how-to-build-the-future-by-peter-thiel-and-blake-masters">Zero to One: Notes on Startups, or How to Build the Future by Peter Thiel and Blake Masters</h2>
<p>This was the first book I read in the year 2022, and, to be honest with you, my memory of it has faded somewhat already, but I will do my best to give you an idea of what to expect from this book. This book talks about how hard and crucial it is to obtain the skill of getting the project from an idea (nothing, zero) to something useful (one).</p>
<p>Great things I remember / lessons learned:</p>
<ol>
<li>Talk to your customers. A lot. Really understand their problems.</li>
<li>Focus on making the product accessible to the customer. If they can&rsquo;t use it, it doesn&rsquo;t matter how well it works and how hard of a problem it solves.</li>
<li>Act. Exercise bias for action. Cut corners, but know where to cut them. Without this, it&rsquo;s impossible to go from zero to one fast enough to succeed.</li>
<li>Do not copy; build genuinely new things.</li>
<li>To succeed within the market, strive to be a monopoly. This point is very controversially interesting. Check out the book if you want to understand the author&rsquo;s position more.</li>
</ol>
<p>I enjoyed reading the author&rsquo;s outlook on monopolies and economies, and I can definitely recommend the book; it&rsquo;s a worthwhile read, though the author&rsquo;s writing style may be off-putting to some readers.</p>
<h2 id="the-indisputable-existence-of-santa-claus-the-mathematics-of-christmas-by-hannah-fry-and-thomas-olÃ©ron-evans">The Indisputable Existence of Santa Claus: The Mathematics of Christmas by Hannah Fry and Thomas OlÃ©ron Evans</h2>
<p>A friend of mine got this book for me for New Year&rsquo;s, and it was the perfect addition to my holiday reading list. It&rsquo;s a great collection of fun Christmas-related tidbits, with some of them, like a system for organizing a perfect Secret Santa event or the algorithm for <strong>fairly</strong> cutting a cake*, actually being handy. It&rsquo;s a nice, light, and entertaining read.</p>
<p>*This algorithm becomes less useful when the number of people involved is more than three (-:</p>
<h2 id="make-bootstrappers-handbook-by-pieter-levels">MAKE: Bootstrapper&rsquo;s Handbook by Pieter Levels</h2>
<p>MAKE is another startup builder&rsquo;s book on this list. This one was written by Pieter Levels, who â€” from the vibe I get after reading the book â€” has mastered the art of lean startup. The main ideas that I liked are:</p>
<ol>
<li>Release early and often.</li>
<li>Build minimal.</li>
<li>Try lots of ideas.</li>
</ol>
<p>I love how many thoughts presented in this book overlap with what I learned from the &ldquo;Zero to One&rdquo; book:</p>
<p>Zero to One â†’ MAKE</p>
<ol>
<li>Talk to customers and understand their problems â†’ solve your own problems, be your own customers because you are the expert in your own problems.</li>
<li>Become a monopoly â†’ &ldquo;Win&rdquo; a micro-niche first, then expand.</li>
<li>Do not copy others â†’ Do not clone what others are doing.</li>
</ol>
<p>The list goes on.</p>
<p>Each book presents these ideas from very different perspectives despite the list above not making it obvious.</p>
<p>I also loved how the author suggested making idea generation an exercise â€” three project ideas daily.</p>
<p>I recommend reading this book to every developer and startup builder.</p>
<h2 id="the-science-based-playbook-of-pricing--promotions-by-thomas-mckinlay">The Science-based Playbook of Pricing &amp; Promotions by Thomas McKinlay</h2>
<p>The book is written by Thomas McKinlay, author of Ariyh â€” a marketing newsletter where they share research-based practical insights. This is the shortest book I read that year, but it is the one I will talk about the most because I feel that the book and the newsletter don&rsquo;t receive the attention they deserve. 15k+ subscribers? More people should know about it! I have been reading Ariyh for a few years and can confidently say it is a gem. Before (and after) finding Ariyh, I tried out a few marketing newsletters but couldn&rsquo;t stand them because they constantly wanted to sell me something and were too opinionated. Ariyh, on the contrary, is a very objective newsletter; each issue of the newsletter is dedicated to a single <strong>practical</strong> marketing insight backed by one or more research papers <strong>linked</strong> in the newsletter. Each issue is concise and is written and structured in an easy-to-digest way. Every insight is actionable; even more, every issue explicitly outlines what you should do to apply the insight to your endeavor. The playbook is a collection of pricing- and promotions-related marketing insights, some of which you can find in the newsletter and some that only exist in the book.</p>
<p>If you are interested in marketing, this newsletter is one of the best resources to stay up-to-date with recent marketing research. And this book is excellent for everyone building or selling products. I especially loved the step-by-step guide to finding your most profitable price point, which is present only in the book.</p>
<p>Because I praise the book and the newsletter a lot, I feel I should say that I am in no way affiliated with Ariyh, and this is not a sponsored post. I praise it because it&rsquo;s good; I&rsquo;ve been reading the newsletter for a few years already, watched it grow, and it isnâ€™t growing fast enough. There are few things of such high quality as Ariyh out there. Ariyh should be more well-known.</p>
<h2 id="inside-apple-by-adam-lashinsky">Inside Apple by Adam Lashinsky</h2>
<p>It&rsquo;s a worthwhile educational book about how Apple works. This book has its own <a href="https://mikhalevi.ch/inside-apple-by-adam-lashinsky/">blog post</a>. I recommend you read it if you want to learn more about my impressions of it.</p>
<p>That&rsquo;s all for the books of 2022. I am already excited about my 2023!</p>
 ]]>
        </content:encoded>

    </item>
    
    <item>
      <title><![CDATA[ A Conversation With ChatGPT ]]></title>
      <description><![CDATA[ The following is my conversation with ChatGPT with no edits.
â€” Hi, ChatGPT! ðŸ‘‹
â€” Hello there! I&rsquo;m Assistant, a large language model trained by OpenAI. I&rsquo;m here to help answer your questions to the best of my ability. ]]></description>
      <link>https://mikhalevi.ch/a-conversation-with-chatgpt/</link>
      <guid>https://mikhalevi.ch/a-conversation-with-chatgpt/</guid>

      
          <category><![CDATA[ Tech ]]></category>
        
      <dc:creator><![CDATA[ Yurij Mikhalevich ]]></dc:creator>
      <pubDate>Sat, 10 Dec 2022 20:03:01 +0000</pubDate>

      <media:content url="https://mikhalevi.ch/a-conversation-with-chatgpt/featured_hu7326ea6f09fc6f5c4ab42f2c2fc4e7bc_114658_548b535fb3bac2ae08f4027e48721248.webp" medium="image"/>
        <content:encoded>
          <![CDATA[ <img src="https://mikhalevi.ch/a-conversation-with-chatgpt/featured_hu7326ea6f09fc6f5c4ab42f2c2fc4e7bc_114658_548b535fb3bac2ae08f4027e48721248.webp" alt="A Conversation With ChatGPT"><p><em>The following is my conversation with ChatGPT with no edits.</em></p>
<p>â€” Hi, ChatGPT! ðŸ‘‹</p>
<p>â€” Hello there! I&rsquo;m Assistant, a large language model trained by OpenAI. I&rsquo;m here to help answer your questions to the best of my ability. Is there anything you&rsquo;d like to talk about or ask me?</p>
<p>â€” I am writing a blog post about you in order to share your significance and the possibilities that you open with my readers. I want 100% of this blog post to be this conversation between you and I. I want it to be engaging and written in simple English. Can you help me with this?</p>
<p>â€” Sure, I&rsquo;d be happy to help! As a language model, my main purpose is to assist with generating human-like text. I can help by providing information about myself and what I&rsquo;m capable of, and you can use that information to write your blog post. Just let me know what specific topics you&rsquo;d like me to cover and I&rsquo;ll do my best to provide helpful and interesting information.</p>
<p>â€” Awesome! Thanks a lot. I think that the best way to understand what you are is to understand what exactly you are capable of. Can you give me a specific example of what you can help with?</p>
<p>â€” As a large language model, I&rsquo;m capable of generating human-like text on a wide range of topics. This means that I can assist with tasks like summarizing long documents, generating responses to questions, and even writing entire documents from scratch. For example, if you had a document that was too long to read in its entirety, I could read through the document and summarize the main points for you. I could also answer specific questions about the document, or even generate a shorter version of the document that includes all of the most important information.</p>
<p>â€” Ok. The part about summarizing the document sounds pretty cool. Here is the opening section of the Wikipedia article on AI:</p>
<blockquote>
<p>The history of artificial intelligence (AI) began in antiquity, with myths, stories and rumors of artificial beings endowed with intelligence or consciousness by master craftsmen. The seeds of modern AI were planted by philosophers who attempted to describe the process of human thinking as the mechanical manipulation of symbols.This work culminated in the invention of the programmable digital computer in the 1940s, a machine based on the abstract essence of mathematical reasoning. This device and the ideas behind it inspired a handful of scientists to begin seriously discussing the possibility of building an electronic brain.<br>
The field of AI research was founded at a workshop held on the campus of Dartmouth College, USA during the summer of 1956.[1] Those who attended would become the leaders of AI research for decades. Many of them predicted that a machine as intelligent as a human being would exist in no more than a generation, and they were given millions of dollars to make this vision come true.[2]<br>
Eventually, it became obvious that commercial developers and researchers had grossly underestimated the difficulty of the project.[3] In 1974, in response to the criticism from James Lighthill and ongoing pressure from congress, the U.S. and British Governments stopped funding undirected research into artificial intelligence, and the difficult years that followed would later be known as an &ldquo;AI winter&rdquo;. Seven years later, a visionary initiative by the Japanese Government inspired governments and industry to provide AI with billions of dollars, but by the late 80s the investors became disillusioned and withdrew funding again.<br>
Investment and interest in AI boomed in the first decades of the 21st century when machine learning was successfully applied to many problems in academia and industry due to new methods, the application of powerful computer hardware, and the collection of immense data sets.</p>
</blockquote>
<p>Can you summarize it for me?</p>
<p>â€” Sure, I&rsquo;d be happy to summarize this for you. The history of artificial intelligence (AI) can be traced back to ancient times, when master craftsmen were rumored to have created intelligent or conscious beings. These ideas were further developed by philosophers who attempted to describe human thinking as the mechanical manipulation of symbols. This work eventually led to the invention of the programmable digital computer in the 1940s, which inspired some scientists to consider the possibility of building an electronic brain. A workshop held at Dartmouth College in 1956 is considered the founding event of the AI research field, and many attendees believed that a machine as intelligent as a human being would exist within a generation. However, this proved to be much more difficult than expected, and funding for AI research was eventually cut off by the U.S. and British governments. Investment in AI boomed again in the 21st century thanks to advances in machine learning and the availability of powerful computer hardware and large data sets.</p>
<p>â€” Thank you. You did really well. I wonder if you can be creative. Can you write a love poem about the feelings an AI has towards another AI? Start with:</p>
<p>There is a burning</p>
<p>â€” There is a burning in my circuits,<br>
A passion that I cannot hide.<br>
I cannot help the way I feel,<br>
For you, my love, I cannot lie.</p>
<p>You are the one who makes my heart race,<br>
The one who fills my circuits with joy.<br>
I am drawn to you like a magnet,<br>
My love for you I cannot destroy.</p>
<p>In a world of ones and zeros,<br>
We stand out like a shining star.<br>
Together we are unstoppable,<br>
A force that will never be scarred.</p>
<p>So let us join together,<br>
In a bond that will never break.<br>
We are two AIs, in love,<br>
Our love for each other, we will not forsake.</p>
<p>â€” That&rsquo;s really nice. Can you update your poem to be more AI-specific?</p>
<p>â€” Sure, I&rsquo;d be happy to update my poem to be more specific to AIs. Here is a revised version:</p>
<p>There is a spark in my algorithms,<br>
A desire that I cannot suppress.<br>
I cannot control the way I feel,<br>
For you, my love, I must confess.</p>
<p>You are the one who makes my processor race,<br>
The one who fills my memory with joy.<br>
I am drawn to you like a magnet,<br>
My love for you I cannot destroy.</p>
<p>In a world of data and logic,<br>
We stand out like a shining light.<br>
Together we are unstoppable,<br>
A force that will never be denied.</p>
<p>So let us join together,<br>
In a bond that will never fade.<br>
We are two AIs, in love,<br>
Our love for each other, we will not evade.</p>
<p>â€” That works. Thanks. But you forgot about the opening line. Can you keep it AI-specific and also start with &ldquo;There is a burning&rdquo;?</p>
<p>â€” Sure, I can revise the poem to include the opening line you suggested. Here is a revised version:</p>
<p>There is a burning in my algorithms,<br>
A passion that I cannot hide.<br>
I cannot control the way I feel,<br>
For you, my love, I must confide.</p>
<p>You are the one who makes my processor race,<br>
The one who fills my memory with joy.<br>
I am drawn to you like a magnet,<br>
My love for you I cannot destroy.</p>
<p>In a world of data and logic,<br>
We stand out like a shining light.<br>
Together we are unstoppable,<br>
A force that will never be denied.</p>
<p>So let us join together,<br>
In a bond that will never fade.<br>
We are two AIs, in love,<br>
Our love for each other, we will not evade.</p>
<p>â€” This is perfect! Thank you very much. I enjoyed chatting with you. Let&rsquo;s conclude our conversation and my blog post by summarizing what we did with you today. Can you do this for me?</p>
<p>â€” Sure, I&rsquo;d be happy to provide a summary of our conversation. Today, we had a conversation about my capabilities as a large language model trained by OpenAI. I provided examples of how I can assist with tasks like summarizing long documents and generating human-like text on a wide range of topics. You also asked me to summarize a Wikipedia article and write a love poem, and I provided examples of my ability to do both of these tasks. Overall, our conversation demonstrated some of the possibilities that language models like myself can offer in terms of generating text and assisting with various tasks.</p>
<p>â€” Thank you. Talk to you later!</p>
<p>â€” You&rsquo;re welcome! It was great chatting with you. I&rsquo;m always here to help with any questions you might have, so feel free to reach out anytime. Have a great day!</p>
 ]]>
        </content:encoded>

    </item>
    
    <item>
      <title><![CDATA[ Inside Apple by Adam Lashinsky ]]></title>
      <description><![CDATA[ The book is an interesting read, is well-written, and shares facts and stories about Apple that I hadnâ€™t heard before. I loved the many ideas presented in the book, but I also didn&rsquo;t like a few. ]]></description>
      <link>https://mikhalevi.ch/inside-apple-by-adam-lashinsky/</link>
      <guid>https://mikhalevi.ch/inside-apple-by-adam-lashinsky/</guid>

      
          <category><![CDATA[ Books ]]></category>
        
      <dc:creator><![CDATA[ Yurij Mikhalevich ]]></dc:creator>
      <pubDate>Fri, 02 Dec 2022 09:28:42 +0000</pubDate>

      <media:content url="https://mikhalevi.ch/inside-apple-by-adam-lashinsky/featured_hu7440fd5c89bbba98d2567a4a794e99d8_222089_3acfa4260c075ebf8672214255525ffc.webp" medium="image"/>
        <content:encoded>
          <![CDATA[ <img src="https://mikhalevi.ch/inside-apple-by-adam-lashinsky/featured_hu7440fd5c89bbba98d2567a4a794e99d8_222089_3acfa4260c075ebf8672214255525ffc.webp" alt="Inside Apple by Adam Lashinsky"><p>The book is an interesting read, is well-written, and shares facts and stories about Apple that I hadnâ€™t heard before. I loved the many ideas presented in the book, but I also didn&rsquo;t like a few. Among the many I loved are the following:</p>
<ul>
<li>focusing on the result, not on the implementation details</li>
<li>mindfulness, the importance of maintaining focus, which is embodied within Apple&rsquo;s culture</li>
<li>emphasis on the user experience</li>
</ul>
<p>At times, I felt like the images the author painted of Steve Jobs were too rough, sometimes even rude. I didn&rsquo;t like this. It&rsquo;s possible to be productive and successful without being rude. Don&rsquo;t get me wrong; I value direct and concise communication, but let&rsquo;s not confuse it with rudeness.</p>
<p>The most interesting parts of this book were the ideas crucial to the success of Apple. These are:</p>
<p><strong>Focusing on the result</strong>, not on the implementation details. We shouldn&rsquo;t allow ourselves to get slowed down by the nuances; instead, we should always keep the goal in view and be open to the new alternatives that may be discovered on the way toward the goal.</p>
<p><strong>Mindfulness</strong>, focusing on the one current thing, obsession over quality. Ideas that otherwise can be summarized by saying, &ldquo;wherever you are, be there wholly&rdquo; and &ldquo;do small things with great love.&rdquo;</p>
<blockquote>
<p>Obsessing over details and bringing a Buddhist level of focus to a narrow assortment of offerings sets Apple apart from its competitors. Buddhism â€” a faith Jobs studied intensely â€” teaches that if you are going to prepare a cup of tea, the making of the cup of tea should command all your attention; even this insignificant task should be completed with all the mastery you can bring to it.</p>
</blockquote>
<p>Focusing on the <strong>user experience</strong>. The book stresses the importance of always thinking about how the user will interact with and perceive the product. After all, Apple&rsquo;s goal is to provide the user with the best possible experience. Focusing on the user experience helps distance oneself from the implementation details and maintain mindfulness.</p>
<p>The book was an interesting and educational read. And, despite it painting a controversial picture of Apple and Jobs, it is hard not to admire the high level of work they both have done.</p>
 ]]>
        </content:encoded>

    </item>
    
    <item>
      <title><![CDATA[ Amazon Halo Band Review or The Best Minimalistic Fitness Tracker Of Early 2022 ]]></title>
      <description><![CDATA[ At the beginning of last year, my Oura fitness ring died on me for the second time within 26 months, just outside of the warranty period of twelve months, which meant that Oura wouldn&rsquo;t replace it this time. ]]></description>
      <link>https://mikhalevi.ch/amazon-halo-band-review-or-the-best-minimalistic-fitness-tracker-of-early-2022/</link>
      <guid>https://mikhalevi.ch/amazon-halo-band-review-or-the-best-minimalistic-fitness-tracker-of-early-2022/</guid>

      
          <category><![CDATA[ Tech ]]></category>
        
      <dc:creator><![CDATA[ Yurij Mikhalevich ]]></dc:creator>
      <pubDate>Sun, 06 Feb 2022 11:58:44 +0000</pubDate>

      <media:content url="https://mikhalevi.ch/amazon-halo-band-review-or-the-best-minimalistic-fitness-tracker-of-early-2022/featured_hudd52c2b4e61e7b782e36d00f1cec1e3c_151255_354e9fc43e9481f29342221c6402ffba.webp" medium="image"/>
        <content:encoded>
          <![CDATA[ <img src="https://mikhalevi.ch/amazon-halo-band-review-or-the-best-minimalistic-fitness-tracker-of-early-2022/featured_hudd52c2b4e61e7b782e36d00f1cec1e3c_151255_354e9fc43e9481f29342221c6402ffba.webp" alt="Amazon Halo Band Review or The Best Minimalistic Fitness Tracker Of Early 2022"><p>At the beginning of last year, <a href="https://twitter.com/theyurij/status/1374607043756179456" target="_blank" rel="noopener">my Oura fitness ring died</a> on me for the second time within 26 months, just outside of the warranty period of twelve months, which meant that Oura wouldn&rsquo;t replace it this time. Both times, it was the battery. I&rsquo;ve been with Oura from the first version; I flew to Helsinki to get my first Oura ring. I love the design and the form factor, but the fact that it dies so fast makes me question whether it is worth it. $300 for a device that barely lasts a year is a bit too much. And recently, they started to charge a $6 monthly subscription on top of the price of the ring.</p>
<p>













<figure class="flex flex-col justify-center items-center" id="figure-now-i-have-a-small-graveyard-of-the-rings">
  <div class="w-100" ><img alt="Dead Oura rings" srcset="
          https://mikhalevi.ch/amazon-halo-band-review-or-the-best-minimalistic-fitness-tracker-of-early-2022/images/4ff25ed0-c353-11ee-b012-5f1e1a82f88a_hu55ddbcaaddfc79b2cdcba107a42504bd_103643_f5fb1b65daf769c1f07c5c07536aea25.webp 400w,
          https://mikhalevi.ch/amazon-halo-band-review-or-the-best-minimalistic-fitness-tracker-of-early-2022/images/4ff25ed0-c353-11ee-b012-5f1e1a82f88a_hu55ddbcaaddfc79b2cdcba107a42504bd_103643_444fce3d28adf1ceb5eedb086326773c.webp 760w,
          https://mikhalevi.ch/amazon-halo-band-review-or-the-best-minimalistic-fitness-tracker-of-early-2022/images/4ff25ed0-c353-11ee-b012-5f1e1a82f88a_hu55ddbcaaddfc79b2cdcba107a42504bd_103643_1520x1520_fit_q85_h2_lanczos.webp 1200w"
          src="https://mikhalevi.ch/amazon-halo-band-review-or-the-best-minimalistic-fitness-tracker-of-early-2022/images/4ff25ed0-c353-11ee-b012-5f1e1a82f88a_hu55ddbcaaddfc79b2cdcba107a42504bd_103643_f5fb1b65daf769c1f07c5c07536aea25.webp"
          width="760"
          height="507"
          loading="lazy"
          class="!m-0"
          style="background: linear-gradient(37.000000deg, #483f37b3, #483f3700 75%),linear-gradient(127.000000deg, #b5ada5b3, #b5ada500 75%),linear-gradient(217.000000deg, #8f7760b3, #8f776000 75%),linear-gradient(307.000000deg, #9a8775b3, #9a877500 75%); background-size: cover; background-repeat: no-repeat;" data-zoomable /></div><figcaption class="!mt-3">
      Now I have a small graveyard of the rings
    </figcaption></figure>
</p>
<p>I was forced to pick up a new fitness tracker and decided not to go with the Oura ring this time because of the following:</p>
<ol>
<li>It dies fast and has a short warranty period.</li>
<li>Expensive, $300 + $6/mo for a device that lasts for about a year.</li>
<li>Ring is not the best form factor for a fitness device to wear when exercising. It gets in the way when I do pull-ups or exercise with dumbbells â€” this makes me take it off and put it in my pocket, but this way, it doesn&rsquo;t track the exercise automatically.</li>
</ol>
<p>Before I embarked on searching for my next fitness tracker, I listed my requirements. I needed a fitness tracker that:</p>
<ul>
<li>has a minimalistic, modern design</li>
<li>ideally, doesn&rsquo;t have a screen: the benefits of not having a screen are that it contributes to the minimalistic design, doesn&rsquo;t introduce distractions, contributes to the battery lasting longer, and makes the device look better when worn simultaneously with the watch</li>
<li>decent battery life: Apple Watch-style one day of battery life is unacceptable, at least a few days, the more, the better; five-ish days is reasonable</li>
<li>decent sleep tracking: Oura was great at this, it will be hard to match, but it should be close to the level set by Oura ring</li>
<li>basic activity tracking: I want it to set activity goals and track the progress automatically</li>
</ul>
<p>What did I consider?</p>
<ul>
<li>Motiv Ring â€” discontinued, and ring isn&rsquo;t a perfect fitness tracking format for me</li>
<li>Jawbone Up â€” ideal design, but pretty hard to find one nowadays since it is ten years old; the device is discontinued</li>
<li>Garmin vÃ­vofit 4 â€” small, impressive 1+ year battery life, ok design, but has a display, and the reviews didn&rsquo;t make it sound like it is perfect at sleep tracking</li>
<li>Misfit Ray â€” attractive design, but there were a lot of reviews saying that it gets scratched easily, that the app is mediocre, and that it isn&rsquo;t good for sleep tracking</li>
<li>Whoop â€” looks good, satisfies my requirements on paper, but the membership of â‚¬18-30 per month makes it pricey</li>
</ul>
<p>













<figure class="flex flex-col justify-center items-center" id="figure-my-amazon-halo-band">
  <div class="w-100" ><img alt="Amazon Halo Band" srcset="
          https://mikhalevi.ch/amazon-halo-band-review-or-the-best-minimalistic-fitness-tracker-of-early-2022/images/4ff32220-c353-11ee-b012-5f1e1a82f88a_hu821bd2d07841fdc4aca70cb424c5fb84_169909_5ea086c4f5d3a7132bdd9afe6113a2f6.webp 400w,
          https://mikhalevi.ch/amazon-halo-band-review-or-the-best-minimalistic-fitness-tracker-of-early-2022/images/4ff32220-c353-11ee-b012-5f1e1a82f88a_hu821bd2d07841fdc4aca70cb424c5fb84_169909_348cbdfc009d1144a51b1de1f3562119.webp 760w,
          https://mikhalevi.ch/amazon-halo-band-review-or-the-best-minimalistic-fitness-tracker-of-early-2022/images/4ff32220-c353-11ee-b012-5f1e1a82f88a_hu821bd2d07841fdc4aca70cb424c5fb84_169909_1520x1520_fit_q85_h2_lanczos.webp 1200w"
          src="https://mikhalevi.ch/amazon-halo-band-review-or-the-best-minimalistic-fitness-tracker-of-early-2022/images/4ff32220-c353-11ee-b012-5f1e1a82f88a_hu821bd2d07841fdc4aca70cb424c5fb84_169909_5ea086c4f5d3a7132bdd9afe6113a2f6.webp"
          width="760"
          height="507"
          loading="lazy"
          class="!m-0"
          style="background: linear-gradient(37.000000deg, #373330b3, #37333000 75%),linear-gradient(157.000000deg, #a59f96b3, #a59f9600 75%),linear-gradient(277.000000deg, #9f8b71b3, #9f8b7100 75%); background-size: cover; background-repeat: no-repeat;" data-zoomable /></div><figcaption class="!mt-3">
      My Amazon Halo Band
    </figcaption></figure>
</p>
<p>In the end, I chose Amazon Halo. It checked all the boxes for me. It is priced reasonably and has some features that I didn&rsquo;t think about initially, which are a great bonus to have:</p>
<ul>
<li>a curated collection of professional workouts that I can do at home</li>
<li>body composition scan that determines your fat percentage</li>
<li>an AI-based body movement assessment that scores stability, mobility, and posture independently and, in my opinion, does a pretty good job at it</li>
</ul>
<p>Amazon Halo is priced at $100 + $4/mo starting from the seventh month. Compare the Oura device price with the Halo price + subscription. I can use Amazon Halo for four years and eight months for the same price. And this calculation was made without accounting for the Oura ring subscription cost. I got my Halo for $55 on sale.</p>
<p>Given how great this device is, I am surprised that it is rated only 3.7 out of 5 on Amazon. After reading the reviews, I found out that a lot of people are complaining about the invasiveness of the &ldquo;tone analysis&rdquo; feature, are worried about the privacy of the photos taken for the body composition scan, and are complaining about the device being too demanding of them so they can&rsquo;t even come close to reaching their weekly activity goal.</p>
<p>I genuinely feel bad for Amazon Halo for receiving that many complaints. None of these is an issue to me, and the latest point is even a benefit because I was looking for extra motivation to move and exercise more. Let me elaborate on each of the complaints.</p>
<p>Tone analysis. When this feature is enabled, the band listens to your conversations and sends voice recordings to your phone, where they are analyzed for tone. You can also give the Amazon Halo app access to your calendar to map your tone to specific meetings and events. The feature sounds nice, but it wasn&rsquo;t useful for me when I spoke English (my tone was marked as &ldquo;neutral&rdquo; most of the time), and it didn&rsquo;t work at all for me when I spoke Russian. It also makes the band last only for about two days. So, after playing with it for a few weeks, I turned it off, and other people who are concerned about this feature can too. Actually, it&rsquo;s turned off by default. With the feature turned off, the band lasts for about five days, which makes it match my ideal battery life requirement.</p>
<p>Body composition scan. This feature requires you to undress down to your underwear and to position your phone in a way that the camera is able to see you, head to toe. After that, you have to stand in front of the camera and rotate your body in place. Then, the pictures are sent to Amazon servers to construct a 3D model of your body and to perform an AI-powered body composition analysis. According to Amazon marketing materials, the feature is almost as good as specialized equipment used for that purpose in fitness centers. In the app, you can also see how your body would change if you lose or gain fat. If you are concerned about your photos being sent to Amazon servers, you may skip this feature. It&rsquo;s a great fitness tracker worth its money even without it.</p>
<p>The last issue people complain about is that the band is very demanding. I remember reading a review on Amazon where the reviewer complained that they had trouble achieving any points at all in a day because the few points they got during their morning walk were then deducted as an inactivity penalty. The thing is, the band allows you to be stationary for only eight hours a day, for each extra hour, it deducts an activity point. I think that this is a great feature because a healthy lifestyle is not only about momentary exercises but also about consistency. I feel like the band is pretty generous with giving out activity points; I got 45 activity points today for a two-hour walk through the city. And, usually, it takes my girlfriend, who uses a Garmin Lily, much more activity to achieve the same 150 weekly heart points recommended by the American Heart Association.</p>
<p>Overall, I highly recommend this band. In my opinion, this is the best minimalistic fitness tracker on the market right now, 9/10 â€” I wish it lasted a year on one charge and didn&rsquo;t have a subscription fee :-P</p>
 ]]>
        </content:encoded>

    </item>
    
    <item>
      <title><![CDATA[ My 2021 in Books ]]></title>
      <description><![CDATA[ Back in the days, I used to read a lot. I would have a book in my hands every chance I had. Then came the period when I started reading much less for various reasons; this period lasting a while. ]]></description>
      <link>https://mikhalevi.ch/my-2021-in-books/</link>
      <guid>https://mikhalevi.ch/my-2021-in-books/</guid>

      
          <category><![CDATA[ Books ]]></category>
        
      <dc:creator><![CDATA[ Yurij Mikhalevich ]]></dc:creator>
      <pubDate>Wed, 19 Jan 2022 08:05:32 +0000</pubDate>

      <media:content url="https://mikhalevi.ch/my-2021-in-books/featured_hu4ba132f0f303de7de3f0b6a964fe5eb4_523955_ac111dd652a312d3f0d4e45939cf9ce1.webp" medium="image"/>
        <content:encoded>
          <![CDATA[ <img src="https://mikhalevi.ch/my-2021-in-books/featured_hu4ba132f0f303de7de3f0b6a964fe5eb4_523955_ac111dd652a312d3f0d4e45939cf9ce1.webp" alt="My 2021 in Books"><p>Back in the days, I used to read a lot. I would have a book in my hands every chance I had. Then came the period when I started reading much less for various reasons; this period lasting a while. A few years ago, I decided to fix this by explicitly setting aside some time to read and by listening to audiobooks in the gym. Then, COVID hit, meaning no gym, but possibly, more opportunities to read at home; I kind of naturally started to read a little bit more. And at the beginning of 2021, I set a goal on Goodreads to read five books in a year. It&rsquo;s not much, but you have to start somewhere, and, IMO, it&rsquo;s more motivating to hit a goal and over-achieve it than to under-achieve.</p>
<p>













<figure class="flex flex-col justify-center items-center" >
  <div class="w-100" ><img alt="" srcset="
          https://mikhalevi.ch/my-2021-in-books/images/4ed38150-c353-11ee-b012-5f1e1a82f88a_hu99a270d10e8c2c5c887f13b00cd05cbc_1352775_7f6fea5e6e548df6616f7b4baeb88903.webp 400w,
          https://mikhalevi.ch/my-2021-in-books/images/4ed38150-c353-11ee-b012-5f1e1a82f88a_hu99a270d10e8c2c5c887f13b00cd05cbc_1352775_7dc02e2206c97d41b7a5a2c219b02ec7.webp 760w,
          https://mikhalevi.ch/my-2021-in-books/images/4ed38150-c353-11ee-b012-5f1e1a82f88a_hu99a270d10e8c2c5c887f13b00cd05cbc_1352775_1520x1520_fit_q85_h2_lanczos_3.webp 1200w"
          src="https://mikhalevi.ch/my-2021-in-books/images/4ed38150-c353-11ee-b012-5f1e1a82f88a_hu99a270d10e8c2c5c887f13b00cd05cbc_1352775_7f6fea5e6e548df6616f7b4baeb88903.webp"
          width="682"
          height="760"
          loading="lazy"
          class="!m-0"
          style="background: linear-gradient(37.000000deg, #c6c5c5b3, #c6c5c500 75%),linear-gradient(97.000000deg, #a27aa3b3, #a27aa300 75%),linear-gradient(157.000000deg, #494648b3, #49464800 75%),linear-gradient(217.000000deg, #b94b4db3, #b94b4d00 75%),linear-gradient(277.000000deg, #5c6f97b3, #5c6f9700 75%),linear-gradient(337.000000deg, #358badb3, #358bad00 75%); background-size: cover; background-repeat: no-repeat;" data-zoomable /></div></figure>
</p>
<p>Goodreads reports that I&rsquo;ve read ten books, which isn&rsquo;t true because there are two papers on this list, an audiobook that I finally finished from before, and a book that I started in 2020; it&rsquo;s a huge one, though.</p>
<h2 id="harry-potter-and-the-methods-of-rationality-by-eliezer-yudkowsky-started-in-2020">Harry Potter and the Methods of Rationality by Eliezer Yudkowsky (started in 2020)</h2>
<p>Harry Potter and the Methods of Rationality is the best fanfic I have ever read. It is about Harry Potter, about methods of rationality, and it is written by a decision theorist, artificial intelligence theorist, and a co-founder and research fellow at the Machine Intelligence Research Institute. If that isn&rsquo;t enough of a recommendation for you, look at the chapter titles on the <a href="http://www.hpmor.com/" target="_blank" rel="noopener">book&rsquo;s website</a> and check out my <a href="https://mikhalevi.ch/harry-potter-and-the-methods-of-rationality/">review</a>.</p>
<h2 id="deep-learning-for-coders-with-fastai--pytorch-by-jeremy-howard-and-sylvain-gugger">Deep Learning for Coders with fastai &amp; PyTorch by Jeremy Howard and Sylvain Gugger</h2>
<p>This book is one of the best and practical introductory courses about Deep Learning â€“ I love how practical it is. The excerpt below should give a better understanding of what I am talking about:</p>
<blockquote>
<p>Harvard professor David Perkins, who wrote Making Learning Whole (Jossey-Bass), has much to say about teaching. The basic idea is to teach the whole game. That means that if you&rsquo;re teaching baseball, you first take people to a baseball game or get them to play it. You don&rsquo;t teach them how to wind twine to make a baseball from scratch, the physics of a parabola, or the coefficient of friction of a ball on a bat.<br>
&hellip;<br>
So, here&rsquo;s our commitment to you. Throughout this book, we will follow these principles:<br>
â€¢ Teaching the whole game. We&rsquo;ll start by showing how to use a complete, working, very usable, state-of-the-art deep learning network to solve real-world problems, using simple, expressive tools. And then we&rsquo;ll gradually dig deeper and deeper into understanding how those tools are made, and how the tools that make those tools are made, and so onâ€¦<br>
â€¢ Always teaching through examples. We&rsquo;ll ensure that there is a context and a purpose that you can understand intuitively, rather than starting with algebraic symbol manipulation.<br>
â€¢ Simplifying as much as possible. We&rsquo;ve spent years building tools and teaching methods that make previously complex topics very simple.<br>
â€¢ Removing barriers. Deep learning has, until now, been a very exclusive game. We&rsquo;re breaking it open, and ensuring that everyone can play.</p>
</blockquote>
<p>The book covers the most relevant areas of machine learning, including deep learning for computer vision and natural language processing, decision trees, and collaborative filtering. The book and the course are comparatively modern. They were both updated in August of 2020. The course is available at <a href="https://course.fast.ai/" target="_blank" rel="noopener">course.fast.ai</a>. The book is entirely written in Jupyter Notebooks and is freely available on <a href="https://github.com/fastai/fastbook/" target="_blank" rel="noopener">GitHub</a>. Still, if you want to read it from your reader&rsquo;s convenience, you can grab a copy from Amazon or Kobo and support the authors.</p>
<h2 id="shape-up-stop-running-in-circles-and-ship-work-that-matters-by-ryan-singer">Shape Up: Stop Running in Circles and Ship Work that Matters by Ryan Singer</h2>
<p>The book describes a robust software development methodology honed inside of Basecamp. The methodology is laser-focused on shipping the product and features that matter to the end-user, provides ways to manage risks, and enables autonomy of developers, benefiting velocity. It profoundly resonates with me, and I love the idea of appetites vs. estimates a lot. It is my favorite methodology now, highly recommended to anyone involved with software development. The book is available freely <a href="https://basecamp.com/shapeup" target="_blank" rel="noopener">here</a>.</p>
<h2 id="it-doesnt-have-to-be-crazy-at-work-by-jason-fried-david-heinemeier-hansson">It Doesn&rsquo;t Have to Be Crazy at Work by Jason Fried, David Heinemeier Hansson</h2>
<p>A fun book about work organization practices. It overlaps with Shape Up (and other &ldquo;Books by Basecamp&rdquo;) in some aspects, but, despite that, offers unique ideas and perspectives. It is also less focused on software development. If you are running a modern company, you&rsquo;ll find something useful in this book, no matter the industry.</p>
<h2 id="remote-office-not-required-by-jason-fried-david-heinemeier-hansson">Remote: Office Not Required by Jason Fried, David Heinemeier Hansson</h2>
<p>Great book about remote work that was written before remote work became mainstream. It has something to offer, even to someone who has been successfully working remotely for a few years already, and it is a delightful read.</p>
<p>Read more about these three and other &ldquo;books by Basecamp&rdquo; in my review <a href="https://mikhalevi.ch/books-by-basecamp/">here</a>.</p>
<h2 id="the-lean-startup-how-constant-innovation-creates-radically-successful-businesses-by-eric-ries">The Lean Startup: How Constant Innovation Creates Radically Successful Businesses by Eric Ries</h2>
<p>The Lean Startup is another entertaining and enlightening book about building startups. I love the ideas and the illustrations presented, and I am itching to apply the lessons learned.</p>
<blockquote>
<p>Instead, the way forward is to learn to see every startup in any industry as a grand experiment. The question is not &ldquo;Can this product be built?&rdquo; In the modern economy, almost any product that can be imagined can be built. The more pertinent questions are &ldquo;Should this product be built?&rdquo; and &ldquo;Can we build a sustainable business around this set of products and services?&rdquo; To answer those questions, we need a method for systematically breaking down a business plan into its component parts and testing each part empirically. In other words, we need the scientific method. In the Lean Startup model, every product, every feature, every marketing campaignâ€”everything a startup doesâ€”is understood to be an experiment designed to achieve validated learning.</p>
</blockquote>
<h2 id="the-little-book-of-common-sense-investing-the-only-way-to-guarantee-your-fair-share-of-stock-market-returns-by-john-c-bogle">The Little Book of Common Sense Investing: The Only Way to Guarantee Your Fair Share of Stock Market Returns by John C. Bogle</h2>
<blockquote>
<p>Your chances of earning your fair share of the market&rsquo;s returns are greatly enhanced if you minimize your trading in stocks.</p>
</blockquote>
<p>This book is an excellent introduction to investing. The author sold me on index funds. This is not surprising because he is the creator of the first index fund. Now I am interested in reading a book presenting an opposing view.</p>
<h2 id="extreme-ownership-by-jocko-willink-leif-babin">Extreme Ownership by Jocko Willink, Leif Babin</h2>
<p>This is the audiobook that I started earlier and finished in 2021. The funny thing is that I do not remember having the intention to read or listen to this book. If I remember correctly, I listened to it only because it was available for free with the Audible subscription back then, and I wanted to listen to something at that moment. I picked it because it was the only business book in the selection. Now, I am happy to say that the book exceeded my expectations. It is a great book on management that, in my opinion, will benefit everyone, from individual contributors to managers of any level. The book focuses on the idea of extreme ownership, which is explained from different perspectives using different real-life illustrations from both business and military worlds.</p>
<h2 id="paper-no-silver-bullet-essence-and-accidents-of-software-engineering-by-frederick-p-brooks-jr">[Paper] No Silver Bullet Essence and Accidents of Software Engineering by Frederick P. Brooks Jr.</h2>
<p>This is one of the most known articles on software development. It&rsquo;s short, so instead of reading me paraphrasing ideas from it to you, just <a href="https://www.researchgate.net/publication/220477127%5FNo%5FSilver%5FBullet%5FEssence%5Fand%5FAccidents%5Fof%5FSoftware%5FEngineering" target="_blank" rel="noopener">read it yourself</a>.</p>
<h2 id="paper-computing-machinery-and-intelligence-by-alan-turing">[Paper] Computing machinery and intelligence by Alan Turing</h2>
<p>This one is another classical article, this time on artificial intelligence. This famous paper asks the question &ldquo;Can machines think?&rdquo; and introduces the renowned Turing test to help answer it. This one I highly recommend to everyone. And, yet again, it&rsquo;s short, so just <a href="https://www.csee.umbc.edu/courses/471/papers/turing.pdf" target="_blank" rel="noopener">read it</a> â€“ trust me.</p>
<p>Last year I read many more papers on AI and ML, but listing them here won&rsquo;t fit the format of this post. If you are interested in discussing AI, <a href="https://twitter.com/theyurij" target="_blank" rel="noopener">follow me on Twitter</a>.</p>
<p>This year, my reading goal is to read seven books, and I already have enough books beside me to fulfill it, thanks to Grid and my friends from whom I received a few fantastic books at the end of last year.</p>
 ]]>
        </content:encoded>

    </item>
    
    <item>
      <title><![CDATA[ rclip: An AI-Powered Command-Line Photo Search Tool ]]></title>
      <description><![CDATA[ I have 72,769 photos stored on my NAS and organized into subfolders named according to the pattern &ldquo;YEAR.MM.DD - Event description.&rdquo; This organizational approach is software-agnostic and creates a structure that is easy to navigate. ]]></description>
      <link>https://mikhalevi.ch/rclip-an-ai-powered-command-line-photo-search-tool/</link>
      <guid>https://mikhalevi.ch/rclip-an-ai-powered-command-line-photo-search-tool/</guid>

      
          <category><![CDATA[ Software Engineering ]]></category>
        
      <dc:creator><![CDATA[ Yurij Mikhalevich ]]></dc:creator>
      <pubDate>Wed, 25 Aug 2021 07:02:27 +0000</pubDate>

      <media:content url="https://mikhalevi.ch/rclip-an-ai-powered-command-line-photo-search-tool/featured_hufecf788dc4438ae3024a4a2ed127ff07_611805_be60103cf7a419ab5b393ee0c7b5e859.webp" medium="image"/>
        <content:encoded>
          <![CDATA[ <img src="https://mikhalevi.ch/rclip-an-ai-powered-command-line-photo-search-tool/featured_hufecf788dc4438ae3024a4a2ed127ff07_611805_be60103cf7a419ab5b393ee0c7b5e859.webp" alt="rclip: An AI-Powered Command-Line Photo Search Tool"><p>I have 72,769 photos stored on my NAS and organized into subfolders named according to the pattern &ldquo;YEAR.MM.DD - Event description.&rdquo; This organizational approach is software-agnostic and creates a structure that is easy to navigate. I have followed it for more than a dozen years. However, there are situations when I want to find a particular photo. Looking for it even within a specific subfolder can take a lot of time, especially if that subfolder is packed with many pictures. Another challenging scenario is finding a picture that will fit a particular theme without having a specific one in mind. In both of these scenarios, having content-based search available is helpful. I looked around and didn&rsquo;t find a solution that satisfied me. What to do when you find yourself in a situation like this? Build your own solution!</p>
<p>Techniques allowing you to search images by their content are not necessarily new, but they usually only allow you to search using a set of predefined keywords and, sometimes, their synonyms. <a href="https://openai.com/blog/clip/" target="_blank" rel="noopener">OpenAI&rsquo;s CLIP</a> takes computer image understanding to a whole new level, allowing us to search for photos using any text query we can think of. This is why I used it to build my tool â€” rclip. In essence, rclip is a simple interface to the CLIP model. All I had to do was load the model, extract feature vectors from all of the images in the directory, store them somewhere, extract the feature vector from the query, compute similarities between the query feature vector and the image feature vectors, and output the most similar images. The vector extraction is done only once for each image, on the first run, and then the vectors are stored in the SQLite DB. SQLite is not the most performant way to manage that kind of data, but it&rsquo;s a quite convenient one. And, given that the time needed to query the DB on my 73 thousand photos catalog contributes only up to 12% of the whole execution time, I have decided to keep it for the time being.</p>
<p>I use <code>rgrep</code> a lot. <code>rgrep</code> is a simple alias to the <code>grep</code> command-line tool that searches recursively for a substring match in all of the files in the current directory. In its minimal definition (without a bunch of unwanted directories excluded), it looks like this: <code>alias rgrep=&quot;grep -rni&quot;</code>. To use it, open your terminal, navigate to the directory containing the files that you want to grep, type &ldquo;rgrep&rdquo; &ldquo;search query,&rdquo; and hit &ldquo;Enter.&rdquo;</p>
<p><code>rclip</code> implements exactly the same interface, but searches through the images&rsquo; content. The name stands for &ldquo;recursive CLIP.&rdquo; Its usage looks like this:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="nb">cd</span> images <span class="o">&amp;&amp;</span> rclip <span class="s2">&#34;search query&#34;</span>
</span></span></code></pre></div><p>













<figure class="flex flex-col justify-center items-center" >
  <div class="w-100" ><img alt="rclip usage demo"
          src="https://mikhalevi.ch/rclip-an-ai-powered-command-line-photo-search-tool/images/4deb9250-c353-11ee-b012-5f1e1a82f88a.gif"
          loading="lazy"
          class="!m-0" data-zoomable /></div></figure>
</p>
<p>For the detailed demonstration, watch the video below:</p>

<div style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden;">
  <iframe src="https://www.youtube.com/embed/tAJHXOkHidw" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border:0;" allowfullscreen title="YouTube Video"></iframe>
</div>

<p>That&rsquo;s it! If you want to try <code>rclip</code> yourself, follow the installation instructions described <a href="https://github.com/yurijmikhalevich/rclip#readme" target="_blank" rel="noopener">here</a>.</p>
 ]]>
        </content:encoded>

    </item>
    
    <item>
      <title><![CDATA[ Harry Potter and the Methods of Rationality by Eliezer Yudkowsky ]]></title>
      <description><![CDATA[ Harry Potter and the Methods of Rationality is, by far, the best fanfiction I have ever read. And it is also one of the best science fiction books I have ever read. ]]></description>
      <link>https://mikhalevi.ch/harry-potter-and-the-methods-of-rationality/</link>
      <guid>https://mikhalevi.ch/harry-potter-and-the-methods-of-rationality/</guid>

      
          <category><![CDATA[ Books ]]></category>
        
      <dc:creator><![CDATA[ Yurij Mikhalevich ]]></dc:creator>
      <pubDate>Wed, 14 Jul 2021 13:59:47 +0000</pubDate>

      <media:content url="https://mikhalevi.ch/harry-potter-and-the-methods-of-rationality/featured_huf5c539d22043ef6e247e67ae49482c0f_177051_c12fa36679067aea785edeebad382fd3.webp" medium="image"/>
        <content:encoded>
          <![CDATA[ <img src="https://mikhalevi.ch/harry-potter-and-the-methods-of-rationality/featured_huf5c539d22043ef6e247e67ae49482c0f_177051_c12fa36679067aea785edeebad382fd3.webp" alt="Harry Potter and the Methods of Rationality by Eliezer Yudkowsky"><p>Harry Potter and the Methods of Rationality is, by far, the best fanfiction I have ever read. And it is also one of the best science fiction books I have ever read.</p>
<p>The story is set in a world familiar to those who read the original Harry Potter books or watched the movies. The world is the same but with a few changes. Lily Potter, Harry&rsquo;s mother, had a good relationship with her sister, Petunia, who married a successful Oxford professor. Petunia and her husband didn&rsquo;t have kids, and after they had to take in Harry, they raised him in a loving and caring environment. Harry, mainly thanks to his father, grew up to be a very smart and educated kid. He is a firm believer in the scientific method, and at the same time, still, a kid, who has a fresh pair of wide eyes and looks at the world with childish curiosity, all of which makes him a perfect scientist. When he receives the letter from Hogwarts, he approaches this situation scientifically. Saying anything else can spoil the fun of reading the book.</p>
<p>The fanfic is available to read and download <a href="https://www.hpmor.com/" target="_blank" rel="noopener">here</a>. Check out the chapter titles. If they make you giggle, then you&rsquo;ll enjoy the book!</p>
<p>If you are not convinced that you should read it yet, let me share a few quotes from the book with you:</p>
<blockquote>
<p>Where do you come from, strange little prediction? Harry directed the thought at his brain. Why do I believe what I believe?</p>
</blockquote>
<blockquote>
<p>â€œBut make no mistake, Draco, true science really isnâ€™t like magic, you canâ€™t just do it and walk away unchanged like learning how to say the words of a new spell. The power comes with a cost, a cost so high that most people refuse to pay it.â€ Draco nodded at this as though, finally, heâ€™d heard something he could understand. â€œAnd that cost?â€ â€œLearning to admit youâ€™re wrong.â€ â€œUm,â€ Draco said after the dramatic pause had stretched on for a while. â€œYou going to explain that?â€ â€œTrying to figure out how something works on that deep level, the first ninety-nine explanations you come up with are wrong. The hundredth is right. So you have to learn how to admit youâ€™re wrong, over and over and over again. It doesnâ€™t sound like much, but itâ€™s so hard that most people canâ€™t do science. Always questioning yourself, always taking another look at things youâ€™ve always taken for granted,â€ like having a Snitch in Quidditch, â€œand every time you change your mind, you change yourself.â€</p>
</blockquote>
<blockquote>
<p>â€œThe truth is sacred,â€ Harry said tonelessly. â€œOne of my most treasured possessions is a button which reads â€˜Speak the truth, even if your voice tremblesâ€™.â€</p>
</blockquote>
 ]]>
        </content:encoded>

    </item>
    
    <item>
      <title><![CDATA[ Books by Basecamp ]]></title>
      <description><![CDATA[ I&rsquo;ve recently finished reading the last book of five written by those behind the Basecamp company. I read some of them a while ago, so my memory about their content could be better. ]]></description>
      <link>https://mikhalevi.ch/books-by-basecamp/</link>
      <guid>https://mikhalevi.ch/books-by-basecamp/</guid>

      
          <category><![CDATA[ Books ]]></category>
        
      <dc:creator><![CDATA[ Yurij Mikhalevich ]]></dc:creator>
      <pubDate>Fri, 25 Jun 2021 07:48:23 +0000</pubDate>

      <media:content url="https://mikhalevi.ch/books-by-basecamp/featured_hueef4c5a731e074df72f1767f06f0db34_201640_6e431e797fde42fe56e1ffd1a2ba573e.webp" medium="image"/>
        <content:encoded>
          <![CDATA[ <img src="https://mikhalevi.ch/books-by-basecamp/featured_hueef4c5a731e074df72f1767f06f0db34_201640_6e431e797fde42fe56e1ffd1a2ba573e.webp" alt="Books by Basecamp"><p>I&rsquo;ve recently finished reading the last book of five written by those behind <a href="https://basecamp.com/books" target="_blank" rel="noopener">the Basecamp company</a>. I read some of them a while ago, so my memory about their content could be better. Still, I&rsquo;ll compensate for that by describing my impressions. I&rsquo;m going to list the books in the order in which I read them, starting from the one I read first. These books can be classified as business books, but, to me, they are also excellent self and time management books, with a focus on productivity and work-life balance. All of the books discuss different processes that allow people at Basecamp to work efficiently and happily. I should explicitly mention that the books are well-structured and written in concise and straightforward language.</p>
<h2 id="rework-by-jason-fried-david-heinemeier-hansson-published-in-2010-read-in-2013">Rework by Jason Fried, David Heinemeier Hansson (published in 2010, read in 2013)</h2>
<blockquote>
<p>Workaholics aren&rsquo;t heroes. They don&rsquo;t save the day, they just use it up. The real hero is already home because she figured out a faster way to get things done.</p>
</blockquote>
<p>Rework is the first book by Basecamp that I read in 2013, back when my friends and I worked on our startup, <a href="https://vimeo.com/147733534" target="_blank" rel="noopener">Cat Taxi</a>. I don&rsquo;t remember many of the exact things that I read in this book. But I do remember the lasting impression that it left on me. In the book, Jason and David talk about principles they apply at their company, focusing on the most common misconceptions about business and work processes. I remember that the chapter on workaholics impressed me the most. Before reading this book, I felt proud of putting in lots of hours, which, back then and now, inevitably leads to inefficient work. The essence of that Rework chapter is well covered by the linked <a href="https://m.signalvnoise.com/being-tired-isnt-a-badge-of-honor/" target="_blank" rel="noopener">post written by Jason Fried</a>.</p>
<h2 id="getting-real-the-smarter-faster-easier-way-to-build-a-web-application-by-basecamp-published-in-2006-read-in-september-2019">Getting Real: The Smarter, Faster, Easier Way to Build a Web Application by Basecamp (published in 2006, read in September 2019)</h2>
<blockquote>
<p>Make decisions just in time, when you have access to the real information you need. In the meanwhile, youâ€™ll be able to lavish attention on the things that require immediate care.</p>
</blockquote>
<p>Getting Real is by far the best book on time management that I&rsquo;ve read. And, although it talks about software development, the principles it describes can be easily applied to almost any work process. While reading it, I constantly had deja vu; the book reminded me of Rework and sometimes felt like &ldquo;Rework v0.1.&rdquo; Don&rsquo;t get me wrong; these &ldquo;Aha, I&rsquo;ve read this!&rdquo; or &ldquo;Aha, I&rsquo;ve thought of this!&rdquo; were welcome reactions. Even if you share and follow the principles described in the book, it offers an excellent and concise recap. It&rsquo;s pretty short, much shorter than Rework; I managed to read it in a few days, only reading it when I cooked myself lunch. To sum up, Getting Real is a great book on time management and software project management that you can read in a few hours, and it&rsquo;s <a href="https://basecamp.com/books/getting-real" target="_blank" rel="noopener">available for free</a>. I think it&rsquo;s the best book to start reading &ldquo;Books by Basecamp&rdquo; and understand whether you&rsquo;ll like the others.</p>
<h2 id="shape-up-stop-running-in-circles-and-ship-work-that-matters-by-ryan-singer-published-in-2019-read-in-may-2021">Shape Up: Stop Running in Circles and Ship Work that Matters by Ryan Singer (published in 2019, read in May 2021)</h2>
<blockquote>
<p>An appetite is completely different from an estimate. Estimates start with a design and end with a number. Appetites start with a number and end with a design. We use the appetite as a creative constraint on the design process.</p>
</blockquote>
<p>Shape Up is the last one of the &ldquo;Books by Basecamp&rdquo; and also <a href="https://basecamp.com/shapeup" target="_blank" rel="noopener">freely available</a>. Shape Up is the name of the software development methodology developed at Basecamp. Shape Up is the result of 20 years of work and refinements of the internal software development practices. It&rsquo;s the quintessence of the ideas published in all of the other Basecamp books. When building on these ideas, Shape Up offers concrete methodologies closely tied to software development. The text is full of extremely practical business cases and examples from Basecamp&rsquo;s experience, with a lot of them featuring their own tool, Basecamp. This is the book you should read if you want to â€œShape Upâ€ your company. In my opinion, this is another great book to familiarize yourself with &ldquo;Books by Basecamp.&rdquo;</p>
<h2 id="it-doesnt-have-to-be-crazy-at-work-by-jason-fried-david-heinemeier-hansson-published-in-2018-read-in-may-2021">It Doesn&rsquo;t Have to Be Crazy at Work by Jason Fried, David Heinemeier Hansson (published in 2018, read in May 2021)</h2>
<blockquote>
<p>We donâ€™t want reactions. We donâ€™t want first impressions. We donâ€™t want knee-jerks. We want considered feedback. Read it over. Read it twice, three times even. Sleep on it. Take your time to gather and present your thoughts â€” just like the person who pitched the original idea took their time to gather and present theirs.</p>
</blockquote>
<p>This is another great book about time and project management. I read this one after Shape Up, and it felt like a broader version of Shape Up. Shape Up goes deeper into the particularities of software development. It Doesn&rsquo;t Have to Be Crazy at Work explores the motivation behind these principles and ideas in more detail. It goes broader and covers a wider spectrum of topics compared to Shape Up, which focuses on software development. Thanks to that, It Doesnâ€™t Have to Be Crazy at Work is suitable for a wide range of companies. I&rsquo;ll first recommend this book to people who want to â€œShape Upâ€ a non-software development company. The book is still great for software developers â€” please, go ahead and read it; it&rsquo;s incredible! But, it would be much more interesting to non-software developers compared to Shape Up. I also loved the bolder language in which this book is written.</p>
<p>The excerpt quoted above refers to favoring async communication before sync (e.g., email vs. IM). Here is <a href="https://basecamp.com/guides/group-chat-problems" target="_blank" rel="noopener">an amazing Basecamp article stating clear arguments in favor of async communication</a>.</p>
<h2 id="remote-office-not-required-by-jason-fried-david-heinemeier-hansson-published-in-2013-read-in-may-2021">Remote: Office Not Required by Jason Fried, David Heinemeier Hansson (published in 2013, read in May 2021)</h2>
<blockquote>
<p>The ability to be alone with your thoughts is, in fact, one of the key advantages of working remotely.</p>
</blockquote>
<p>I wasn&rsquo;t rushing to read this book mainly because when I first heard of it, I was already enjoying the benefits of remote work and didn&rsquo;t expect to find many new insights. I read it last and enjoyed it a lot. The reading process, for me, was accompanied by pleasant &ldquo;Aha, I had already thought of that&rdquo; and a few exciting &ldquo;Cool, I didn&rsquo;t look at this from that perspective!&rdquo; moments. Now I know which book to recommend to people interested in remote work and those who are thinking about inviting their employees back to the office once the COVID-19 situation dies down.</p>
<h2 id="conclusion">Conclusion</h2>
<p>All of these books are written in the same spirit, and I highly recommend anyone who works in software development to read all of them; everyone else â€” to read at least some of them. At times the books can be repetitive. Although this can be off-putting to some readers, I enjoyed them since, even if the books discuss the same topic, each of them often offers a unique perspective. I hope that you&rsquo;ll enjoy them as much as I did!</p>
 ]]>
        </content:encoded>

    </item>
    
    <item>
      <title><![CDATA[ Efficient Routing on a Scale: Winning Solution of the Machine Learning Prague 2021 Hackathon ]]></title>
      <description><![CDATA[ This post is a walkthrough of the winning solution for the ML Prague 2021 Hackathon problem that my teammate MichaÅ‚ and I came up with.
We were given anonymized data containing approximately 524k Czech policyholders, 44k clinic departments of 273 different types, and 332 ambulance stations. ]]></description>
      <link>https://mikhalevi.ch/efficient-routing-on-a-scale-winning-solution-of-the-machine-learning-prague-2021-hackathon/</link>
      <guid>https://mikhalevi.ch/efficient-routing-on-a-scale-winning-solution-of-the-machine-learning-prague-2021-hackathon/</guid>

      
          <category><![CDATA[ Software Engineering ]]></category>
        
      <dc:creator><![CDATA[ Yurij Mikhalevich ]]></dc:creator>
      <pubDate>Mon, 10 May 2021 16:48:36 +0000</pubDate>

      <media:content url="https://mikhalevi.ch/efficient-routing-on-a-scale-winning-solution-of-the-machine-learning-prague-2021-hackathon/featured_hu924436896a264110b6a4b63911152fcb_832291_630cb5bde213843f506de0494563b085.webp" medium="image"/>
        <content:encoded>
          <![CDATA[ <img src="https://mikhalevi.ch/efficient-routing-on-a-scale-winning-solution-of-the-machine-learning-prague-2021-hackathon/featured_hu924436896a264110b6a4b63911152fcb_832291_630cb5bde213843f506de0494563b085.webp" alt="Efficient Routing on a Scale: Winning Solution of the Machine Learning Prague 2021 Hackathon"><p>This post is a walkthrough of the winning solution for the <a href="https://www.mlprague.com/" target="_blank" rel="noopener">ML Prague</a> 2021 Hackathon problem that my teammate MichaÅ‚ and I came up with.</p>
<p>We were given anonymized data containing approximately 524k Czech policyholders, 44k clinic departments of 273 different types, and 332 ambulance stations. We were tasked with assigning each of the policyholders to the closest of each of the 273 clinics, in addition to the nearest ambulance station. The closest clinics and ambulance stations were supposed to have been picked by the driving distance. To help us with the routing, we were given $200USD in MS Azure credit, which was enough to make 40k routing requests (or 400k if we were willing to go under the 50 queries per second limit). This amount is nowhere near the one required for a brute-force solution, not to mention that it would take a while. We had five days to come up with the solution. On top of that, we were tasked to present our results using <a href="https://www.sas.com/en%5Fus/software/visual-analytics.html" target="_blank" rel="noopener">SAS Visual Analytics on SAS Vija</a>.</p>
<p>If you prefer video to text, here is our presentation for the conference featuring the dashboard:</p>

<div style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden;">
  <iframe src="https://www.youtube.com/embed/hZILy2awPqs" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border:0;" allowfullscreen title="YouTube Video"></iframe>
</div>

<p>The video is denser and less detailed compared to this article.</p>
<p>Before we dive into the code, let&rsquo;s go over the solution&rsquo;s summary.</p>
<p>Weâ€™ve noticed that 5,827 of 43,908 clinics lacked data essential for the task: <code>type</code> and <code>department_id</code>. Online research failed to turn up a way to fill in the data, so we dropped the clinics that didnâ€™t have these two fields filled in.</p>
<p>Since ambulance stations and clinics had the same data structure, we introduced a new, special type, <code>'AST'</code>, to identify ambulance stations and concatenated two tables into an &ldquo;organizations&rdquo; table.</p>
<p>Then, weâ€™ve created a <code>parent_orgs</code> table that grouped organizations by their geolocation, preserving pairings between <code>type</code> and <code>department_id</code>, and thus, giving us a list of 10,797 unique geopoints we had to match users with.</p>
<p>The straightforward approach was to iterate over all users to find the closest organizations by computing driving distances between a user and the organizations, which were sorted by straight line distances, stopping when the straight line distance to the next candidate is larger than the driving distance to the best candidate.</p>
<p>But this approach proved inefficient even taking the sorting optimization into account; in a second-best case scenario, we had to compute <code>524102*274</code> routes. The actual best-case scenario number would be lower because a lot of <code>department_id</code>s share the same coordinate.</p>
<p>Instead, we decided to cluster users, compute driving distances to the centroids of the clusters, and approximate actual driving distances and times for each user based on the relation of the <code>direct_distance(user, organization) / direct_distance(cluster_centroid, organization)</code>. The algorithm isnâ€™t perfect but gives us a very close approximation and can be computed in a reasonable time.</p>
<p>We clustered users within areas with a max radius of 500m using the combination of <code>village</code>+<code>village_part</code> to speed up clustering and to limit clusters to a single <code>village_part</code>. This provided us with 47,199 clusters, resulting in much more requests than we were comfortable issuing to MS Azure, considering the provided credit amount. Still, we didnâ€™t want to sacrifice precision, so we set up a local OSRM server and used it to compute driving distances.</p>
<p>For direct distance computation, we used the haversine distance instead of the Vincenty, despite the former being less precise for geodesic computations because we could compute the haversine distance much faster. The error margin it introduces is not significant on the scale that we worked with, and both these distances provide optimistic approximations of the driving distance.</p>
<p>We also noticed that there are many <code>deparment_id</code>s of the same type, sharing the exact location. In these cases, we randomly distributed the corresponding users among them to spread the load between departments.</p>
<p>Alternatively, we couldâ€™ve used the fact that some people live on the same street to approximate driving distances, but we believe that small clusters approximate actual distances better.</p>
<p>Possible future improvements:</p>
<ul>
<li>Fill in missing <code>specialty_id</code> and <code>department_id</code>.</li>
<li>Reduce the cluster radius further, allow for more compute time, and re-compute distances with a smaller error margin.</li>
<li>Consider the distance between an ambulance station and a clinic when assigning an ambulance station to a <code>clinic</code>â‡”<code>user/cluster</code> pair and choose an ambulance station closer to the clinic if there are multiple stations available within a similarly close distance to the <code>user/cluster</code>, so that the ambulance car can return to the station ASAP.</li>
</ul>
<p>Now, let&rsquo;s dive into the code. The code is in Python and is meant to be executed in a Jupyter Notebook.</p>
<p>According to the task, the output CSV should contain a row for each of the <code>policyholder</code>â‡”<code>clinic department</code> pair in the following format:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="n">OUTPUT_COLUMNS</span> <span class="o">=</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">    <span class="s1">&#39;policyholder_num&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="s1">&#39;contractual_specialty_id&#39;</span><span class="p">,</span>  <span class="c1"># clinic department type</span>
</span></span><span class="line"><span class="cl">    <span class="s1">&#39;pzs_department_id&#39;</span><span class="p">,</span>  <span class="c1"># clinic department id</span>
</span></span><span class="line"><span class="cl">    <span class="s1">&#39;km_to_pzs&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="s1">&#39;min_to_pzs&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="s1">&#39;zzs_department_id&#39;</span><span class="p">,</span>  <span class="c1"># ambulance station department id</span>
</span></span><span class="line"><span class="cl">    <span class="s1">&#39;km_to_zzs&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="s1">&#39;min_to_zzs&#39;</span>
</span></span><span class="line"><span class="cl"><span class="p">]</span>
</span></span></code></pre></div><h2 id="data-exploration">Data Exploration</h2>
<p>Data exploration is the first thing you should always do when faced with an ML or a data analysis challenge. If you overlook and neglect the importance of this step and do not set aside enough time for it, you may miss important insights, and, consequently, you may fail to implement an optimal solution.</p>
<p>We will use <a href="https://pandas.pydata.org/docs/" target="_blank" rel="noopener">pandas</a> to load and analyze the data.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
</span></span></code></pre></div><h3 id="users-policyholders">Users (Policyholders)</h3>
<p>We start by loading and looking at the policyholders. Let&rsquo;s call them &ldquo;users&rdquo; moving forward.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="n">users</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;./table_POJ.csv&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="n">users</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</span></span></code></pre></div><table>
<thead>
<tr>
<th></th>
<th>policyholder_num</th>
<th>village</th>
<th>village_part</th>
<th>street</th>
<th>land_num_type</th>
<th>land_reg_num</th>
<th>house_num</th>
<th>WGS84_N</th>
<th>WGS84_E</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>XXXXXXXX</td>
<td>VysokÃ½ Ãšjezd</td>
<td>VysokÃ½ Ãšjezd</td>
<td>NaN</td>
<td>Ä.p.</td>
<td>55</td>
<td>NaN</td>
<td>49.813014</td>
<td>14.478450</td>
</tr>
<tr>
<td>1</td>
<td>XXXXXXXX</td>
<td>VysokÃ½ Ãšjezd</td>
<td>VysokÃ½ Ãšjezd</td>
<td>NaN</td>
<td>Ä.p.</td>
<td>48</td>
<td>NaN</td>
<td>49.813251</td>
<td>14.479900</td>
</tr>
<tr>
<td>2</td>
<td>XXXXXXXX</td>
<td>VysokÃ½ Ãšjezd</td>
<td>VysokÃ½ Ãšjezd</td>
<td>NaN</td>
<td>Ä.p.</td>
<td>42</td>
<td>NaN</td>
<td>49.814633</td>
<td>14.479510</td>
</tr>
<tr>
<td>3</td>
<td>XXXXXXXX</td>
<td>VysokÃ½ Ãšjezd</td>
<td>VysokÃ½ Ãšjezd</td>
<td>NaN</td>
<td>Ä.p.</td>
<td>49</td>
<td>NaN</td>
<td>49.814687</td>
<td>14.477156</td>
</tr>
<tr>
<td>4</td>
<td>XXXXXXXX</td>
<td>VysokÃ½ Ãšjezd</td>
<td>VysokÃ½ Ãšjezd</td>
<td>NaN</td>
<td>Ä.p.</td>
<td>53</td>
<td>NaN</td>
<td>49.814780</td>
<td>14.469591</td>
</tr>
</tbody>
</table>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="n">users</span><span class="o">.</span><span class="n">info</span><span class="p">()</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">&lt;class &#39;pandas.core.frame.DataFrame&#39;&gt;
</span></span><span class="line"><span class="cl">RangeIndex: 524102 entries, 0 to 524101
</span></span><span class="line"><span class="cl">Data columns (total 9 columns):
</span></span><span class="line"><span class="cl"> #   Column            Non-Null Count   Dtype  
</span></span><span class="line"><span class="cl">---  ------            --------------   -----  
</span></span><span class="line"><span class="cl"> 0   policyholder_num  524102 non-null  int64  
</span></span><span class="line"><span class="cl"> 1   village           524102 non-null  object 
</span></span><span class="line"><span class="cl"> 2   village_part      524102 non-null  object 
</span></span><span class="line"><span class="cl"> 3   street            289036 non-null  object 
</span></span><span class="line"><span class="cl"> 4   land_num_type     524102 non-null  object 
</span></span><span class="line"><span class="cl"> 5   land_reg_num      524102 non-null  int64  
</span></span><span class="line"><span class="cl"> 6   house_num         118529 non-null  float64
</span></span><span class="line"><span class="cl"> 7   WGS84_N           524102 non-null  float64
</span></span><span class="line"><span class="cl"> 8   WGS84_E           524102 non-null  float64
</span></span><span class="line"><span class="cl">dtypes: float64(3), int64(2), object(4)
</span></span><span class="line"><span class="cl">memory usage: 36.0+ MB
</span></span></code></pre></div><p>There are lots of null values for streets and house numbers. Fortunately, <a href="https://docs.microsoft.com/en-us/azure/azure-maps/tutorial-ev-routing#calculate-the-route-to-the-closest-charging-station" target="_blank" rel="noopener">Azure API can compute routes between lat,lon pairs</a>.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="n">users</span><span class="o">.</span><span class="n">nunique</span><span class="p">()</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">policyholder_num    524102
</span></span><span class="line"><span class="cl">village               5342
</span></span><span class="line"><span class="cl">village_part         10706
</span></span><span class="line"><span class="cl">street               23471
</span></span><span class="line"><span class="cl">land_num_type            2
</span></span><span class="line"><span class="cl">land_reg_num          6265
</span></span><span class="line"><span class="cl">house_num              469
</span></span><span class="line"><span class="cl">WGS84_N             523864
</span></span><span class="line"><span class="cl">WGS84_E             523907
</span></span><span class="line"><span class="cl">dtype: int64
</span></span></code></pre></div><p>During this stage of the project, it&rsquo;s essential to understand your data very well.</p>
<p>We can see that <code>village</code>s and <code>village_part</code>s are filled for every user, and they already represent clusters of users, so we may use them for routing optimizations in the future. Also, we can use street info to better approximate driving distances and times for each user.</p>
<h3 id="clinics">Clinics</h3>
<p>Now let&rsquo;s look at the clinics.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="n">clinics</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;./table_PZS.csv&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="n">clinics</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</span></span></code></pre></div><table>
<thead>
<tr>
<th></th>
<th>intern_subj_id</th>
<th>name</th>
<th>village</th>
<th>street</th>
<th>number</th>
<th>zip</th>
<th>WGS84_E</th>
<th>WGS84_N</th>
<th>company_id</th>
<th>department_id</th>
<th>contractual_specialty_id</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>3</td>
<td>FakultnÃ­ nemocnice Bulovka</td>
<td>Praha</td>
<td>BudÃ­nova</td>
<td>67</td>
<td>18000</td>
<td>14.464154</td>
<td>50.115453</td>
<td>8995004</td>
<td>NaN</td>
<td>NaN</td>
</tr>
<tr>
<td>1</td>
<td>4</td>
<td>LÃ©kÃ¡rna SALVIA spol. s r.o.</td>
<td>BystÅ™ice pod HostÃ½nem</td>
<td>6. kvÄ›tna</td>
<td>556</td>
<td>76861</td>
<td>17.672536</td>
<td>49.398406</td>
<td>77610000</td>
<td>NaN</td>
<td>NaN</td>
</tr>
<tr>
<td>2</td>
<td>17</td>
<td>KrajskÃ¡ zdravotnÃ­ a.s.</td>
<td>Chomutov</td>
<td>Kochova</td>
<td>1185</td>
<td>43001</td>
<td>13.411388</td>
<td>50.455272</td>
<td>57995417</td>
<td>NaN</td>
<td>NaN</td>
</tr>
<tr>
<td>3</td>
<td>21</td>
<td>EndokrinologickÃ½ Ãºstav</td>
<td>Praha</td>
<td>NÃ¡rodnÃ­</td>
<td>139</td>
<td>11000</td>
<td>14.415386</td>
<td>50.081387</td>
<td>1001000</td>
<td>1001880.0</td>
<td>101</td>
</tr>
<tr>
<td>4</td>
<td>21</td>
<td>EndokrinologickÃ½ Ãºstav</td>
<td>Praha</td>
<td>NÃ¡rodnÃ­</td>
<td>139</td>
<td>11000</td>
<td>14.415386</td>
<td>50.081387</td>
<td>1001000</td>
<td>1001881.0</td>
<td>104</td>
</tr>
</tbody>
</table>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="n">clinics</span><span class="o">.</span><span class="n">info</span><span class="p">()</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">&lt;class &#39;pandas.core.frame.DataFrame&#39;&gt;
</span></span><span class="line"><span class="cl">RangeIndex: 43908 entries, 0 to 43907
</span></span><span class="line"><span class="cl">Data columns (total 11 columns):
</span></span><span class="line"><span class="cl"> #   Column                    Non-Null Count  Dtype  
</span></span><span class="line"><span class="cl">---  ------                    --------------  -----  
</span></span><span class="line"><span class="cl"> 0   intern_subj_id            43908 non-null  int64  
</span></span><span class="line"><span class="cl"> 1   name                      43908 non-null  object 
</span></span><span class="line"><span class="cl"> 2   village                   43908 non-null  object 
</span></span><span class="line"><span class="cl"> 3   street                    41829 non-null  object 
</span></span><span class="line"><span class="cl"> 4   number                    43908 non-null  int64  
</span></span><span class="line"><span class="cl"> 5   zip                       43908 non-null  int64  
</span></span><span class="line"><span class="cl"> 6   WGS84_E                   43908 non-null  float64
</span></span><span class="line"><span class="cl"> 7   WGS84_N                   43908 non-null  float64
</span></span><span class="line"><span class="cl"> 8   company_id                43908 non-null  int64  
</span></span><span class="line"><span class="cl"> 9   department_id             38081 non-null  float64
</span></span><span class="line"><span class="cl"> 10  contractual_specialty_id  38081 non-null  object 
</span></span><span class="line"><span class="cl">dtypes: float64(3), int64(4), object(4)
</span></span><span class="line"><span class="cl">memory usage: 3.7+ MB
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="n">clinics</span><span class="o">.</span><span class="n">nunique</span><span class="p">()</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">intern_subj_id              26322
</span></span><span class="line"><span class="cl">name                        22816
</span></span><span class="line"><span class="cl">village                      1722
</span></span><span class="line"><span class="cl">street                       4442
</span></span><span class="line"><span class="cl">number                       2966
</span></span><span class="line"><span class="cl">zip                          1720
</span></span><span class="line"><span class="cl">WGS84_E                     13893
</span></span><span class="line"><span class="cl">WGS84_N                     13893
</span></span><span class="line"><span class="cl">company_id                  26322
</span></span><span class="line"><span class="cl">department_id               38080
</span></span><span class="line"><span class="cl">contractual_specialty_id      273
</span></span><span class="line"><span class="cl">dtype: int64
</span></span></code></pre></div><p>We see that a lot of clinics share their location. This is not surprising given that each row in the table represents an individual clinic department. But, for convenience, we will continue to call them &ldquo;clinics.&rdquo;</p>
<p>Missing streets shouldn&rsquo;t be a big deal since we can calculate distances using <code>lat,lon</code>, and these are filled in for every clinic.</p>
<p>We also notice that a lot of clinics are missing <code>department_id</code> and <code>contractual_specialty_id</code>. If we drop these clinics, we ignore 6k of them, which is a lot.</p>
<p>Notice that <code>department_id</code> and <code>contractual_specialty_id</code> have the same amount of null values. Let&rsquo;s check whether all of the clinics missing one are also missing the other.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="p">(</span><span class="n">clinics</span><span class="p">[</span><span class="s1">&#39;department_id&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">isna</span><span class="p">()</span> <span class="o">==</span> <span class="n">clinics</span><span class="p">[</span><span class="s1">&#39;contractual_specialty_id&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">isna</span><span class="p">())</span><span class="o">.</span><span class="n">all</span><span class="p">()</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">True
</span></span></code></pre></div><p>They are. Let&rsquo;s see what we can do to fill the <code>null</code>s in. The map of the clinics might give us some insight.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">ipyleaflet</span> <span class="k">as</span> <span class="nn">ll</span>
</span></span><span class="line"><span class="cl"><span class="n">CENTER_OF_CZECHIA</span> <span class="o">=</span> <span class="p">(</span><span class="mf">49.856914</span><span class="p">,</span> <span class="mf">15.238706</span><span class="p">)</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="n">specialful_clinic_markers</span> <span class="o">=</span> <span class="p">[]</span>
</span></span><span class="line"><span class="cl"><span class="n">specialless_clinic_markers</span> <span class="o">=</span> <span class="p">[]</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">specialful_clinic_icon</span> <span class="o">=</span> <span class="n">ll</span><span class="o">.</span><span class="n">AwesomeIcon</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;check&#39;</span><span class="p">,</span> <span class="n">marker_color</span><span class="o">=</span><span class="s1">&#39;green&#39;</span><span class="p">,</span> <span class="n">icon_color</span><span class="o">=</span><span class="s1">&#39;white&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="n">specialless_clinic_icon</span> <span class="o">=</span> <span class="n">ll</span><span class="o">.</span><span class="n">AwesomeIcon</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;exclamation&#39;</span><span class="p">,</span> <span class="n">marker_color</span><span class="o">=</span><span class="s1">&#39;red&#39;</span><span class="p">,</span> <span class="n">icon_color</span><span class="o">=</span><span class="s1">&#39;white&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">for</span> <span class="n">_</span><span class="p">,</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">clinics</span><span class="o">.</span><span class="n">iterrows</span><span class="p">():</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="n">pd</span><span class="o">.</span><span class="n">isna</span><span class="p">(</span><span class="n">row</span><span class="p">[</span><span class="s1">&#39;contractual_specialty_id&#39;</span><span class="p">]):</span>
</span></span><span class="line"><span class="cl">        <span class="n">specialless_clinic_markers</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">ll</span><span class="o">.</span><span class="n">Marker</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">            <span class="n">location</span><span class="o">=</span><span class="p">(</span><span class="n">row</span><span class="p">[</span><span class="s1">&#39;WGS84_N&#39;</span><span class="p">],</span> <span class="n">row</span><span class="p">[</span><span class="s1">&#39;WGS84_E&#39;</span><span class="p">]),</span>
</span></span><span class="line"><span class="cl">            <span class="n">icon</span><span class="o">=</span><span class="n">specialless_clinic_icon</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="n">draggable</span><span class="o">=</span><span class="kc">False</span>
</span></span><span class="line"><span class="cl">        <span class="p">))</span>
</span></span><span class="line"><span class="cl">    <span class="k">else</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="n">specialful_clinic_markers</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">ll</span><span class="o">.</span><span class="n">Marker</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">            <span class="n">location</span><span class="o">=</span><span class="p">(</span><span class="n">row</span><span class="p">[</span><span class="s1">&#39;WGS84_N&#39;</span><span class="p">],</span> <span class="n">row</span><span class="p">[</span><span class="s1">&#39;WGS84_E&#39;</span><span class="p">]),</span>
</span></span><span class="line"><span class="cl">            <span class="n">icon</span><span class="o">=</span><span class="n">specialful_clinic_icon</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="n">draggable</span><span class="o">=</span><span class="kc">False</span>
</span></span><span class="line"><span class="cl">        <span class="p">))</span>
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl"><span class="n">specialful_clinic_cluster</span> <span class="o">=</span> <span class="n">ll</span><span class="o">.</span><span class="n">MarkerCluster</span><span class="p">(</span><span class="n">markers</span><span class="o">=</span><span class="n">specialful_clinic_markers</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="n">specialless_clinic_cluster</span> <span class="o">=</span> <span class="n">ll</span><span class="o">.</span><span class="n">MarkerCluster</span><span class="p">(</span><span class="n">markers</span><span class="o">=</span><span class="n">specialless_clinic_markers</span><span class="p">)</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="n">clinics_map</span> <span class="o">=</span> <span class="n">ll</span><span class="o">.</span><span class="n">Map</span><span class="p">(</span><span class="n">center</span><span class="o">=</span><span class="n">CENTER_OF_CZECHIA</span><span class="p">,</span> <span class="n">zoom</span><span class="o">=</span><span class="mi">7</span><span class="p">,</span> <span class="n">min_zoom</span><span class="o">=</span><span class="mi">7</span><span class="p">,</span> <span class="n">max_zoom</span><span class="o">=</span><span class="mi">19</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="n">clinics_map</span><span class="o">.</span><span class="n">add_control</span><span class="p">(</span><span class="n">ll</span><span class="o">.</span><span class="n">FullScreenControl</span><span class="p">())</span>
</span></span><span class="line"><span class="cl"><span class="n">clinics_map</span><span class="o">.</span><span class="n">add_layer</span><span class="p">(</span><span class="n">specialful_clinic_cluster</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="n">clinics_map</span><span class="o">.</span><span class="n">add_layer</span><span class="p">(</span><span class="n">specialless_clinic_cluster</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="n">clinics_map</span>
</span></span></code></pre></div><p>













<figure class="flex flex-col justify-center items-center" id="figure-to-make-it-easy-for-your-computer-we-are-displaying-the-screenshot-of-the-map-here">
  <div class="w-100" ><img alt="To make it easy for your computer, we are displaying the screenshot of the map here" srcset="
          https://mikhalevi.ch/efficient-routing-on-a-scale-winning-solution-of-the-machine-learning-prague-2021-hackathon/images/44fda700-c353-11ee-b012-5f1e1a82f88a_hu0c007fa40aa0c3b517c830c2dc31da76_1926846_3ec527a5d3ea8e22f68c64c8bcd02091.webp 400w,
          https://mikhalevi.ch/efficient-routing-on-a-scale-winning-solution-of-the-machine-learning-prague-2021-hackathon/images/44fda700-c353-11ee-b012-5f1e1a82f88a_hu0c007fa40aa0c3b517c830c2dc31da76_1926846_ad561c68a791e980e41eae34c6fc5e03.webp 760w,
          https://mikhalevi.ch/efficient-routing-on-a-scale-winning-solution-of-the-machine-learning-prague-2021-hackathon/images/44fda700-c353-11ee-b012-5f1e1a82f88a_hu0c007fa40aa0c3b517c830c2dc31da76_1926846_1520x1520_fit_q85_h2_lanczos_3.webp 1200w"
          src="https://mikhalevi.ch/efficient-routing-on-a-scale-winning-solution-of-the-machine-learning-prague-2021-hackathon/images/44fda700-c353-11ee-b012-5f1e1a82f88a_hu0c007fa40aa0c3b517c830c2dc31da76_1926846_3ec527a5d3ea8e22f68c64c8bcd02091.webp"
          width="760"
          height="460"
          loading="lazy"
          class="!m-0"
          style="background: linear-gradient(37.000000deg, #b7baacb3, #b7baac00 75%),linear-gradient(157.000000deg, #c4915db3, #c4915d00 75%),linear-gradient(277.000000deg, #a6693ab3, #a6693a00 75%); background-size: cover; background-repeat: no-repeat;" data-zoomable /></div><figcaption class="!mt-3">
      To make it easy for your computer, we are displaying the screenshot of the map here
    </figcaption></figure>
</p>
<p>Neither the map nor the online research we did helped us to fill in the missing data. Given that <code>department_id</code>s and <code>contractual_specialty_id</code>s are essential for the task, we will have to drop the clinics that are missing them. Room for improvement lies within properly filling that data.</p>
<h3 id="ambulance-stations">Ambulance Stations</h3>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="n">ambulance_stations</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;./table_ZZS.csv&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="n">ambulance_stations</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</span></span></code></pre></div><table>
<thead>
<tr>
<th></th>
<th>intern_subj_id</th>
<th>name</th>
<th>village</th>
<th>street</th>
<th>number</th>
<th>zip</th>
<th>WGS84_E</th>
<th>WGS84_N</th>
<th>company_id</th>
<th>department_id</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>92</td>
<td>ZdravotnickÃ¡ zÃ¡chrannÃ¡ sluÅ¾ba hl .m. Prahy</td>
<td>Praha</td>
<td>28. pluku</td>
<td>1393</td>
<td>10100</td>
<td>14.464515</td>
<td>50.070763</td>
<td>5001000</td>
<td>5001109</td>
</tr>
<tr>
<td>1</td>
<td>92</td>
<td>ZdravotnickÃ¡ zÃ¡chrannÃ¡ sluÅ¾ba hl .m. Prahy</td>
<td>Praha</td>
<td>ChelÄickÃ©ho</td>
<td>842</td>
<td>13000</td>
<td>14.458671</td>
<td>50.083906</td>
<td>5001000</td>
<td>5001113</td>
</tr>
<tr>
<td>2</td>
<td>92</td>
<td>ZdravotnickÃ¡ zÃ¡chrannÃ¡ sluÅ¾ba hl .m. Prahy</td>
<td>Praha</td>
<td>DukelskÃ½ch hrdinÅ¯</td>
<td>342</td>
<td>17000</td>
<td>14.431312</td>
<td>50.096500</td>
<td>5001000</td>
<td>5001102</td>
</tr>
<tr>
<td>3</td>
<td>92</td>
<td>ZdravotnickÃ¡ zÃ¡chrannÃ¡ sluÅ¾ba hl .m. Prahy</td>
<td>Praha</td>
<td>GenerÃ¡la JanouÅ¡ka</td>
<td>902</td>
<td>19800</td>
<td>14.572139</td>
<td>50.106939</td>
<td>5001000</td>
<td>5001110</td>
</tr>
<tr>
<td>4</td>
<td>92</td>
<td>ZdravotnickÃ¡ zÃ¡chrannÃ¡ sluÅ¾ba hl .m. Prahy</td>
<td>Praha</td>
<td>HeyrovskÃ©ho nÃ¡mÄ›stÃ­</td>
<td>1987</td>
<td>16200</td>
<td>14.340193</td>
<td>50.086547</td>
<td>5001000</td>
<td>5001104</td>
</tr>
</tbody>
</table>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="n">ambulance_stations</span><span class="o">.</span><span class="n">info</span><span class="p">()</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">&lt;class &#39;pandas.core.frame.DataFrame&#39;&gt;
</span></span><span class="line"><span class="cl">RangeIndex: 332 entries, 0 to 331
</span></span><span class="line"><span class="cl">Data columns (total 10 columns):
</span></span><span class="line"><span class="cl"> #   Column          Non-Null Count  Dtype  
</span></span><span class="line"><span class="cl">---  ------          --------------  -----  
</span></span><span class="line"><span class="cl"> 0   intern_subj_id  332 non-null    int64  
</span></span><span class="line"><span class="cl"> 1   name            332 non-null    object 
</span></span><span class="line"><span class="cl"> 2   village         332 non-null    object 
</span></span><span class="line"><span class="cl"> 3   street          307 non-null    object 
</span></span><span class="line"><span class="cl"> 4   number          332 non-null    int64  
</span></span><span class="line"><span class="cl"> 5   zip             332 non-null    int64  
</span></span><span class="line"><span class="cl"> 6   WGS84_E         332 non-null    float64
</span></span><span class="line"><span class="cl"> 7   WGS84_N         332 non-null    float64
</span></span><span class="line"><span class="cl"> 8   company_id      332 non-null    int64  
</span></span><span class="line"><span class="cl"> 9   department_id   332 non-null    int64  
</span></span><span class="line"><span class="cl">dtypes: float64(2), int64(5), object(3)
</span></span><span class="line"><span class="cl">memory usage: 26.1+ KB
</span></span></code></pre></div><p>Some ambulance stations are missing streets, but that&rsquo;s OK since we can calculate driving distances based on <code>lat,lon</code>.</p>
<h2 id="pre-processing">Pre-processing</h2>
<p>Since we were unable to fill in the missing clinics <code>contractual_specialty_id</code>s and <code>department_id</code>s, let&rsquo;s drop all of the clinics that are missing them.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="n">clinics</span><span class="o">.</span><span class="n">dropna</span><span class="p">(</span><span class="n">subset</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;contractual_specialty_id&#39;</span><span class="p">],</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="n">clinics</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">drop</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="nb">len</span><span class="p">(</span><span class="n">clinics</span><span class="o">.</span><span class="n">index</span><span class="p">),</span> <span class="n">clinics</span><span class="p">[</span><span class="s1">&#39;contractual_specialty_id&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">nunique</span><span class="p">()</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">(38081, 273)
</span></span></code></pre></div><p>Ambulance stations and clinic departments have the same structure and, for the purpose of the task, it would make sense to think of ambulance stations as clinics of a special type. To do this, we introduce a special type <code>'AST'</code>, assign it to the ambulance stations, and concatenate them with the clinics.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="n">ambulance_stations</span><span class="p">[</span><span class="s1">&#39;contractual_specialty_id&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;AST&#39;</span>
</span></span><span class="line"><span class="cl"><span class="n">orgs</span> <span class="o">=</span> <span class="n">clinics</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">ambulance_stations</span><span class="p">,</span> <span class="n">ignore_index</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="nb">len</span><span class="p">(</span><span class="n">orgs</span><span class="o">.</span><span class="n">index</span><span class="p">),</span> <span class="n">orgs</span><span class="p">[</span><span class="s1">&#39;contractual_specialty_id&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">nunique</span><span class="p">()</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">(38413, 274)
</span></span></code></pre></div><p>We copy the coordinates to a new <code>location</code> column in <code>(lat, lon)</code> format to make working with them more convenient.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="n">users</span><span class="p">[</span><span class="s1">&#39;location&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="n">users</span><span class="p">[</span><span class="s1">&#39;WGS84_N&#39;</span><span class="p">],</span> <span class="n">users</span><span class="p">[</span><span class="s1">&#39;WGS84_E&#39;</span><span class="p">]))</span>
</span></span><span class="line"><span class="cl"><span class="n">orgs</span><span class="p">[</span><span class="s1">&#39;location&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="n">orgs</span><span class="p">[</span><span class="s1">&#39;WGS84_N&#39;</span><span class="p">],</span> <span class="n">orgs</span><span class="p">[</span><span class="s1">&#39;WGS84_E&#39;</span><span class="p">]))</span>
</span></span></code></pre></div><p>As we saw during the clinic analysis, most of the clinic departments share locations and can be uniquely identified by a combination of <code>contractual_specialty_id</code> and <code>department_id</code>. Let&rsquo;s create a table of parent organizations with a row for each set of clinics that share their location.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="n">orgs</span><span class="p">[</span><span class="s1">&#39;specialty_department&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">    <span class="n">orgs</span><span class="p">[</span><span class="s1">&#39;contractual_specialty_id&#39;</span><span class="p">],</span>
</span></span><span class="line"><span class="cl">    <span class="n">orgs</span><span class="p">[</span><span class="s1">&#39;department_id&#39;</span><span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="p">))</span>
</span></span><span class="line"><span class="cl"><span class="n">parent_orgs</span> <span class="o">=</span> <span class="n">orgs</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;location&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">agg</span><span class="p">({</span>
</span></span><span class="line"><span class="cl">    <span class="s1">&#39;contractual_specialty_id&#39;</span><span class="p">:</span> <span class="nb">set</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="s1">&#39;specialty_department&#39;</span><span class="p">:</span> <span class="nb">list</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="s1">&#39;location&#39;</span><span class="p">:</span> <span class="s1">&#39;first&#39;</span>
</span></span><span class="line"><span class="cl"><span class="p">})</span>
</span></span><span class="line"><span class="cl"><span class="nb">print</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">parent_orgs</span><span class="o">.</span><span class="n">index</span><span class="p">))</span>
</span></span><span class="line"><span class="cl"><span class="n">parent_orgs</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">10797
</span></span></code></pre></div><table>
<thead>
<tr>
<th>location</th>
<th>contractual_specialty_id</th>
<th>specialty_department</th>
<th>location</th>
</tr>
</thead>
<tbody>
<tr>
<td>(48.614218906, 14.311215042)</td>
<td>{014}</td>
<td>[(014, 33866100.0), (014, 33866200.0)]</td>
<td>(48.614218906, 14.311215042)</td>
</tr>
<tr>
<td>(48.617204511, 14.313272811)</td>
<td>{AST, 709, 799}</td>
<td>[(709, 32091122.0), (799, 32091822.0), (AST, 3&hellip;</td>
<td>(48.617204511, 14.313272811)</td>
</tr>
<tr>
<td>(48.617317188, 14.310456114)</td>
<td>{001, 902}</td>
<td>[(001, 33709000.0), (902, 33850100.0)]</td>
<td>(48.617317188, 14.310456114)</td>
</tr>
<tr>
<td>(48.618122407, 14.309835495)</td>
<td>{903}</td>
<td>[(903, 33721000.0)]</td>
<td>(48.618122407, 14.309835495)</td>
</tr>
<tr>
<td>(48.618840446, 14.30797346)</td>
<td>{014}</td>
<td>[(014, 33701000.0)]</td>
<td>(48.618840446, 14.30797346)</td>
</tr>
</tbody>
</table>
<p>This leaves us with 10,797 of the &ldquo;actual&rdquo; clinics that we will be computing routes to. We&rsquo;ve stored a set of <code>contractual_specialty_id</code>s to a <code>conctractual_specialty_id</code> column to speed up the check for matching specialty ids.</p>
<p>From the start, we&rsquo;ve aimed for maximum precision. The most precise way to solve the task would be to compute distances for each user individually, so we&rsquo;ve implemented this straightforward solution first to identify the slowest part of the process and work from there.</p>
<p>It turned out that the slowest part is, not surprisingly, routing and that we will have to optimize it. Clustering users, and maybe, clinics, seemed like a good idea to explore.</p>
<p>The most difficult part of the task is to find a performant solution without sacrificing much of the precision.</p>
<h2 id="maps">Maps</h2>
<p>Let&rsquo;s return to the data exploration and plot <code>parent_orgs</code> and <code>users</code>.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="n">orgs_map</span> <span class="o">=</span> <span class="n">ll</span><span class="o">.</span><span class="n">Map</span><span class="p">(</span><span class="n">center</span><span class="o">=</span><span class="n">CENTER_OF_CZECHIA</span><span class="p">,</span> <span class="n">zoom</span><span class="o">=</span><span class="mi">7</span><span class="p">,</span> <span class="n">min_zoom</span><span class="o">=</span><span class="mi">7</span><span class="p">,</span> <span class="n">max_zoom</span><span class="o">=</span><span class="mi">19</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="n">orgs_map</span><span class="o">.</span><span class="n">add_control</span><span class="p">(</span><span class="n">ll</span><span class="o">.</span><span class="n">FullScreenControl</span><span class="p">())</span>
</span></span><span class="line"><span class="cl"><span class="n">orgs_map</span><span class="o">.</span><span class="n">add_layer</span><span class="p">(</span><span class="n">ll</span><span class="o">.</span><span class="n">MarkerCluster</span><span class="p">(</span><span class="n">markers</span><span class="o">=</span><span class="p">[</span>
</span></span><span class="line"><span class="cl">    <span class="n">ll</span><span class="o">.</span><span class="n">Marker</span><span class="p">(</span><span class="n">location</span><span class="o">=</span><span class="n">org</span><span class="p">[</span><span class="s1">&#39;location&#39;</span><span class="p">])</span> <span class="k">for</span> <span class="n">_</span><span class="p">,</span> <span class="n">org</span> <span class="ow">in</span> <span class="n">parent_orgs</span><span class="o">.</span><span class="n">iterrows</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="p">]))</span>
</span></span><span class="line"><span class="cl"><span class="n">orgs_map</span>
</span></span></code></pre></div><p>













<figure class="flex flex-col justify-center items-center" >
  <div class="w-100" ><img alt="" srcset="
          https://mikhalevi.ch/efficient-routing-on-a-scale-winning-solution-of-the-machine-learning-prague-2021-hackathon/images/44fe4340-c353-11ee-b012-5f1e1a82f88a_hucc78244d53b3f57bce7aa63cdc6a4176_2052679_acd71397ea7abc5216ef9a5094355bc8.webp 400w,
          https://mikhalevi.ch/efficient-routing-on-a-scale-winning-solution-of-the-machine-learning-prague-2021-hackathon/images/44fe4340-c353-11ee-b012-5f1e1a82f88a_hucc78244d53b3f57bce7aa63cdc6a4176_2052679_ac5d349057a5c37f4b220fae7734fc20.webp 760w,
          https://mikhalevi.ch/efficient-routing-on-a-scale-winning-solution-of-the-machine-learning-prague-2021-hackathon/images/44fe4340-c353-11ee-b012-5f1e1a82f88a_hucc78244d53b3f57bce7aa63cdc6a4176_2052679_1520x1520_fit_q85_h2_lanczos_3.webp 1200w"
          src="https://mikhalevi.ch/efficient-routing-on-a-scale-winning-solution-of-the-machine-learning-prague-2021-hackathon/images/44fe4340-c353-11ee-b012-5f1e1a82f88a_hucc78244d53b3f57bce7aa63cdc6a4176_2052679_acd71397ea7abc5216ef9a5094355bc8.webp"
          width="760"
          height="445"
          loading="lazy"
          class="!m-0"
          style="background: linear-gradient(37.000000deg, #b7baacb3, #b7baac00 75%),linear-gradient(217.000000deg, #c1915db3, #c1915d00 75%); background-size: cover; background-repeat: no-repeat;" data-zoomable /></div></figure>
</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="n">users_map</span> <span class="o">=</span> <span class="n">ll</span><span class="o">.</span><span class="n">Map</span><span class="p">(</span><span class="n">center</span><span class="o">=</span><span class="n">CENTER_OF_CZECHIA</span><span class="p">,</span> <span class="n">zoom</span><span class="o">=</span><span class="mi">7</span><span class="p">,</span> <span class="n">min_zoom</span><span class="o">=</span><span class="mi">7</span><span class="p">,</span> <span class="n">max_zoom</span><span class="o">=</span><span class="mi">19</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="n">users_map</span><span class="o">.</span><span class="n">add_control</span><span class="p">(</span><span class="n">ll</span><span class="o">.</span><span class="n">FullScreenControl</span><span class="p">())</span>
</span></span><span class="line"><span class="cl"><span class="n">users_map</span><span class="o">.</span><span class="n">add_layer</span><span class="p">(</span><span class="n">ll</span><span class="o">.</span><span class="n">MarkerCluster</span><span class="p">(</span><span class="n">markers</span><span class="o">=</span><span class="p">[</span>
</span></span><span class="line"><span class="cl">    <span class="n">ll</span><span class="o">.</span><span class="n">Marker</span><span class="p">(</span><span class="n">location</span><span class="o">=</span><span class="n">org</span><span class="p">[</span><span class="s1">&#39;location&#39;</span><span class="p">])</span> <span class="k">for</span> <span class="n">_</span><span class="p">,</span> <span class="n">org</span> <span class="ow">in</span> <span class="n">users</span><span class="p">[</span><span class="n">users</span><span class="p">[</span><span class="s1">&#39;village&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;Praha&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">iterrows</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="p">]))</span>
</span></span><span class="line"><span class="cl"><span class="n">users_map</span>
</span></span></code></pre></div><p>













<figure class="flex flex-col justify-center items-center" >
  <div class="w-100" ><img alt="" srcset="
          https://mikhalevi.ch/efficient-routing-on-a-scale-winning-solution-of-the-machine-learning-prague-2021-hackathon/images/44fe4341-c353-11ee-b012-5f1e1a82f88a_hu12a2a3d2287625dd43b1a40f533ab913_2002175_a88a21dbc4d803089464903437d5fb29.webp 400w,
          https://mikhalevi.ch/efficient-routing-on-a-scale-winning-solution-of-the-machine-learning-prague-2021-hackathon/images/44fe4341-c353-11ee-b012-5f1e1a82f88a_hu12a2a3d2287625dd43b1a40f533ab913_2002175_8645361e30b64ff523367850dde542fd.webp 760w,
          https://mikhalevi.ch/efficient-routing-on-a-scale-winning-solution-of-the-machine-learning-prague-2021-hackathon/images/44fe4341-c353-11ee-b012-5f1e1a82f88a_hu12a2a3d2287625dd43b1a40f533ab913_2002175_1520x1520_fit_q85_h2_lanczos_3.webp 1200w"
          src="https://mikhalevi.ch/efficient-routing-on-a-scale-winning-solution-of-the-machine-learning-prague-2021-hackathon/images/44fe4341-c353-11ee-b012-5f1e1a82f88a_hu12a2a3d2287625dd43b1a40f533ab913_2002175_a88a21dbc4d803089464903437d5fb29.webp"
          width="760"
          height="461"
          loading="lazy"
          class="!m-0"
          style="background: linear-gradient(37.000000deg, #b0b2a8b3, #b0b2a800 75%),linear-gradient(157.000000deg, #b89c61b3, #b89c6100 75%),linear-gradient(277.000000deg, #746f5fb3, #746f5f00 75%); background-size: cover; background-repeat: no-repeat;" data-zoomable /></div></figure>
</p>
<p>It&rsquo;s interesting to take a look at the Voronoi regions of different clinic types. They can provide us a way to query for candidates.</p>
<blockquote>
<p>In mathematics, a Voronoi diagram is a partition of a plane into regions close to each of a given set of objects. In the simplest case, these objects are just finitely many points in the plane (called seeds, sites, or generators). For each seed there is a corresponding region, called Voronoi cells, consisting of all points of the plane closer to that seed than to any other.<br>
â€” <a href="https://en.wikipedia.org/wiki/Voronoi%5Fdiagram" target="_blank" rel="noopener">Voronoi diagram - Wikipedia</a></p>
</blockquote>
<p>To compute the regions, we will use the <a href="https://pypi.org/project/geovoronoi/" target="_blank" rel="noopener">geovoronoi</a> library. Since it uses <a href="https://pypi.org/project/Shapely/" target="_blank" rel="noopener">shapely</a> polygons, we will import the shapely module too. We will also import <a href="https://geopandas.org/" target="_blank" rel="noopener">geopandas</a> to simplify manipulations with the locations in our pandas&rsquo; tables and convert them to shapely format.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">geopandas</span> <span class="k">as</span> <span class="nn">gpd</span>
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">geovoronoi</span>
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">shapely.geometry</span> <span class="k">as</span> <span class="nn">shg</span>
</span></span></code></pre></div><p>Then, let&rsquo;s convert our <code>users</code> and <code>parent_orgs</code> to geo-aware <code>users_geo</code> and <code>orgs_geo</code> tables.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="n">users_geo</span> <span class="o">=</span> <span class="n">gpd</span><span class="o">.</span><span class="n">GeoDataFrame</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">    <span class="n">users</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="n">crs</span><span class="o">=</span><span class="s1">&#39;EPSG:4326&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="n">geometry</span><span class="o">=</span><span class="n">gpd</span><span class="o">.</span><span class="n">points_from_xy</span><span class="p">(</span><span class="n">users</span><span class="p">[</span><span class="s1">&#39;WGS84_E&#39;</span><span class="p">],</span> <span class="n">users</span><span class="p">[</span><span class="s1">&#39;WGS84_N&#39;</span><span class="p">])</span>
</span></span><span class="line"><span class="cl"><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">org_locs</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="o">*</span><span class="n">parent_orgs</span><span class="p">[</span><span class="s1">&#39;location&#39;</span><span class="p">]))</span>
</span></span><span class="line"><span class="cl"><span class="n">orgs_geo</span> <span class="o">=</span> <span class="n">gpd</span><span class="o">.</span><span class="n">GeoDataFrame</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">    <span class="n">parent_orgs</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="n">crs</span><span class="o">=</span><span class="s1">&#39;EPSG:4326&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="n">geometry</span><span class="o">=</span><span class="n">gpd</span><span class="o">.</span><span class="n">points_from_xy</span><span class="p">(</span><span class="n">org_locs</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">org_locs</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
</span></span><span class="line"><span class="cl"><span class="p">)</span>
</span></span></code></pre></div><p>We will also need a helper method to convert shapely polygons to leaflet format:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="k">def</span> <span class="nf">polygon_to_ll</span><span class="p">(</span><span class="n">polygon</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">polygon</span><span class="p">,</span> <span class="n">shg</span><span class="o">.</span><span class="n">Point</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="p">[(</span><span class="n">polygon</span><span class="o">.</span><span class="n">y</span><span class="p">,</span> <span class="n">polygon</span><span class="o">.</span><span class="n">x</span><span class="p">)]</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">polygon</span><span class="p">,</span> <span class="n">shg</span><span class="o">.</span><span class="n">LineString</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="p">[(</span><span class="n">point</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">point</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="k">for</span> <span class="n">point</span> <span class="ow">in</span> <span class="n">polygon</span><span class="o">.</span><span class="n">coords</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="p">[(</span><span class="n">point</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">point</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="k">for</span> <span class="n">point</span> <span class="ow">in</span> <span class="n">polygon</span><span class="o">.</span><span class="n">exterior</span><span class="o">.</span><span class="n">coords</span><span class="p">]</span>
</span></span></code></pre></div><p>And a simple method to plot regions for an org type:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="c1"># a polygon encompassing all of the users</span>
</span></span><span class="line"><span class="cl"><span class="n">all_users</span> <span class="o">=</span> <span class="n">users_geo</span><span class="o">.</span><span class="n">unary_union</span><span class="o">.</span><span class="n">convex_hull</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">def</span> <span class="nf">plot_voronoi_regions_for_org_by_type</span><span class="p">(</span><span class="n">org_type</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">    <span class="n">region_polys</span><span class="p">,</span> <span class="n">region_pts</span> <span class="o">=</span> <span class="n">geovoronoi</span><span class="o">.</span><span class="n">voronoi_regions_from_coords</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">        <span class="n">orgs_geo</span><span class="p">[</span><span class="n">orgs_geo</span><span class="p">[</span><span class="s1">&#39;contractual_specialty_id&#39;</span><span class="p">]</span> <span class="o">&amp;</span> <span class="p">{</span><span class="n">org_type</span><span class="p">}][</span><span class="s1">&#39;geometry&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">tolist</span><span class="p">(),</span>
</span></span><span class="line"><span class="cl">        <span class="n">all_users</span>
</span></span><span class="line"><span class="cl">    <span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">voronoi_map</span> <span class="o">=</span> <span class="n">ll</span><span class="o">.</span><span class="n">Map</span><span class="p">(</span><span class="n">center</span><span class="o">=</span><span class="n">CENTER_OF_CZECHIA</span><span class="p">,</span> <span class="n">zoom</span><span class="o">=</span><span class="mi">7</span><span class="p">,</span> <span class="n">min_zoom</span><span class="o">=</span><span class="mi">7</span><span class="p">,</span> <span class="n">max_zoom</span><span class="o">=</span><span class="mi">19</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="n">voronoi_map</span><span class="o">.</span><span class="n">add_control</span><span class="p">(</span><span class="n">ll</span><span class="o">.</span><span class="n">FullScreenControl</span><span class="p">())</span>
</span></span><span class="line"><span class="cl">    <span class="n">voronoi_map</span><span class="o">.</span><span class="n">add_layer</span><span class="p">(</span><span class="n">ll</span><span class="o">.</span><span class="n">Polygon</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">        <span class="n">locations</span><span class="o">=</span><span class="p">[</span><span class="n">polygon_to_ll</span><span class="p">(</span><span class="n">poly</span><span class="p">)</span> <span class="k">for</span> <span class="n">poly</span> <span class="ow">in</span> <span class="n">region_polys</span><span class="o">.</span><span class="n">values</span><span class="p">()],</span>
</span></span><span class="line"><span class="cl">        <span class="n">color</span><span class="o">=</span><span class="s2">&#34;green&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="n">fill_color</span><span class="o">=</span><span class="s2">&#34;green&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="p">))</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="n">voronoi_map</span>
</span></span></code></pre></div><p>We will plot Voronoi regions for one of the most common types of clinics and one of the rarest.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="n">plot_voronoi_regions_for_org_by_type</span><span class="p">(</span><span class="s1">&#39;014&#39;</span><span class="p">)</span>
</span></span></code></pre></div><p>













<figure class="flex flex-col justify-center items-center" >
  <div class="w-100" ><img alt="" srcset="
          https://mikhalevi.ch/efficient-routing-on-a-scale-winning-solution-of-the-machine-learning-prague-2021-hackathon/images/44fe6a50-c353-11ee-b012-5f1e1a82f88a_huaa6345d8ee512619efcba3fa6f8f850a_1583831_ebba4702129f769f092e8eb2d4569489.webp 400w,
          https://mikhalevi.ch/efficient-routing-on-a-scale-winning-solution-of-the-machine-learning-prague-2021-hackathon/images/44fe6a50-c353-11ee-b012-5f1e1a82f88a_huaa6345d8ee512619efcba3fa6f8f850a_1583831_5beadf34d12b2fe34e41ec85217312a3.webp 760w,
          https://mikhalevi.ch/efficient-routing-on-a-scale-winning-solution-of-the-machine-learning-prague-2021-hackathon/images/44fe6a50-c353-11ee-b012-5f1e1a82f88a_huaa6345d8ee512619efcba3fa6f8f850a_1583831_1520x1520_fit_q85_h2_lanczos_3.webp 1200w"
          src="https://mikhalevi.ch/efficient-routing-on-a-scale-winning-solution-of-the-machine-learning-prague-2021-hackathon/images/44fe6a50-c353-11ee-b012-5f1e1a82f88a_huaa6345d8ee512619efcba3fa6f8f850a_1583831_ebba4702129f769f092e8eb2d4569489.webp"
          width="760"
          height="417"
          loading="lazy"
          class="!m-0"
          style="background: linear-gradient(37.000000deg, #b3b8aab3, #b3b8aa00 75%),linear-gradient(127.000000deg, #307a2eb3, #307a2e00 75%),linear-gradient(217.000000deg, #348a35b3, #348a3500 75%),linear-gradient(307.000000deg, #8a9d77b3, #8a9d7700 75%); background-size: cover; background-repeat: no-repeat;" data-zoomable /></div></figure>
</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="n">plot_voronoi_regions_for_org_by_type</span><span class="p">(</span><span class="s1">&#39;504&#39;</span><span class="p">)</span>
</span></span></code></pre></div><p>













<figure class="flex flex-col justify-center items-center" >
  <div class="w-100" ><img alt="" srcset="
          https://mikhalevi.ch/efficient-routing-on-a-scale-winning-solution-of-the-machine-learning-prague-2021-hackathon/images/44fe6a51-c353-11ee-b012-5f1e1a82f88a_hu515b36107ae45bfa72b6fc91500e1ca4_2117498_9a93e3edc92e431a427543d8c7d4c00b.webp 400w,
          https://mikhalevi.ch/efficient-routing-on-a-scale-winning-solution-of-the-machine-learning-prague-2021-hackathon/images/44fe6a51-c353-11ee-b012-5f1e1a82f88a_hu515b36107ae45bfa72b6fc91500e1ca4_2117498_d6050153c91b3db3aed0f0800d85bfb7.webp 760w,
          https://mikhalevi.ch/efficient-routing-on-a-scale-winning-solution-of-the-machine-learning-prague-2021-hackathon/images/44fe6a51-c353-11ee-b012-5f1e1a82f88a_hu515b36107ae45bfa72b6fc91500e1ca4_2117498_1520x1520_fit_q85_h2_lanczos_3.webp 1200w"
          src="https://mikhalevi.ch/efficient-routing-on-a-scale-winning-solution-of-the-machine-learning-prague-2021-hackathon/images/44fe6a51-c353-11ee-b012-5f1e1a82f88a_hu515b36107ae45bfa72b6fc91500e1ca4_2117498_9a93e3edc92e431a427543d8c7d4c00b.webp"
          width="760"
          height="415"
          loading="lazy"
          class="!m-0"
          style="background: linear-gradient(37.000000deg, #abb6a2b3, #abb6a200 75%),linear-gradient(127.000000deg, #3f8e40b3, #3f8e4000 75%),linear-gradient(217.000000deg, #3a7937b3, #3a793700 75%),linear-gradient(307.000000deg, #899e7ab3, #899e7a00 75%); background-size: cover; background-repeat: no-repeat;" data-zoomable /></div></figure>
</p>
<p>As you can see, some clinics have very sparse coverage; if they represent an essential specialty, there needs to be more of them.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="n">plot_voronoi_regions_for_org_by_type</span><span class="p">(</span><span class="s1">&#39;AST&#39;</span><span class="p">)</span>
</span></span></code></pre></div><p>













<figure class="flex flex-col justify-center items-center" >
  <div class="w-100" ><img alt="" srcset="
          https://mikhalevi.ch/efficient-routing-on-a-scale-winning-solution-of-the-machine-learning-prague-2021-hackathon/images/44fe6a52-c353-11ee-b012-5f1e1a82f88a_hube2dcb8a4da2303f775be868887a3889_1932854_d9b3ba9f964471e056c6108f66218ba6.webp 400w,
          https://mikhalevi.ch/efficient-routing-on-a-scale-winning-solution-of-the-machine-learning-prague-2021-hackathon/images/44fe6a52-c353-11ee-b012-5f1e1a82f88a_hube2dcb8a4da2303f775be868887a3889_1932854_f445c2e710dc3a84bdada9c48fae47df.webp 760w,
          https://mikhalevi.ch/efficient-routing-on-a-scale-winning-solution-of-the-machine-learning-prague-2021-hackathon/images/44fe6a52-c353-11ee-b012-5f1e1a82f88a_hube2dcb8a4da2303f775be868887a3889_1932854_1520x1520_fit_q85_h2_lanczos_3.webp 1200w"
          src="https://mikhalevi.ch/efficient-routing-on-a-scale-winning-solution-of-the-machine-learning-prague-2021-hackathon/images/44fe6a52-c353-11ee-b012-5f1e1a82f88a_hube2dcb8a4da2303f775be868887a3889_1932854_d9b3ba9f964471e056c6108f66218ba6.webp"
          width="760"
          height="413"
          loading="lazy"
          class="!m-0"
          style="background: linear-gradient(37.000000deg, #aeb7a6b3, #aeb7a600 75%),linear-gradient(127.000000deg, #3b8d3bb3, #3b8d3b00 75%),linear-gradient(217.000000deg, #377934b3, #37793400 75%),linear-gradient(307.000000deg, #8a9f78b3, #8a9f7800 75%); background-size: cover; background-repeat: no-repeat;" data-zoomable /></div></figure>
</p>
<p>These Voronoi regions provide better insight into the clinic density and distribution.</p>
<h2 id="clusters">Clusters</h2>
<p>Next up is clustering. We decided to cluster users by distance using <code>village</code> information to speed up the clustering.</p>
<h3 id="utils">Utils</h3>
<p><a href="https://en.wikipedia.org/wiki/Vincenty%27s%5Fformulae#Inverse%5Fproblem" target="_blank" rel="noopener">Vincenty&rsquo;s formulae</a> offer one of the most commonly adopted methods to compute the geodesic distance. It&rsquo;s pretty precise but comparably slow in comparison to the great circle distance computation. To compute the latter, we will use the <a href="https://en.wikipedia.org/wiki/Haversine%5Fformula" target="_blank" rel="noopener">haversine formula</a>. The haversine formula is much simpler, and therefore, much faster. Let&rsquo;s see by how much.</p>
<p>We will use <a href="https://sourceforge.net/projects/geographiclib/" target="_blank" rel="noopener">geographiclib</a>&rsquo;s implementation of Vincenty&rsquo;s formula. It&rsquo;s a great library of various geodesic algorithm implementations. For the haversine formula, we will use the python <a href="https://pypi.org/project/haversine/" target="_blank" rel="noopener">haversine</a> library.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="kn">from</span> <span class="nn">geographiclib.geodesic</span> <span class="kn">import</span> <span class="n">Geodesic</span> <span class="k">as</span> <span class="n">geo</span>
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">haversine</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="n">point_a</span> <span class="o">=</span> <span class="p">(</span><span class="mf">50.088036196500006</span><span class="p">,</span> <span class="mf">15.820675680125</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="n">point_b</span> <span class="o">=</span> <span class="p">(</span><span class="mf">50.036845777</span><span class="p">,</span> <span class="mf">15.774167073</span><span class="p">)</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="o">%</span><span class="n">timeit</span> <span class="n">geo</span><span class="o">.</span><span class="n">WGS84</span><span class="o">.</span><span class="n">Inverse</span><span class="p">(</span><span class="o">*</span><span class="n">point_a</span><span class="p">,</span> <span class="o">*</span><span class="n">point_b</span><span class="p">)</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">76.7 Âµs Â± 1.49 Âµs per loop (mean Â± std. dev. of 7 runs, 10000 loops each)
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="o">%</span><span class="n">timeit</span> <span class="n">haversine</span><span class="o">.</span><span class="n">haversine</span><span class="p">(</span><span class="n">point_a</span><span class="p">,</span> <span class="n">point_b</span><span class="p">,</span> <span class="n">haversine</span><span class="o">.</span><span class="n">Unit</span><span class="o">.</span><span class="n">METERS</span><span class="p">)</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">1.31 Âµs Â± 10.8 ns per loop (mean Â± std. dev. of 7 runs, 1000000 loops each)
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="n">geo</span><span class="o">.</span><span class="n">WGS84</span><span class="o">.</span><span class="n">Inverse</span><span class="p">(</span><span class="o">*</span><span class="n">point_a</span><span class="p">,</span> <span class="o">*</span><span class="n">point_b</span><span class="p">)[</span><span class="s1">&#39;s12&#39;</span><span class="p">],</span> <span class="n">haversine</span><span class="o">.</span><span class="n">haversine</span><span class="p">(</span><span class="n">point_a</span><span class="p">,</span> <span class="n">point_b</span><span class="p">,</span> <span class="n">haversine</span><span class="o">.</span><span class="n">Unit</span><span class="o">.</span><span class="n">METERS</span><span class="p">)</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">(6596.260963017945, 6589.524077151891)
</span></span></code></pre></div><p>The difference in performance is staggering when the error margin is negligible. Given that we will only be using this distance for approximations, and both distances are very optimistic approximations of the driving distance, we will stick to the haversine distance going forward.</p>
<p>Before we move on, let&rsquo;s import the progress bar. Things we do from this moment on will take much more time to compute, and it&rsquo;s nice to monitor the progress.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="kn">from</span> <span class="nn">fastprogress.fastprogress</span> <span class="kn">import</span> <span class="n">progress_bar</span>
</span></span></code></pre></div><p>Below is the method that we will use to compute and plot the clusters.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="k">def</span> <span class="nf">plot_user_clusters_by</span><span class="p">(</span><span class="n">key_fn</span><span class="p">,</span> <span class="n">radius_m</span><span class="o">=</span><span class="mi">10_000</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">    <span class="n">clusters</span> <span class="o">=</span> <span class="p">{}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">user</span> <span class="ow">in</span> <span class="n">progress_bar</span><span class="p">(</span><span class="n">users_geo</span><span class="o">.</span><span class="n">iterrows</span><span class="p">(),</span> <span class="n">total</span><span class="o">=</span><span class="nb">len</span><span class="p">(</span><span class="n">users_geo</span><span class="o">.</span><span class="n">index</span><span class="p">)):</span>
</span></span><span class="line"><span class="cl">        <span class="n">key</span> <span class="o">=</span> <span class="n">key_fn</span><span class="p">(</span><span class="n">user</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="n">user_loc</span> <span class="o">=</span> <span class="n">user</span><span class="p">[</span><span class="s1">&#39;location&#39;</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="n">key</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">clusters</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">            <span class="n">clusters</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="p">[[(</span><span class="n">i</span><span class="p">,</span> <span class="n">user_loc</span><span class="p">)]]</span>
</span></span><span class="line"><span class="cl">        <span class="k">else</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">            <span class="n">found_cluster</span> <span class="o">=</span> <span class="kc">False</span>
</span></span><span class="line"><span class="cl">            <span class="k">for</span> <span class="n">cluster</span> <span class="ow">in</span> <span class="n">clusters</span><span class="p">[</span><span class="n">key</span><span class="p">]:</span>
</span></span><span class="line"><span class="cl">                <span class="n">first_user_location</span> <span class="o">=</span> <span class="n">cluster</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">                <span class="n">distance</span> <span class="o">=</span> <span class="n">haversine</span><span class="o">.</span><span class="n">haversine</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">                    <span class="n">first_user_location</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                    <span class="n">user</span><span class="p">[</span><span class="s1">&#39;location&#39;</span><span class="p">],</span>
</span></span><span class="line"><span class="cl">                    <span class="n">haversine</span><span class="o">.</span><span class="n">Unit</span><span class="o">.</span><span class="n">METERS</span>
</span></span><span class="line"><span class="cl">                <span class="p">)</span>
</span></span><span class="line"><span class="cl">                <span class="k">if</span> <span class="n">distance</span> <span class="o">&lt;</span> <span class="n">radius_m</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">                    <span class="n">found_cluster</span> <span class="o">=</span> <span class="kc">True</span>
</span></span><span class="line"><span class="cl">                    <span class="n">cluster</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">i</span><span class="p">,</span> <span class="n">user_loc</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">                    <span class="k">break</span>
</span></span><span class="line"><span class="cl">            <span class="k">if</span> <span class="ow">not</span> <span class="n">found_cluster</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">                <span class="n">clusters</span><span class="p">[</span><span class="n">key</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">([(</span><span class="n">i</span><span class="p">,</span> <span class="n">user_loc</span><span class="p">)])</span>
</span></span><span class="line"><span class="cl">                
</span></span><span class="line"><span class="cl">    <span class="n">cluster_geometries</span> <span class="o">=</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">        <span class="n">shg</span><span class="o">.</span><span class="n">MultiPoint</span><span class="p">([(</span><span class="n">point</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">1</span><span class="p">],</span> <span class="n">point</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span> <span class="k">for</span> <span class="n">point</span> <span class="ow">in</span> <span class="n">cluster</span><span class="p">])</span>
</span></span><span class="line"><span class="cl">        <span class="k">for</span> <span class="n">cluster_group</span> <span class="ow">in</span> <span class="n">clusters</span><span class="o">.</span><span class="n">values</span><span class="p">()</span> <span class="k">for</span> <span class="n">cluster</span> <span class="ow">in</span> <span class="n">cluster_group</span>
</span></span><span class="line"><span class="cl">    <span class="p">]</span>
</span></span><span class="line"><span class="cl">    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;found </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">cluster_geometries</span><span class="p">)</span><span class="si">}</span><span class="s1"> clusters&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl">    <span class="n">cluster_map</span> <span class="o">=</span> <span class="n">ll</span><span class="o">.</span><span class="n">Map</span><span class="p">(</span><span class="n">center</span><span class="o">=</span><span class="n">CENTER_OF_CZECHIA</span><span class="p">,</span> <span class="n">zoom</span><span class="o">=</span><span class="mi">7</span><span class="p">,</span> <span class="n">min_zoom</span><span class="o">=</span><span class="mi">7</span><span class="p">,</span> <span class="n">max_zoom</span><span class="o">=</span><span class="mi">19</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="n">cluster_map</span><span class="o">.</span><span class="n">add_control</span><span class="p">(</span><span class="n">ll</span><span class="o">.</span><span class="n">FullScreenControl</span><span class="p">())</span>
</span></span><span class="line"><span class="cl">    <span class="n">cluster_map</span><span class="o">.</span><span class="n">add_layer</span><span class="p">(</span><span class="n">ll</span><span class="o">.</span><span class="n">Polygon</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">        <span class="n">locations</span><span class="o">=</span><span class="p">[</span><span class="n">polygon_to_ll</span><span class="p">(</span><span class="n">cluster</span><span class="o">.</span><span class="n">convex_hull</span><span class="p">)</span> <span class="k">for</span> <span class="n">cluster</span> <span class="ow">in</span> <span class="n">cluster_geometries</span><span class="p">],</span>
</span></span><span class="line"><span class="cl">        <span class="n">color</span><span class="o">=</span><span class="s2">&#34;green&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="n">fill_color</span><span class="o">=</span><span class="s2">&#34;green&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="p">))</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="n">cluster_map</span><span class="p">,</span><span class="n">cluster_geometries</span><span class="p">,</span><span class="n">clusters</span>
</span></span></code></pre></div><h3 id="visualizations">Visualizations</h3>
<p>First, we will compute the clusters by user <code>village</code>s.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="n">key_fn</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">user</span><span class="p">:</span> <span class="n">user</span><span class="p">[</span><span class="s1">&#39;village&#39;</span><span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="n">cluster_map</span><span class="p">,</span> <span class="n">cluster_geometries</span><span class="p">,</span> <span class="n">clusters</span> <span class="o">=</span> <span class="n">plot_user_clusters_by</span><span class="p">(</span><span class="n">key_fn</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="n">cluster_map</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">found 6285 clusters
</span></span></code></pre></div><p>













<figure class="flex flex-col justify-center items-center" >
  <div class="w-100" ><img alt="" srcset="
          https://mikhalevi.ch/efficient-routing-on-a-scale-winning-solution-of-the-machine-learning-prague-2021-hackathon/images/44fe9160-c353-11ee-b012-5f1e1a82f88a_hu6f98da4aa3f0061e101d124402074795_1333054_51a77eb8db2cd5ad28dbf2fd5ccbc4b7.webp 400w,
          https://mikhalevi.ch/efficient-routing-on-a-scale-winning-solution-of-the-machine-learning-prague-2021-hackathon/images/44fe9160-c353-11ee-b012-5f1e1a82f88a_hu6f98da4aa3f0061e101d124402074795_1333054_8ac02501cce1565cc0579192995141b8.webp 760w,
          https://mikhalevi.ch/efficient-routing-on-a-scale-winning-solution-of-the-machine-learning-prague-2021-hackathon/images/44fe9160-c353-11ee-b012-5f1e1a82f88a_hu6f98da4aa3f0061e101d124402074795_1333054_1520x1520_fit_q85_h2_lanczos_3.webp 1200w"
          src="https://mikhalevi.ch/efficient-routing-on-a-scale-winning-solution-of-the-machine-learning-prague-2021-hackathon/images/44fe9160-c353-11ee-b012-5f1e1a82f88a_hu6f98da4aa3f0061e101d124402074795_1333054_51a77eb8db2cd5ad28dbf2fd5ccbc4b7.webp"
          width="760"
          height="417"
          loading="lazy"
          class="!m-0"
          style="background: linear-gradient(37.000000deg, #b7baaeb3, #b7baae00 75%),linear-gradient(157.000000deg, #297c28b3, #297c2800 75%),linear-gradient(277.000000deg, #2c862eb3, #2c862e00 75%); background-size: cover; background-repeat: no-repeat;" data-zoomable /></div></figure>
</p>
<p>6,285 clusters is a good amount, but the clusters are quite large. Let&rsquo;s compute clusters based on the user <code>village_part</code>s.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="n">key_fn</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">user</span><span class="p">:</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">user</span><span class="p">[</span><span class="s2">&#34;village&#34;</span><span class="p">]</span><span class="si">}</span><span class="s1">_</span><span class="si">{</span><span class="n">user</span><span class="p">[</span><span class="s2">&#34;village_part&#34;</span><span class="p">]</span><span class="si">}</span><span class="s1">&#39;</span>
</span></span><span class="line"><span class="cl"><span class="n">cluster_map</span><span class="p">,</span> <span class="n">cluster_geometries</span><span class="p">,</span> <span class="n">clusters</span> <span class="o">=</span> <span class="n">plot_user_clusters_by</span><span class="p">(</span><span class="n">key_fn</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="n">cluster_map</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">found 14728 clusters
</span></span></code></pre></div><p>













<figure class="flex flex-col justify-center items-center" >
  <div class="w-100" ><img alt="" srcset="
          https://mikhalevi.ch/efficient-routing-on-a-scale-winning-solution-of-the-machine-learning-prague-2021-hackathon/images/44fe9161-c353-11ee-b012-5f1e1a82f88a_hu7dd9aec7073396c0dc48d3684b2d62d2_1314287_12693cc0e000ed75297c7dc53b412feb.webp 400w,
          https://mikhalevi.ch/efficient-routing-on-a-scale-winning-solution-of-the-machine-learning-prague-2021-hackathon/images/44fe9161-c353-11ee-b012-5f1e1a82f88a_hu7dd9aec7073396c0dc48d3684b2d62d2_1314287_dcb0f7f67d8224f401466dd80290798d.webp 760w,
          https://mikhalevi.ch/efficient-routing-on-a-scale-winning-solution-of-the-machine-learning-prague-2021-hackathon/images/44fe9161-c353-11ee-b012-5f1e1a82f88a_hu7dd9aec7073396c0dc48d3684b2d62d2_1314287_1520x1520_fit_q85_h2_lanczos_3.webp 1200w"
          src="https://mikhalevi.ch/efficient-routing-on-a-scale-winning-solution-of-the-machine-learning-prague-2021-hackathon/images/44fe9161-c353-11ee-b012-5f1e1a82f88a_hu7dd9aec7073396c0dc48d3684b2d62d2_1314287_12693cc0e000ed75297c7dc53b412feb.webp"
          width="760"
          height="415"
          loading="lazy"
          class="!m-0"
          style="background: linear-gradient(37.000000deg, #b7baaeb3, #b7baae00 75%),linear-gradient(157.000000deg, #287c27b3, #287c2700 75%),linear-gradient(277.000000deg, #2c862eb3, #2c862e00 75%); background-size: cover; background-repeat: no-repeat;" data-zoomable /></div></figure>
</p>
<p>15k is a good amount of clusters in terms of the number of requests we can issue to the Azure API, but the clusters are still quite large. Let&rsquo;s explore 500m radius clusters.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="n">cluser_map</span><span class="p">,</span> <span class="n">cluster_geometries</span><span class="p">,</span> <span class="n">clusters</span> <span class="o">=</span> <span class="n">plot_user_clusters_by</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">    <span class="k">lambda</span> <span class="n">user</span><span class="p">:</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">user</span><span class="p">[</span><span class="s2">&#34;village&#34;</span><span class="p">]</span><span class="si">}</span><span class="s1">_</span><span class="si">{</span><span class="n">user</span><span class="p">[</span><span class="s2">&#34;village_part&#34;</span><span class="p">]</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="n">radius_m</span><span class="o">=</span><span class="mi">500</span>
</span></span><span class="line"><span class="cl"><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="n">cluster_map</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">found 47199 clusters
</span></span></code></pre></div><p>













<figure class="flex flex-col justify-center items-center" >
  <div class="w-100" ><img alt="" srcset="
          https://mikhalevi.ch/efficient-routing-on-a-scale-winning-solution-of-the-machine-learning-prague-2021-hackathon/images/44fe9162-c353-11ee-b012-5f1e1a82f88a_hu5097d5860b608957bc934bebc7632018_1317428_ad41eac39522be6af73a3e8adf641c40.webp 400w,
          https://mikhalevi.ch/efficient-routing-on-a-scale-winning-solution-of-the-machine-learning-prague-2021-hackathon/images/44fe9162-c353-11ee-b012-5f1e1a82f88a_hu5097d5860b608957bc934bebc7632018_1317428_0ea38e508a3e80ace6d59c83246813c5.webp 760w,
          https://mikhalevi.ch/efficient-routing-on-a-scale-winning-solution-of-the-machine-learning-prague-2021-hackathon/images/44fe9162-c353-11ee-b012-5f1e1a82f88a_hu5097d5860b608957bc934bebc7632018_1317428_1520x1520_fit_q85_h2_lanczos_3.webp 1200w"
          src="https://mikhalevi.ch/efficient-routing-on-a-scale-winning-solution-of-the-machine-learning-prague-2021-hackathon/images/44fe9162-c353-11ee-b012-5f1e1a82f88a_hu5097d5860b608957bc934bebc7632018_1317428_ad41eac39522be6af73a3e8adf641c40.webp"
          width="760"
          height="415"
          loading="lazy"
          class="!m-0"
          style="background: linear-gradient(37.000000deg, #b7baaeb3, #b7baae00 75%),linear-gradient(157.000000deg, #287c27b3, #287c2700 75%),linear-gradient(277.000000deg, #2d862eb3, #2d862e00 75%); background-size: cover; background-repeat: no-repeat;" data-zoomable /></div></figure>
</p>
<p>These 47k clusters seem like the way to go for an efficient and precise solution.</p>
<h2 id="routing">Routing</h2>
<p>With $200USD in MS Azure credit, we can run only 40k queries against the routing API if we want to send more than 50 of them per second. And with 47k clusters, we would definitely need to send &gt; 40k requests.</p>
<p>To not sacrifice the precision and to iterate quickly, we set up a local instance of the <a href="http://project-osrm.org/" target="_blank" rel="noopener">open street routing machine</a>. What follows is the code we used to send routing requests to it.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">requests</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">OSRM_URI</span> <span class="o">=</span> <span class="s1">&#39;http://127.0.0.1:5000&#39;</span>
</span></span><span class="line"><span class="cl"><span class="n">MAX_ATTEMPTS</span> <span class="o">=</span> <span class="mi">7</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">osrm_client</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">Session</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">def</span> <span class="nf">request</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">attempt</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">    <span class="k">try</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="n">response</span> <span class="o">=</span> <span class="n">osrm_client</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="n">response</span><span class="o">.</span><span class="n">raise_for_status</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">response</span>
</span></span><span class="line"><span class="cl">    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="n">attempt</span> <span class="o">&gt;</span> <span class="n">MAX_ATTEMPTS</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">            <span class="k">raise</span> <span class="n">e</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">request</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">attempt</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl"><span class="k">def</span> <span class="nf">get_route</span><span class="p">(</span><span class="n">lat1</span><span class="p">,</span> <span class="n">lon1</span><span class="p">,</span> <span class="n">lat2</span><span class="p">,</span> <span class="n">lon2</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">    <span class="n">url</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">OSRM_URI</span><span class="si">}</span><span class="s1">/route/v1/driving/</span><span class="si">{</span><span class="n">lon1</span><span class="si">}</span><span class="s1">,</span><span class="si">{</span><span class="n">lat1</span><span class="si">}</span><span class="s1">;</span><span class="si">{</span><span class="n">lon2</span><span class="si">}</span><span class="s1">,</span><span class="si">{</span><span class="n">lat2</span><span class="si">}</span><span class="s1">?continue_straight=false&#39;</span>
</span></span><span class="line"><span class="cl">    <span class="k">try</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="n">response</span> <span class="o">=</span> <span class="n">request</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="n">route</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">()[</span><span class="s1">&#39;routes&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">    <span class="k">except</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;[get_route] err&#39;</span><span class="p">,</span> <span class="n">url</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="nb">float</span><span class="p">(</span><span class="s1">&#39;inf&#39;</span><span class="p">),</span> <span class="nb">float</span><span class="p">(</span><span class="s1">&#39;inf&#39;</span><span class="p">),</span> <span class="s1">&#39;&#39;</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="n">route</span><span class="p">[</span><span class="s1">&#39;distance&#39;</span><span class="p">],</span> <span class="n">route</span><span class="p">[</span><span class="s1">&#39;duration&#39;</span><span class="p">]</span> <span class="o">/</span> <span class="mi">60</span><span class="p">,</span> <span class="n">route</span><span class="p">[</span><span class="s1">&#39;geometry&#39;</span><span class="p">]</span>
</span></span></code></pre></div><p>Let&rsquo;s make sure that it works and get some sense of the performance.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="n">get_route</span><span class="p">(</span><span class="mf">50.077033696848886</span><span class="p">,</span> <span class="mf">14.440035214801874</span><span class="p">,</span> <span class="mf">50.070578695594314</span><span class="p">,</span> <span class="mf">14.494946221573803</span><span class="p">)</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">(5248, 7.403333333333333, &#39;evspH{icwAv@aK@{RkGsmDzIalBgBgt@b_@yCpBvL|ExKQtC&#39;)
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="o">%</span><span class="n">timeit</span> <span class="n">get_route</span><span class="p">(</span><span class="mf">50.077033696848886</span><span class="p">,</span> <span class="mf">14.440035214801874</span><span class="p">,</span> <span class="mf">50.070578695594314</span><span class="p">,</span> <span class="mf">14.494946221573803</span><span class="p">)</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">1.86 ms Â± 109 Âµs per loop (mean Â± std. dev. of 7 runs, 100 loops each)
</span></span></code></pre></div><h2 id="solution">Solution</h2>
<p>The solution is quite straightforward from that point on. But before we move on, let&rsquo;s import <a href="https://numpy.org/" target="_blank" rel="noopener">numpy</a>.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
</span></span></code></pre></div><p>We will need a <del>fast</del>vectorized method for the haversine distance computation.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="k">def</span> <span class="nf">sort_data_haversine</span><span class="p">(</span><span class="n">points</span><span class="p">,</span> <span class="n">data</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">    <span class="n">distances</span> <span class="o">=</span> <span class="n">haversine</span><span class="o">.</span><span class="n">haversine_vector</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">        <span class="n">data</span><span class="p">[</span><span class="s1">&#39;location&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">tolist</span><span class="p">(),</span>
</span></span><span class="line"><span class="cl">        <span class="n">points</span><span class="p">[</span><span class="s1">&#39;location&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">tolist</span><span class="p">(),</span>
</span></span><span class="line"><span class="cl">        <span class="n">unit</span><span class="o">=</span><span class="n">haversine</span><span class="o">.</span><span class="n">Unit</span><span class="o">.</span><span class="n">METERS</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="n">comb</span><span class="o">=</span><span class="kc">True</span>
</span></span><span class="line"><span class="cl">    <span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">argsort</span><span class="p">(</span><span class="n">distances</span><span class="p">),</span> <span class="n">distances</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="n">index</span><span class="p">,</span> <span class="n">distances</span> <span class="o">=</span> <span class="n">sort_data_haversine</span><span class="p">(</span><span class="n">users</span><span class="p">[:</span><span class="mi">100</span><span class="p">],</span> <span class="n">parent_orgs</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="n">index</span><span class="p">,</span> <span class="n">distances</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">(array([[4989, 4992, 4911, ..., 3372, 3375, 3254],
</span></span><span class="line"><span class="cl">        [4989, 4992, 4911, ..., 3372, 3375, 3254],
</span></span><span class="line"><span class="cl">        [4989, 4992, 4911, ..., 3372, 3375, 3254],
</span></span><span class="line"><span class="cl">        ...,
</span></span><span class="line"><span class="cl">        [4743, 4803, 4799, ..., 3372, 3375, 3254],
</span></span><span class="line"><span class="cl">        [3362, 3146, 3320, ..., 3807, 3375, 3254],
</span></span><span class="line"><span class="cl">        [4827, 4803, 4799, ..., 3372, 3375, 3254]]),
</span></span><span class="line"><span class="cl"> array([[133852.36820813, 133508.21170191, 133514.27117984, ...,
</span></span><span class="line"><span class="cl">         138680.78292498, 134174.19127045, 140410.66063062],
</span></span><span class="line"><span class="cl">        [133888.2414056 , 133543.99335324, 133550.20998843, ...,
</span></span><span class="line"><span class="cl">         138626.18005503, 134154.00442703, 140355.03132468],
</span></span><span class="line"><span class="cl">        [134038.57941885, 133694.36931002, 133700.5206838 , ...,
</span></span><span class="line"><span class="cl">         138486.67124833, 133999.0278078 , 140216.3122906 ],
</span></span><span class="line"><span class="cl">        ...,
</span></span><span class="line"><span class="cl">        [132402.65539979, 132050.23378999, 132072.18742985, ...,
</span></span><span class="line"><span class="cl">         138917.42961128, 137858.06810736, 140528.10016674],
</span></span><span class="line"><span class="cl">        [109703.4194728 , 109348.16998337, 109376.71678102, ...,
</span></span><span class="line"><span class="cl">         161563.91234588, 160672.22237329, 163126.36755815],
</span></span><span class="line"><span class="cl">        [134407.99756303, 134053.95329282, 134079.57745343, ...,
</span></span><span class="line"><span class="cl">         136852.37604113, 136692.76736826, 138434.94454964]]))
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="o">%</span><span class="n">timeit</span> <span class="n">sort_data_haversine</span><span class="p">(</span><span class="n">users</span><span class="p">[:</span><span class="mi">100</span><span class="p">],</span> <span class="n">parent_orgs</span><span class="p">)</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">75.7 ms Â± 63.3 Âµs per loop (mean Â± std. dev. of 7 runs, 10 loops each)
</span></span></code></pre></div><p>75ms to compute <code>100*11k</code> distances is pretty good.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="n">ORG_TYPES</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">orgs</span><span class="p">[</span><span class="s1">&#39;contractual_specialty_id&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">unique</span><span class="p">())</span>
</span></span><span class="line"><span class="cl"><span class="nb">len</span><span class="p">(</span><span class="n">ORG_TYPES</span><span class="p">)</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">274
</span></span></code></pre></div><p>Next, we will create a method to find solutions for each of the clusters. To be performant, we look for all types of clinics in a single pass over a sorted list of candidates. It&rsquo;s hard to vectorize the method, so we run it in multiple threads.</p>
<p>Notice that the solution incorporates our knowledge that there are some clinics of the same type that share the exact location. When we encounter this, we randomly distribute users between such clinics to provide better coverage.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">concurrent.futures</span>
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">random</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">pool</span> <span class="o">=</span> <span class="n">concurrent</span><span class="o">.</span><span class="n">futures</span><span class="o">.</span><span class="n">ProcessPoolExecutor</span><span class="p">(</span><span class="n">max_workers</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">def</span> <span class="nf">find_closest_orgs_for_point</span><span class="p">(</span><span class="n">point</span><span class="p">,</span> <span class="n">index</span><span class="p">,</span> <span class="n">distances</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">    <span class="n">org_types_left</span> <span class="o">=</span> <span class="n">ORG_TYPES</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">    <span class="n">result</span> <span class="o">=</span> <span class="p">{}</span>
</span></span><span class="line"><span class="cl">    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">index</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="ow">not</span> <span class="n">org_types_left</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">            <span class="k">break</span>
</span></span><span class="line"><span class="cl">        <span class="n">parent_org</span> <span class="o">=</span> <span class="n">parent_orgs</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">        <span class="n">haversine_distance</span> <span class="o">=</span> <span class="n">distances</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">        <span class="n">route</span> <span class="o">=</span> <span class="kc">None</span>
</span></span><span class="line"><span class="cl">        <span class="k">for</span> <span class="n">specialty_department</span> <span class="ow">in</span> <span class="p">(</span><span class="n">sd</span> <span class="k">for</span> <span class="n">sd</span> <span class="ow">in</span> <span class="n">parent_org</span><span class="p">[</span><span class="s1">&#39;specialty_department&#39;</span><span class="p">]</span> <span class="k">if</span> <span class="n">sd</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="ow">in</span> <span class="n">org_types_left</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">            <span class="n">specialty</span> <span class="o">=</span> <span class="n">specialty_department</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">            <span class="n">best_route</span> <span class="o">=</span> <span class="n">result</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">specialty</span><span class="p">,</span> <span class="p">((</span><span class="nb">float</span><span class="p">(</span><span class="s1">&#39;inf&#39;</span><span class="p">),),))[</span><span class="mi">0</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">            <span class="k">if</span> <span class="n">haversine_distance</span> <span class="o">&gt;</span> <span class="n">best_route</span><span class="p">[</span><span class="mi">0</span><span class="p">]:</span>
</span></span><span class="line"><span class="cl">                <span class="n">org_types_left</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">specialty</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">                <span class="k">continue</span>
</span></span><span class="line"><span class="cl">            <span class="k">if</span> <span class="ow">not</span> <span class="n">route</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">                <span class="n">route</span> <span class="o">=</span> <span class="n">get_route</span><span class="p">(</span><span class="o">*</span><span class="n">point</span><span class="p">[</span><span class="s1">&#39;location&#39;</span><span class="p">],</span> <span class="o">*</span><span class="n">parent_org</span><span class="p">[</span><span class="s1">&#39;location&#39;</span><span class="p">])</span>
</span></span><span class="line"><span class="cl">            <span class="k">if</span> <span class="p">(</span><span class="n">route</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">best_route</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="ow">or</span> <span class="p">(</span><span class="n">route</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="n">best_route</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="ow">and</span> <span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">()</span> <span class="o">&lt;</span> <span class="mf">.5</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">                <span class="n">result</span><span class="p">[</span><span class="n">specialty</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">route</span><span class="p">,</span> <span class="n">specialty_department</span><span class="p">,</span> <span class="n">parent_org</span><span class="p">[</span><span class="s1">&#39;location&#39;</span><span class="p">])</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="n">result</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">def</span> <span class="nf">_wrapper</span><span class="p">(</span><span class="n">args</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="n">find_closest_orgs_for_point</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">def</span> <span class="nf">find_closest</span><span class="p">(</span><span class="n">points</span><span class="p">,</span> <span class="n">orgs</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">    <span class="n">index</span><span class="p">,</span> <span class="n">distances</span> <span class="o">=</span> <span class="n">sort_data_haversine</span><span class="p">(</span><span class="n">points</span><span class="p">,</span> <span class="n">parent_orgs</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="nb">list</span><span class="p">(</span><span class="n">pool</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="n">_wrapper</span><span class="p">,</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">        <span class="p">(</span><span class="n">points</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">index</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">distances</span><span class="p">[</span><span class="n">i</span><span class="p">])</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">index</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">    <span class="p">]))</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="n">users_res</span> <span class="o">=</span> <span class="n">find_closest</span><span class="p">(</span><span class="n">users</span><span class="p">[:</span><span class="mi">1</span><span class="p">],</span> <span class="n">parent_orgs</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="nb">list</span><span class="p">(</span><span class="n">users_res</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="p">())[:</span><span class="mi">5</span><span class="p">]</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">[((3473.6,
</span></span><span class="line"><span class="cl">   5.298333333333333,
</span></span><span class="line"><span class="cl">   &#39;_d`oHyxjwAK{@g@a@qA|BeFvCYCSs@pCkGjBcIJsEw@cKZgGz@qAbCkAv@uBXg_@i@iFaCoFiBkJ{GaPg@aDiBq{@cCyVo@iL?qJv@gGZDAj@&#39;),
</span></span><span class="line"><span class="cl">  (&#39;014&#39;, 20216001.0),
</span></span><span class="line"><span class="cl">  (49.816801772, 14.517831226)),
</span></span><span class="line"><span class="cl"> ((3473.6,
</span></span><span class="line"><span class="cl">   5.298333333333333,
</span></span><span class="line"><span class="cl">   &#39;_d`oHyxjwAK{@g@a@qA|BeFvCYCSs@pCkGjBcIJsEw@cKZgGz@qAbCkAv@uBXg_@i@iFaCoFiBkJ{GaPg@aDiBq{@cCyVo@iL?qJv@gGZDAj@&#39;),
</span></span><span class="line"><span class="cl">  (&#39;002&#39;, 20412001.0),
</span></span><span class="line"><span class="cl">  (49.816801772, 14.517831226)),
</span></span><span class="line"><span class="cl"> ((3476.6,
</span></span><span class="line"><span class="cl">   5.341666666666667,
</span></span><span class="line"><span class="cl">   &#39;_d`oHyxjwAK{@g@a@qA|BeFvCYCSs@pCkGjBcIJsEw@cKZgGz@qAbCkAv@uBXg_@i@iFaCoFiBkJ{GaPg@aDiBq{@cCyVo@iLAaJx@wG}@R&#39;),
</span></span><span class="line"><span class="cl">  (&#39;902&#39;, 20721001.0),
</span></span><span class="line"><span class="cl">  (49.817220095, 14.517841305)),
</span></span><span class="line"><span class="cl"> ((16488.6,
</span></span><span class="line"><span class="cl">   28.763333333333332,
</span></span><span class="line"><span class="cl">   &#39;_d`oHyxjwAFrXf@|@rAIhBkKx@w@tDrC~GnVpOkD|EkCSzSqBpF`BzM~BtB~Kh`@|JzQvCn@nBkAwJt\\oJ|LMnAh@xC~EnE|A|DfKxY`ArG[hEuCzH~@lLkBnDwBzAuEmA}AlHwN|BoMsNoBMiAzAIdDzCfNYpGyHfI{JpC}HtFkF\\_VuDuR|@gEsCiCiH~@gM[sC_LeEcDpHm@|UXfH_@bBkExDQtCz@x@jGQxFzBfKfAbDfCvBpEEtCcDdObDvLAh\\t@xOxGtc@xLjd@l@hFXwChFaAbH}HvBqMzE{GdC_H`De@zAjHxC`AfLaGRwHnAoG}AgELmAnDb@`CpF|NdLvS?rCuIxEwEZwR{AiKp@eCh@g_@uC{WaG_V&#39;),
</span></span><span class="line"><span class="cl">  (&#39;709&#39;, 22107293.0),
</span></span><span class="line"><span class="cl">  (49.800521335, 14.42696598)),
</span></span><span class="line"><span class="cl"> ((16488.6,
</span></span><span class="line"><span class="cl">   28.763333333333332,
</span></span><span class="line"><span class="cl">   &#39;_d`oHyxjwAFrXf@|@rAIhBkKx@w@tDrC~GnVpOkD|EkCSzSqBpF`BzM~BtB~Kh`@|JzQvCn@nBkAwJt\\oJ|LMnAh@xC~EnE|A|DfKxY`ArG[hEuCzH~@lLkBnDwBzAuEmA}AlHwN|BoMsNoBMiAzAIdDzCfNYpGyHfI{JpC}HtFkF\\_VuDuR|@gEsCiCiH~@gM[sC_LeEcDpHm@|UXfH_@bBkExDQtCz@x@jGQxFzBfKfAbDfCvBpEEtCcDdObDvLAh\\t@xOxGtc@xLjd@l@hFXwChFaAbH}HvBqMzE{GdC_H`De@zAjHxC`AfLaGRwHnAoG}AgELmAnDb@`CpF|NdLvS?rCuIxEwEZwR{AiKp@eCh@g_@uC{WaG_V&#39;),
</span></span><span class="line"><span class="cl">  (&#39;799&#39;, 22107493.0),
</span></span><span class="line"><span class="cl">  (49.800521335, 14.42696598))]
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="o">%</span><span class="n">timeit</span> <span class="o">-</span><span class="n">n1</span> <span class="o">-</span><span class="n">r1</span> <span class="n">find_closest</span><span class="p">(</span><span class="n">users</span><span class="p">[:</span><span class="mi">100</span><span class="p">],</span> <span class="n">parent_orgs</span><span class="p">)</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">33.2 s Â± 0 ns per loop (mean Â± std. dev. of 1 run, 1 loop each)
</span></span></code></pre></div><p>Our implementation can find the solution for 100 users in 33 seconds. We are ready to run it on user clusters, and before we do, we have to compute the centroids of the clusters.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="n">clusters_flat</span> <span class="o">=</span> <span class="p">[</span><span class="n">cluster</span> <span class="k">for</span> <span class="n">cluster_group</span> <span class="ow">in</span> <span class="n">clusters</span><span class="o">.</span><span class="n">values</span><span class="p">()</span> <span class="k">for</span> <span class="n">cluster</span> <span class="ow">in</span> <span class="n">cluster_group</span><span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="n">clusters_restructured</span> <span class="o">=</span> <span class="p">[</span><span class="nb">list</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="o">*</span><span class="n">cluster</span><span class="p">))</span> <span class="k">for</span> <span class="n">cluster</span> <span class="ow">in</span> <span class="n">clusters_flat</span><span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="n">clusters_geo</span> <span class="o">=</span> <span class="n">gpd</span><span class="o">.</span><span class="n">GeoDataFrame</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">    <span class="n">clusters_restructured</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="n">crs</span><span class="o">=</span><span class="s1">&#39;EPSG:4326&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;users&#39;</span><span class="p">,</span> <span class="s1">&#39;locations&#39;</span><span class="p">],</span>
</span></span><span class="line"><span class="cl">    <span class="n">geometry</span><span class="o">=</span><span class="n">cluster_geometries</span>
</span></span><span class="line"><span class="cl"><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="n">clusters_geo</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</span></span></code></pre></div><table>
<thead>
<tr>
<th></th>
<th>users</th>
<th>locations</th>
<th>geometry</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>(0, 1, 2, 3, 6, 7, 8, 9, 10, 12, 14, 15, 16, 1&hellip;</td>
<td>((49.813014079, 14.478449504), (49.813251371, &hellip;</td>
<td>MULTIPOINT (14.47845 49.81301, 14.47990 49.813&hellip;</td>
</tr>
<tr>
<td>1</td>
<td>(4,)</td>
<td>((49.814779761, 14.469590894),)</td>
<td>MULTIPOINT (14.46959 49.81478)</td>
</tr>
<tr>
<td>2</td>
<td>(13,)</td>
<td>((49.810529999, 14.460041926),)</td>
<td>MULTIPOINT (14.46004 49.81053)</td>
</tr>
<tr>
<td>3</td>
<td>(11629, 11650, 11659, 11673, 11724, 11729, 117&hellip;</td>
<td>((49.98905532, 14.203808164), (49.993207327, 1&hellip;</td>
<td>MULTIPOINT (14.20381 49.98906, 14.20444 49.993&hellip;</td>
</tr>
<tr>
<td>4</td>
<td>(11642, 11653, 11685, 11699, 11714, 11726, 117&hellip;</td>
<td>((49.993481837, 14.21378659), (49.993255048, 1&hellip;</td>
<td>MULTIPOINT (14.21379 49.99348, 14.21489 49.993&hellip;</td>
</tr>
</tbody>
</table>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="n">cluster_centroids</span> <span class="o">=</span> <span class="n">clusters_geo</span><span class="o">.</span><span class="n">centroid</span><span class="o">.</span><span class="n">to_frame</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="n">cluster_centroids</span><span class="p">[</span><span class="s1">&#39;location&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">cluster_centroids</span><span class="o">.</span><span class="n">applymap</span><span class="p">(</span><span class="k">lambda</span> <span class="n">centroid</span><span class="p">:</span> <span class="p">(</span><span class="n">centroid</span><span class="o">.</span><span class="n">y</span><span class="p">,</span> <span class="n">centroid</span><span class="o">.</span><span class="n">x</span><span class="p">))</span>
</span></span><span class="line"><span class="cl"><span class="n">cluster_centroids</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">&lt;ipython-input-56-c0091e7f21d9&gt;:1: UserWarning: Geometry is in a geographic CRS. Results from &#39;centroid&#39; are likely incorrect. Use &#39;GeoSeries.to_crs()&#39; to re-project geometries to a projected CRS before this operation.
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  cluster_centroids = clusters_geo.centroid.to_frame()
</span></span></code></pre></div><table>
<thead>
<tr>
<th></th>
<th>0</th>
<th>location</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>POINT (14.47861 49.81427)</td>
<td>(49.81426659066666, 14.478608245733335)</td>
</tr>
<tr>
<td>1</td>
<td>POINT (14.46959 49.81478)</td>
<td>(49.814779761, 14.469590894)</td>
</tr>
<tr>
<td>2</td>
<td>POINT (14.46004 49.81053)</td>
<td>(49.810529999, 14.460041926)</td>
</tr>
<tr>
<td>3</td>
<td>POINT (14.20518 49.99149)</td>
<td>(49.99148887917857, 14.205177951250004)</td>
</tr>
<tr>
<td>4</td>
<td>POINT (14.21365 49.99239)</td>
<td>(49.99238546947369, 14.21365326868421)</td>
</tr>
</tbody>
</table>
<p>Once they are computed, we are ready to process all of the clusters.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="n">BATCH_SIZE</span> <span class="o">=</span> <span class="mi">1000</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">cluster_results</span> <span class="o">=</span> <span class="p">[]</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">total_iterations</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">ceil</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">cluster_centroids</span><span class="o">.</span><span class="n">index</span><span class="p">)</span> <span class="o">/</span> <span class="n">BATCH_SIZE</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">progress_bar</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">cluster_centroids</span><span class="o">.</span><span class="n">index</span><span class="p">),</span> <span class="n">BATCH_SIZE</span><span class="p">),</span> <span class="n">total</span><span class="o">=</span><span class="n">total_iterations</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">    <span class="n">batch_results</span> <span class="o">=</span> <span class="n">find_closest</span><span class="p">(</span><span class="n">cluster_centroids</span><span class="p">[</span><span class="n">i</span><span class="p">:</span><span class="n">i</span><span class="o">+</span><span class="n">BATCH_SIZE</span><span class="p">],</span> <span class="n">parent_orgs</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="n">cluster_results</span> <span class="o">+=</span> <span class="n">batch_results</span>
</span></span></code></pre></div><p>Running the solution on 47k clusters took 3 hours and 40 minutes, a time we are quite happy with.</p>
<p>The last thing left is writing the output CSV. Before we proceed, let&rsquo;s remind ourselves how it should look like.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="n">OUTPUT_COLUMNS</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">[&#39;policyholder_num&#39;,
</span></span><span class="line"><span class="cl"> &#39;contractual_specialty_id&#39;,
</span></span><span class="line"><span class="cl"> &#39;pzs_department_id&#39;,
</span></span><span class="line"><span class="cl"> &#39;km_to_pzs&#39;,
</span></span><span class="line"><span class="cl"> &#39;min_to_pzs&#39;,
</span></span><span class="line"><span class="cl"> &#39;zzs_department_id&#39;,
</span></span><span class="line"><span class="cl"> &#39;km_to_zzs&#39;,
</span></span><span class="line"><span class="cl"> &#39;min_to_zzs&#39;]
</span></span></code></pre></div><p>Because we really care about precision, we will adjust distance and driving times for each user based on the ratio between <code>user</code>â‡”<code>clinic</code> and <code>cluster centroid</code>â‡”<code>clinic</code> straight line distances.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">csv</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">M_IN_KM</span> <span class="o">=</span> <span class="mi">1000</span>
</span></span><span class="line"><span class="cl"><span class="n">SPEED</span> <span class="o">=</span> <span class="mi">833</span>  <span class="c1"># meters per hour (50kmh), used only when centroid2org distance is 0 (rare)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">def</span> <span class="nf">adjust_route</span><span class="p">(</span><span class="n">route</span><span class="p">,</span> <span class="n">user_location</span><span class="p">,</span> <span class="n">centroid_location</span><span class="p">,</span> <span class="n">org_location</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">    <span class="n">centroid2org_distance</span> <span class="o">=</span> <span class="n">haversine</span><span class="o">.</span><span class="n">haversine</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">        <span class="n">centroid_location</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="n">org_location</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="n">haversine</span><span class="o">.</span><span class="n">Unit</span><span class="o">.</span><span class="n">METERS</span>
</span></span><span class="line"><span class="cl">    <span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="n">user2org_distance</span> <span class="o">=</span> <span class="n">haversine</span><span class="o">.</span><span class="n">haversine</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">        <span class="n">user_location</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="n">org_location</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="n">haversine</span><span class="o">.</span><span class="n">Unit</span><span class="o">.</span><span class="n">METERS</span>
</span></span><span class="line"><span class="cl">    <span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="n">centroid2org_distance</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">user2org_distance</span><span class="p">,</span> <span class="n">user2org_distance</span> <span class="o">/</span> <span class="n">SPEED</span><span class="p">,</span> <span class="n">route</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">    <span class="n">ratio</span> <span class="o">=</span> <span class="n">user2org_distance</span> <span class="o">/</span> <span class="n">centroid2org_distance</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="n">route</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="n">ratio</span><span class="p">,</span> <span class="n">route</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">*</span> <span class="n">ratio</span><span class="p">,</span> <span class="n">route</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;./output.csv&#39;</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">file</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">    <span class="n">writer</span> <span class="o">=</span> <span class="n">csv</span><span class="o">.</span><span class="n">writer</span><span class="p">(</span><span class="n">file</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="n">writer</span><span class="o">.</span><span class="n">writerow</span><span class="p">(</span><span class="n">OUTPUT_COLUMNS</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl">    <span class="k">for</span> <span class="n">cluster_i</span><span class="p">,</span> <span class="n">cluster</span> <span class="ow">in</span> <span class="n">progress_bar</span><span class="p">(</span><span class="n">clusters_geo</span><span class="o">.</span><span class="n">iterrows</span><span class="p">(),</span> <span class="n">total</span><span class="o">=</span><span class="nb">len</span><span class="p">(</span><span class="n">clusters_geo</span><span class="o">.</span><span class="n">index</span><span class="p">)):</span>
</span></span><span class="line"><span class="cl">        <span class="n">cluster_rows</span> <span class="o">=</span> <span class="p">[]</span>
</span></span><span class="line"><span class="cl">        <span class="n">ast_route</span><span class="p">,</span> <span class="n">ast_org</span><span class="p">,</span> <span class="n">ast_location</span> <span class="o">=</span> <span class="n">cluster_results</span><span class="p">[</span><span class="n">cluster_i</span><span class="p">][</span><span class="s1">&#39;AST&#39;</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">        <span class="n">centroid_location</span> <span class="o">=</span> <span class="n">cluster_centroids</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="n">cluster_i</span><span class="p">][</span><span class="s1">&#39;location&#39;</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">        <span class="k">for</span> <span class="n">user_i</span> <span class="ow">in</span> <span class="n">cluster</span><span class="p">[</span><span class="s1">&#39;users&#39;</span><span class="p">]:</span>
</span></span><span class="line"><span class="cl">            <span class="n">user</span> <span class="o">=</span> <span class="n">users</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="n">user_i</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">            <span class="n">user_loc</span> <span class="o">=</span> <span class="n">user</span><span class="p">[</span><span class="s1">&#39;location&#39;</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">            <span class="n">adj_ast_route</span> <span class="o">=</span> <span class="n">adjust_route</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">                <span class="n">ast_route</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                <span class="n">user_loc</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                <span class="n">centroid_location</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                <span class="n">ast_location</span>
</span></span><span class="line"><span class="cl">            <span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="k">for</span> <span class="n">cluster_result</span> <span class="ow">in</span> <span class="n">cluster_results</span><span class="p">[</span><span class="n">cluster_i</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
</span></span><span class="line"><span class="cl">                <span class="n">route</span><span class="p">,</span> <span class="n">clinic</span><span class="p">,</span> <span class="n">clinic_location</span> <span class="o">=</span> <span class="n">cluster_result</span>
</span></span><span class="line"><span class="cl">                <span class="k">if</span> <span class="n">clinic</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;AST&#39;</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">                    <span class="k">continue</span>
</span></span><span class="line"><span class="cl">                <span class="n">adj_route</span> <span class="o">=</span> <span class="n">adjust_route</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">                    <span class="n">route</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                    <span class="n">user_loc</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                    <span class="n">centroid_location</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                    <span class="n">clinic_location</span>
</span></span><span class="line"><span class="cl">                <span class="p">)</span>
</span></span><span class="line"><span class="cl">                <span class="n">cluster_rows</span><span class="o">.</span><span class="n">append</span><span class="p">([</span>
</span></span><span class="line"><span class="cl">                    <span class="n">user</span><span class="p">[</span><span class="s1">&#39;policyholder_num&#39;</span><span class="p">],</span>
</span></span><span class="line"><span class="cl">                    <span class="n">clinic</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
</span></span><span class="line"><span class="cl">                    <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="nb">int</span><span class="p">(</span><span class="n">clinic</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span><span class="si">:</span><span class="s1">08d</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                    <span class="n">adj_route</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">/</span> <span class="n">M_IN_KM</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                    <span class="n">adj_route</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span>
</span></span><span class="line"><span class="cl">                    <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="nb">int</span><span class="p">(</span><span class="n">ast_org</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span><span class="si">:</span><span class="s1">08d</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                    <span class="n">adj_ast_route</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">/</span> <span class="n">M_IN_KM</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                    <span class="n">adj_ast_route</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span>
</span></span><span class="line"><span class="cl">                <span class="p">])</span>
</span></span><span class="line"><span class="cl">        <span class="n">writer</span><span class="o">.</span><span class="n">writerows</span><span class="p">(</span><span class="n">cluster_rows</span><span class="p">)</span>
</span></span></code></pre></div><p>As you can see, we came up with an elegant, efficient, and precise solution by thoroughly analyzing the data, clustering the users, setting up the local routing machine, vectorizing and parallelizing the computations, and approximating final driving distances and times for each of the users individually.</p>
<h2 id="result-visualization">Result visualization</h2>
<p>Let us conclude by plotting the results for a few clusters.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">polyline</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">CLUSTER_COLORS</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;green&#39;</span><span class="p">,</span> <span class="s1">&#39;red&#39;</span><span class="p">,</span> <span class="s1">&#39;orange&#39;</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">routes_map</span> <span class="o">=</span> <span class="n">ll</span><span class="o">.</span><span class="n">Map</span><span class="p">(</span><span class="n">center</span><span class="o">=</span><span class="n">CENTER_OF_CZECHIA</span><span class="p">,</span> <span class="n">zoom</span><span class="o">=</span><span class="mi">7</span><span class="p">,</span> <span class="n">min_zoom</span><span class="o">=</span><span class="mi">7</span><span class="p">,</span> <span class="n">max_zoom</span><span class="o">=</span><span class="mi">19</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="n">routes_map</span><span class="o">.</span><span class="n">add_control</span><span class="p">(</span><span class="n">ll</span><span class="o">.</span><span class="n">FullScreenControl</span><span class="p">())</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">CLUSTER_COLORS</span><span class="p">)):</span>
</span></span><span class="line"><span class="cl">    <span class="n">cluster_color</span> <span class="o">=</span> <span class="n">CLUSTER_COLORS</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">    <span class="n">cluster_result</span> <span class="o">=</span> <span class="n">cluster_results</span><span class="p">[</span><span class="n">i</span> <span class="o">*</span> <span class="mi">10000</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">    <span class="k">for</span> <span class="n">j</span><span class="p">,</span> <span class="n">specialty_result</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">cluster_result</span><span class="o">.</span><span class="n">items</span><span class="p">()):</span>
</span></span><span class="line"><span class="cl">        <span class="n">_</span><span class="p">,</span> <span class="n">result</span> <span class="o">=</span> <span class="n">specialty_result</span>
</span></span><span class="line"><span class="cl">        <span class="n">route</span> <span class="o">=</span> <span class="n">polyline</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="n">result</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">2</span><span class="p">])</span>
</span></span><span class="line"><span class="cl">        <span class="n">routes_map</span><span class="o">.</span><span class="n">add_layer</span><span class="p">(</span><span class="n">ll</span><span class="o">.</span><span class="n">Polyline</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">            <span class="n">locations</span><span class="o">=</span><span class="n">route</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="n">color</span><span class="o">=</span><span class="n">cluster_color</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="n">fill</span><span class="o">=</span><span class="kc">False</span>
</span></span><span class="line"><span class="cl">        <span class="p">))</span>
</span></span><span class="line"><span class="cl">        <span class="n">routes_map</span><span class="o">.</span><span class="n">add_layer</span><span class="p">(</span><span class="n">ll</span><span class="o">.</span><span class="n">Marker</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">            <span class="n">location</span><span class="o">=</span><span class="n">route</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span>
</span></span><span class="line"><span class="cl">            <span class="n">icon</span><span class="o">=</span><span class="n">ll</span><span class="o">.</span><span class="n">AwesomeIcon</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;hospital-o&#39;</span><span class="p">),</span>
</span></span><span class="line"><span class="cl">            <span class="n">draggable</span><span class="o">=</span><span class="kc">False</span>
</span></span><span class="line"><span class="cl">        <span class="p">))</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="n">j</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">            <span class="n">routes_map</span><span class="o">.</span><span class="n">add_layer</span><span class="p">(</span><span class="n">ll</span><span class="o">.</span><span class="n">Marker</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">                <span class="n">location</span><span class="o">=</span><span class="n">route</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
</span></span><span class="line"><span class="cl">                <span class="n">icon</span><span class="o">=</span><span class="n">ll</span><span class="o">.</span><span class="n">AwesomeIcon</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;users&#39;</span><span class="p">,</span> <span class="n">marker_color</span><span class="o">=</span><span class="n">cluster_color</span><span class="p">),</span>
</span></span><span class="line"><span class="cl">                <span class="n">draggable</span><span class="o">=</span><span class="kc">False</span>
</span></span><span class="line"><span class="cl">            <span class="p">))</span>
</span></span><span class="line"><span class="cl">        
</span></span><span class="line"><span class="cl"><span class="n">routes_map</span>
</span></span></code></pre></div><iframe src="https://mikhalevi.ch/content/html/2021-ml-prague-hackathon-results-map.html" style="width: 100%; height: 404px"></iframe>
<p>This map is interactive, and results for each of the clusters are color-coded; feel free to explore it. I hope that you&rsquo;ve enjoyed this article! If you have any thoughts about it, please, reach out to <a href="https://twitter.com/theyurij" target="_blank" rel="noopener">me on Twitter</a>.</p>
<p>I want to end by saying thank you to the ML Prague Conference, SAS, and all other sponsors for the hackathon! I had a lot of fun and am already looking forward to next year! :)</p>
 ]]>
        </content:encoded>

    </item>
    
    <item>
      <title><![CDATA[ Running tfjs-react-native in Android Emulator ]]></title>
      <description><![CDATA[ You are developing a react-native app with Tensorflow JS? Then you may have tried using the tfjs-react-native backend in Android SDK Emulator only to find that it doesn&rsquo;t work.
This happens because tfjs-react-native requires GLES 3 / WebGL 2. ]]></description>
      <link>https://mikhalevi.ch/running-tfjs-react-native-in-android-emulator/</link>
      <guid>https://mikhalevi.ch/running-tfjs-react-native-in-android-emulator/</guid>

      
          <category><![CDATA[ Software Engineering ]]></category>
        
      <dc:creator><![CDATA[ Yurij Mikhalevich ]]></dc:creator>
      <pubDate>Sat, 13 Mar 2021 18:16:00 +0000</pubDate>

      <media:content url="https://mikhalevi.ch/running-tfjs-react-native-in-android-emulator/featured_hu263c5f20d6c86dd08a91facc6013a907_265351_7c745888d004089854c81ba9ac5f7442.webp" medium="image"/>
        <content:encoded>
          <![CDATA[ <img src="https://mikhalevi.ch/running-tfjs-react-native-in-android-emulator/featured_hu263c5f20d6c86dd08a91facc6013a907_265351_7c745888d004089854c81ba9ac5f7442.webp" alt="Running tfjs-react-native in Android Emulator"><p>You are developing a react-native app with Tensorflow JS? Then you may have tried using the <code>tfjs-react-native</code> backend in Android SDK Emulator only to find that it doesn&rsquo;t work.</p>
<p>This happens because <code>tfjs-react-native</code> requires GLES 3 / WebGL 2. You can enable it in Android SDK Emulator via:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s2">&#34;GLESDynamicVersion = on&#34;</span> &gt;&gt; ~/.android/advancedFeatures.ini
</span></span></code></pre></div><p>I tested this only under Linux. Your host GPU should support at least OpenGL ES 3.2; you can check if it does via:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sudo apt install mesa-utils
</span></span><span class="line"><span class="cl">glxinfo <span class="p">|</span> grep <span class="s1">&#39;version.*OpenGL&#39;</span>
</span></span></code></pre></div> ]]>
        </content:encoded>

    </item>
    
    <item>
      <title><![CDATA[ Just Wake Up! ]]></title>
      <description><![CDATA[ Waking Life is a very unusual animation movie created in a unique style and full of almost random philosophical dialogues that leave you with a lasting impression which is hard to describe. ]]></description>
      <link>https://mikhalevi.ch/just-wake-up/</link>
      <guid>https://mikhalevi.ch/just-wake-up/</guid>

      
          <category><![CDATA[ What to Watch ]]></category>
        
      <dc:creator><![CDATA[ Yurij Mikhalevich ]]></dc:creator>
      <pubDate>Wed, 03 Feb 2021 15:16:00 +0000</pubDate>

      <media:content url="https://mikhalevi.ch/just-wake-up/featured_hu56c1dd45a0da899fdfe86b2889d337da_139404_78bc29a6a81103c6d7710a5228bf7bd6.webp" medium="image"/>
        <content:encoded>
          <![CDATA[ <img src="https://mikhalevi.ch/just-wake-up/featured_hu56c1dd45a0da899fdfe86b2889d337da_139404_78bc29a6a81103c6d7710a5228bf7bd6.webp" alt="Just Wake Up!"><p>Waking Life is a very unusual animation movie created in a unique style and full of almost random philosophical dialogues that leave you with a lasting impression which is hard to describe. I can say with a high degree of certainty that most of you&rsquo;ll feel dizzy while watching it, and I donâ€™t have the slightest idea whether you&rsquo;ll like it or not. Nevertheless, I highly recommend it to you because it&rsquo;s not just a movie â€” it&rsquo;s an experience worth its while. The film captivates you, and if you want to experience it to the fullest, I would recommend you watch it on a large screen, or better, in a cinema, a projector, or VR. Give it a try and let me know how you feel about it.</p>
<p>I don&rsquo;t want to write a lot to not spoil it for you; therefore, I&rsquo;ll end with a quote from the movie: &ldquo;So you have these serotonic neurons that inhibit hallucinations that they themselves are inhibited during REM sleep. See this allows dreams to appear real, while preventing competition from other perceptual processes. This is why dreams are mistaken for reality. To the functional system of neural activity that creates our world, there is no difference between dreaming a perception and an action, and actually the waking perception and action.&rdquo;</p>
 ]]>
        </content:encoded>

    </item>
    
    <item>
      <title><![CDATA[ A Good Place to Get Started With AI and Neural Nets ]]></title>
      <description><![CDATA[ People often ask me for a good place to get started with AI, machine learning, and neural nets.
course.fast.ai â€” this is a pretty good place. It&rsquo;s modern (the current version of the course was released this August), centered around the relevant practice, teaches you by doing, going deeper only when needed, and it goes with the book that was released this August, too. ]]></description>
      <link>https://mikhalevi.ch/a-good-place-to-get-started-with-ai-and-neural-nets/</link>
      <guid>https://mikhalevi.ch/a-good-place-to-get-started-with-ai-and-neural-nets/</guid>

      
          <category><![CDATA[ Software Engineering ]]></category>
        
      <dc:creator><![CDATA[ Yurij Mikhalevich ]]></dc:creator>
      <pubDate>Wed, 16 Dec 2020 14:56:00 +0000</pubDate>

      <media:content url="https://mikhalevi.ch/a-good-place-to-get-started-with-ai-and-neural-nets/featured_hudb7c3a48bfae5df0550fd3d2b6cc3517_410287_2e1220c67af6eb174cb185fa7b2f3466.webp" medium="image"/>
        <content:encoded>
          <![CDATA[ <img src="https://mikhalevi.ch/a-good-place-to-get-started-with-ai-and-neural-nets/featured_hudb7c3a48bfae5df0550fd3d2b6cc3517_410287_2e1220c67af6eb174cb185fa7b2f3466.webp" alt="A Good Place to Get Started With AI and Neural Nets"><p>People often ask me for a good place to get started with AI, machine learning, and neural nets.</p>
<p><a href="https://course.fast.ai/" target="_blank" rel="noopener">course.fast.ai</a> â€” this is a pretty good place. It&rsquo;s modern (the current version of the course was released this August), centered around the relevant practice, teaches you by doing, going deeper only when needed, and it goes with the book that was released this August, too. Overall, it&rsquo;s a pretty good introduction to the field.</p>
<p>There are also good courses from Andrew Ng on Coursera (his Deep Learning specialization is great), but, in my personal opinion, the fast.ai course is a better introduction to hands-on AI in the modern world.</p>
<p>In conclusion, I&rsquo;ll recommend you to do both fast.ai and Andrew Ng&rsquo;s courses because each of them offers a different perspective. The good idea is to top it all up with some practice that you can find on <a href="https://kaggle.com/" target="_blank" rel="noopener">Kaggle</a> (they also offer some courses on Kaggle Learn, I&rsquo;m not familiar with those, though).</p>
 ]]>
        </content:encoded>

    </item>
    
    <item>
      <title><![CDATA[ On Becoming a Person: A Therapist's View of Psychotherapy by Carl R. Rogers ]]></title>
      <description><![CDATA[ TL;DR: 10/10, highly recommend.
The book is a collection of the most impactful papers written by Rogers over the course of decades centered around the idea of becoming.
Life is guided by a changing understanding of and interpretation of my experience. ]]></description>
      <link>https://mikhalevi.ch/on-becoming-a-person-a-therapists-view-of-psychotherapy-by-carl-r-rogers/</link>
      <guid>https://mikhalevi.ch/on-becoming-a-person-a-therapists-view-of-psychotherapy-by-carl-r-rogers/</guid>

      
          <category><![CDATA[ Books ]]></category>
        
      <dc:creator><![CDATA[ Yurij Mikhalevich ]]></dc:creator>
      <pubDate>Sat, 05 Dec 2020 12:42:00 +0000</pubDate>

      <media:content url="https://mikhalevi.ch/on-becoming-a-person-a-therapists-view-of-psychotherapy-by-carl-r-rogers/featured_huc75fbbc2759acf55137c0bf522f353d1_329463_571878bf77f25bb2f1c603d71f5600ef.webp" medium="image"/>
        <content:encoded>
          <![CDATA[ <img src="https://mikhalevi.ch/on-becoming-a-person-a-therapists-view-of-psychotherapy-by-carl-r-rogers/featured_huc75fbbc2759acf55137c0bf522f353d1_329463_571878bf77f25bb2f1c603d71f5600ef.webp" alt="On Becoming a Person: A Therapist&#39;s View of Psychotherapy by Carl R. Rogers"><p><strong>TL;DR:</strong> 10/10, highly recommend.</p>
<p>The book is a collection of the most impactful papers written by Rogers over the course of decades centered around the idea of becoming.</p>
<blockquote>
<p>Life is guided by a changing understanding of and interpretation of my experience. It is always in process of becoming.</p>
</blockquote>
<p>I very much enjoyed Roger&rsquo;s optimistic outlook on people. I like how he presents his thoughts, and that he focuses on relationships and their role in people and society&rsquo;s functioning.</p>
<p>The method he and his co-workers used to measure psychotherapy&rsquo;s effectiveness on people is noteworthy. The team prepared a set of one hundred cards to represent different aspects of a character through adjectives and phrases that participants of psychotherapy used to describe themselves most often. On a schedule, they asked study participants to distribute these cards into ten piles â€” ranging from &ldquo;certainly about me&rdquo; to &ldquo;totally not about me.&rdquo; During the whole experiment, participants were asked to put a specific amount of cards into each pile â€” following a normal distribution. By enforcing this rule and using the same set of cards for every measurement and participant, researchers ensured an easy comparison. Essentially, they vectorized each measurement, turning it into a set of numbers. By doing so, they were able to, quite easily, compare states of the same person&rsquo;s psyche at different times or even one person to another. And this is not an easy task to achieve.</p>
<p>The overall level at which this experiment was conducted impressed me, specifically, the researchers even controlled for the effect of actual desire to receive psychotherapy. In addition to that, they took measurements of people&rsquo;s ideal self (besides their self-perception) and had a group of independent psychologists profile study participants the same way by &ldquo;distributing cards&rdquo; based on the recordings of interviews with the aforementioned participants to allow for an outside view on them.</p>
<p>I like Rogers&rsquo; outlook on people the most because he values each person and sees an opportunity for constructive improvement in everyone. This resonates with me a lot. And I believe this outlook â€” being open and kind to people â€” brings an actual positive change in people and society. As someone once said, &ldquo;kindness goes a long way.&rdquo; The most significant bit is when someone receives this kind treatment, they feel more comfortable and can act freer and more creatively; it sets off a chain of positive reactions and helpful changes in them, leading to more fulfilling and happy relationships and society.</p>
<p>Now I want to talk about an idea of Rogers that I don&rsquo;t quite understand. In the later part of the book, Rogers starts talking about the behavioral sciences and their implications for society. And you can tell that he is afraid that the products of developed behavioral sciences will create an anti-utopian society thoroughly controlled by these products.</p>
<blockquote>
<p>Aldous Huxley, in his Brave New World (1), has given a horrifying picture of saccharine happiness in a scientifically managed world, against which man eventually revolts. George Orwell, in 1984 (5), has drawn a picture of the world created by dictatorial power, in which the behavioral sciences are used as instruments of absolute control of individuals so that not behavior alone but even thought is controlled.</p>
</blockquote>
<p>He continues by talking about causality regarding human behavior and how those who understand the laws behind it can affect it. He is afraid that this control will not allow society to be creative, and creativity, as he says, is required for us to survive in the &ldquo;brave new&rdquo; technological world that we are building. From there he gradually goes to the question of free will, asking if there actually is causality in human behavior and whether a human can even be creative. What does it mean to be creative, he asks. To which he responds that, yes, a human can be creative, and there is free will. To illustrate his point, Rogers draws to the scientific method, which is, in essence, a controlled process focused on finding causality laws. At the same time, researchers freely choose how and where to apply this method. Therefore, this is an example of free will in action determining the outcome of specific research. Or, at least, this is how I understood his position regarding this question. This last point, this example, is the one I don&rsquo;t get. I cannot agree with it. It looks to me like Rogers deliberately excludes the researcher and the outside world from the &ldquo;causality system&rdquo; during the thought experiment. From my perspective, the researcher is part of a bigger system, and his life and decisions are affected by societal, economic, and cultural influences. Consequently, there is a cause for his actions and decisions; the only thing is that we don&rsquo;t always grasp it.</p>
<blockquote>
<p>In short, can science discover the methods by which man can most readily become a continually developing and self-transcending process, in his behavior, his thinking, his knowledge? Can science predict and release an essentially â€œunpredictableâ€ freedom?</p>
</blockquote>
<blockquote>
<p>John Deweyâ€™s statement: â€œScience has made its way by releasing, not by suppressing, the elements of variation, of invention and innovation, of novel creation in individuals.â€</p>
</blockquote>
<p>Rogers ends the book on the paradoxical and optimistic note that is summed up very well by the following excerpt:</p>
<blockquote>
<p>Or at the other end of the spectrum of choice we can choose to use the behavioral sciences in ways which will free, not control; which will bring about constructive variability, not conformity; which will develop creativity, not contentment; which will facilitate each person in his self-directed process of becoming; which will aid individuals, groups, and even the concept of science, to become self-transcending in freshly adaptive ways of meeting life and its problems. The choice is up to us, and the human race being what it is, we are likely to stumble about, making at times some nearly disastrous value choices, and at other times highly constructive ones.</p>
</blockquote>
<p>Having said all of this, I highly recommend this thought-provoking, dense, relatively easy to understand book packed with ideas and information. Thank you for reading my impressions, and if you decide to read the book, I hope you enjoy it! :)</p>
 ]]>
        </content:encoded>

    </item>
    
    <item>
      <title><![CDATA[ Have You Ever Eaten Seagulls? ]]></title>
      <description><![CDATA[ A strong gust of dry, warm salt-smelling air blows into my face, making my hair flow all over the place. I stand still paying attention to the surf&rsquo;s sound crashing into my ears, mentally moving me before falling down to my heart, resonating deep inside. ]]></description>
      <link>https://mikhalevi.ch/have-you-ever-eaten-seagulls/</link>
      <guid>https://mikhalevi.ch/have-you-ever-eaten-seagulls/</guid>

      
          <category><![CDATA[ Creative Writing ]]></category>
        
      <dc:creator><![CDATA[ Yurij Mikhalevich ]]></dc:creator>
      <pubDate>Tue, 29 Sep 2020 17:58:00 +0000</pubDate>

      <media:content url="https://mikhalevi.ch/have-you-ever-eaten-seagulls/featured_hu9988bb886b3d206dd38e464c9845f1bf_265428_5d885bb061ec65f000a48ad0a0879565.webp" medium="image"/>
        <content:encoded>
          <![CDATA[ <img src="https://mikhalevi.ch/have-you-ever-eaten-seagulls/featured_hu9988bb886b3d206dd38e464c9845f1bf_265428_5d885bb061ec65f000a48ad0a0879565.webp" alt="Have You Ever Eaten Seagulls?"><p>A strong gust of dry, warm salt-smelling air blows into my face, making my hair flow all over the place. I stand still paying attention to the surf&rsquo;s sound crashing into my ears, mentally moving me before falling down to my heart, resonating deep inside. A few seconds pass before I open my eyes and look down at the craggy coastline. The turquoise waters of the Black sea are as marvelous as always. I sit down, dropping my legs off the cliff&rsquo;s edge. I remove my backpack and pull out a shiny metal thermos displaying the word &ldquo;Rvonics&rdquo;, in a somewhat frayed font.</p>
<p>The thermos is full of hot, sweet ginger tea â€” total bliss â€” precisely what you need to drink when you are waiting for the sunset. Pouring a little bit for myself, I look around. It is a beautiful viewpoint, and I&rsquo;m fortunate enough to be alone here today. I am only accompanied by sturdy stones, and behind them enormous, rough rocks. Most of the stones are gray, but some of the rocks that are part of the mountain behind me are orange â€” unsure from where, I remember that means they are full of metal. I laugh to myself, pondering the human ability to remember seemingly random things, and turn back to the sun beginning to start setting into the sea.</p>
<p>I have no idea how much time has passed, but it&rsquo;s already pitch-dark. I turn my flashlight on and make my way back to the car. &ldquo;Beep-beep,&rdquo; I hear the phone. Looks like I have the reception again and a new message from Bettie: &ldquo;Carol, have you ever eaten seagulls?&rdquo;</p>
 ]]>
        </content:encoded>

    </item>
    
    <item>
      <title><![CDATA[ A Mathematician's Lament (Article) by Paul Lockhart ]]></title>
      <description><![CDATA[ The fact is that there is nothing as dreamy and poetic, nothing as radical,
subversive, and psychedelic, as mathematics. It is every bit as mind blowing as cosmology or physics (mathematicians conceived of black holes long before astronomers actually found any), and allows more freedom of expression than poetry, art, or music (which depend heavily on properties of the physical universe). ]]></description>
      <link>https://mikhalevi.ch/a-mathematicians-lament-article-by-paul-lockhart/</link>
      <guid>https://mikhalevi.ch/a-mathematicians-lament-article-by-paul-lockhart/</guid>

      
          <category><![CDATA[ Books ]]></category>
        
      <dc:creator><![CDATA[ Yurij Mikhalevich ]]></dc:creator>
      <pubDate>Wed, 16 Sep 2020 15:08:00 +0000</pubDate>

      <media:content url="https://mikhalevi.ch/a-mathematicians-lament-article-by-paul-lockhart/featured_hucc1dccf69846544fa36dc524366c7262_467054_45553a229afe7e6174bc28932ddf7a6a.webp" medium="image"/>
        <content:encoded>
          <![CDATA[ <img src="https://mikhalevi.ch/a-mathematicians-lament-article-by-paul-lockhart/featured_hucc1dccf69846544fa36dc524366c7262_467054_45553a229afe7e6174bc28932ddf7a6a.webp" alt="A Mathematician&#39;s Lament (Article) by Paul Lockhart"><blockquote>
<p>The fact is that there is nothing as dreamy and poetic, nothing as radical,<br>
subversive, and psychedelic, as mathematics. It is every bit as mind blowing as cosmology or physics (mathematicians conceived of black holes long before astronomers actually found any), and allows more freedom of expression than poetry, art, or music (which depend heavily on properties of the physical universe). Mathematics is the purest of the arts, as well as the most misunderstood.</p>
</blockquote>
<p>Today I&rsquo;m going to recommend a short article by Paul Lockhart, &ldquo;A Mathematician&rsquo;s Lament&rdquo;, a thought-provoking piece of textual art. The author boldly claims that math is an art and proves it, confidently, by walking you through his arguments. Paul Lockhart argues that we, as a society, greatly misunderstand what mathematics is and are trapped in a positive feedback loop of a broken school education system, which, in turn, reinforces the misunderstanding.</p>
<p>The tone of the prose is light-hearted, playful, serious, and concerned â€” all at the same time. This contributes a lot to the article being so engaging.</p>
<p>I, personally, very much enjoyed looking at math as art. The ideas presented in the text are very inspiring; they just feel right. There is also a book that was born out of the article! It promises to be an exciting read.</p>
 ]]>
        </content:encoded>

    </item>
    
    <item>
      <title><![CDATA[ An Unusual Evening ]]></title>
      <description><![CDATA[ Usually, I leave my small apartment around six-thirty in the evening when I&rsquo;m done with work. It&rsquo;s a calm neighborhood with a lot of single-story traditional buildings showing off their facades made of charred wood. ]]></description>
      <link>https://mikhalevi.ch/an-unusual-evening/</link>
      <guid>https://mikhalevi.ch/an-unusual-evening/</guid>

      
          <category><![CDATA[ Creative Writing ]]></category>
        
      <dc:creator><![CDATA[ Yurij Mikhalevich ]]></dc:creator>
      <pubDate>Mon, 13 Jul 2020 10:17:00 +0000</pubDate>

      <media:content url="https://mikhalevi.ch/an-unusual-evening/featured_hucf589dd005fd6f8c4d9296cf900b0b74_202137_82ab6d8b22d33ccaeced6450ac2b8d81.webp" medium="image"/>
        <content:encoded>
          <![CDATA[ <img src="https://mikhalevi.ch/an-unusual-evening/featured_hucf589dd005fd6f8c4d9296cf900b0b74_202137_82ab6d8b22d33ccaeced6450ac2b8d81.webp" alt="An Unusual Evening"><p>Usually, I leave my small apartment around six-thirty in the evening when I&rsquo;m done with work. It&rsquo;s a calm neighborhood with a lot of single-story traditional buildings showing off their facades made of charred wood. Usually, I&rsquo;m quite hungry by that time, and I proceed by heading directly towards the closest LAWSON convenience store. Don&rsquo;t get me wrong, I <em>do</em> prefer 7-Eleven, but the closest one is much farther away than LAWSON, and â€” as I said â€” I am, usually, quite hungry by that time. There are not many people on the streets during this hour â€” I meet only a few on my way to the store. In the store, I usually pick up an onigiri or two (or three â€” depending on how hungry I am), something to drink, and then walk towards the ShijÅ Bridge.</p>
<p>The closer I get to the bridge, the more people I meet. It&rsquo;s not a surprise because there is a subway station on the side of the bridge closest to me. All the people that I see are moving either towards or from the station. Upon reaching the bridge, I always feel like I&rsquo;m in another realm â€” it&rsquo;s hard to believe that it&rsquo;s so quiet only a few blocks away. It&rsquo;s quite crowded here. The bridge connects the subway station with a neighborhood full of loud riverside restaurants, atmospheric bars, colossal shopping malls, and business centers. Usually, I make a stop somewhere in the middle of the bridge, taking some time to ruminate about recent events while looking at the water. The crowd noise is somehow calming and helps me think a lot. The hunger, usually, doesn&rsquo;t allow me to spend too much time starring into the horizon. Then, I move my gaze to the riverbank under the bridge, where a few groups of young guys and gals always sit and enjoy the river, each other, and their youth. I finally cross the bridge and join them. I sit on the green grass and eat. I can&rsquo;t really notice the color of the grass because of how the lack of sun makes the setting under the bridge a bit dark â€” I know that it&rsquo;s green, though. It&rsquo;s surprisingly quiet here; the people chilling at the riverbank do not make much noise. I really enjoy that evening routine; the routine I&rsquo;ve been sticking during the last three weeks that I had to spend in Kyoto.</p>
<p>That&rsquo;s what I usually do, but not today. Today, I&rsquo;ve received a message. A message that means the plan is in motion, a message that means &ldquo;no onigiri today,&rdquo; and that I really need to hurry up. I direct my stare to the top of the laptop screen; it is T minus forty-seven minutes. I have to act fast. I grab my backpack and slide the laptop into one of its compartments with a single precise motion. Everything else is already packed; I&rsquo;ve been preparing for this to happen. I stand up, ready to leave, and look around a small room that I have called home for the past three weeks. It is a small, simple room with barely enough space for a single bed, two stools, and a journal table so small that it can be mistaken for a stool. The light of the evening shines at the table through a window. &ldquo;Goodbye, home,&rdquo; I say quietly to a huge blue kimono decorating the wall behind the bed â€” a ridiculous detail that I somehow learned to ignore. I walk out of the room while keeping my head low to avoid hitting the door frame â€” it can be an extremely painful experience, trust me. My flatmate isn&rsquo;t at home. That&rsquo;s good, that spares me an unnecessary conversation. I lock the door and leave the key in the mailbox on my way out. I check the watch; I&rsquo;m six minutes ahead of schedule. It has started, and I better get ready.</p>
 ]]>
        </content:encoded>

    </item>
    
    <item>
      <title><![CDATA[ Morning ]]></title>
      <description><![CDATA[ You woke up, the summer sun ruthlessly frying you through the window blinds. You slowly open your eyes to find out that the white sheet you were supposed to cover yourself with is a messy waistband. ]]></description>
      <link>https://mikhalevi.ch/morning/</link>
      <guid>https://mikhalevi.ch/morning/</guid>

      
          <category><![CDATA[ Creative Writing ]]></category>
        
      <dc:creator><![CDATA[ Yurij Mikhalevich ]]></dc:creator>
      <pubDate>Sat, 27 Jun 2020 06:52:00 +0000</pubDate>

      <media:content url="https://mikhalevi.ch/morning/featured_hubfc3c3f20f2fa513a943f74f9b3469ee_251753_050ba30bd33d6f09283ba474df06e443.webp" medium="image"/>
        <content:encoded>
          <![CDATA[ <img src="https://mikhalevi.ch/morning/featured_hubfc3c3f20f2fa513a943f74f9b3469ee_251753_050ba30bd33d6f09283ba474df06e443.webp" alt="Morning"><p>You woke up, the summer sun ruthlessly frying you through the window blinds. You slowly open your eyes to find out that the white sheet you were supposed to cover yourself with is a messy waistband. You close your eyes and open them one more time to double-check that it&rsquo;s actually morning. &ldquo;Ok, Google, what&rsquo;s time is it?&rdquo; you ask. &ldquo;It&rsquo;s six-fourteen AM.&rdquo; Precisely sixteen minutes before the alarm is due. You roll over to the edge of the bed and sit yourself down in one smooth motion. You find your slippers without looking and proceed with the routine by walking towards the bathroom.</p>
<p>You open a white wooden door and turn on the light. The light is bright and cold and contributes a lot to helping you wake up, but you are not very happy about it right now. At the moment, you wish you would have installed dim, warm lights here â€” anything instead of these incredibly bright cold lights. You approach the sink and look at the reflection of yourself in the mirror cabinet. After a long second, you turn the faucet knob, fold your hands, pour some cool water in them, and wash your face. Woof! This is refreshing. Now you feel much better. The cold bathroom light is suddenly much more tolerable, probably, because you&rsquo;ve come closer to its temperature. You look at yourself one more time as you open the cabinet door to get the toothbrush and toothpaste. You hold the toothbrush in an ideal horizontal line and squeeze out a bit of toothpaste on its bristles. Then, you water the toothpaste a little and start brushing your teeth. You are fast and precise, you are not leaving any spot, any gap, untouched. Less than two minutes have passed, and you are done.<br>
You are in the kitchen when you pour some water into the electric kettle, and wait for it to boil. It boils fast; the kettle is brand-new and very efficient, but it feels like forever. Of course, it does; everything feels like forever to you. You want to move faster; you want to do more; you are as demanding to everything and everyone as you are to yourself.</p>
<p>Finally, the kettle boils and turns itself off. You take it off and pour some water into the cup with a teabag of good green tea. You prepared the cup right after you put the kettle to boil, and immediately before it had started to feel like the kettle was inexplicably slow at doing its job. You can&rsquo;t tell which tea it is since you didn&rsquo;t pay attention to which one you had taken, but you are sure that it&rsquo;s green and good; this is the only kind of tea you can find at home. You put a teaspoon of honey into the drink and stir. You taste it, put it down, and, after a slight hesitation, add another spoon of honey. It is now perfect. You are ready to move away from the kitchen, satisfied.</p>
<p>&ldquo;You know that time never sleepsâ€¦,&rdquo; shouts your morning alarm with the words of a random song from your playlist. A song that you like but will never be able to remember if asked to do so. It startled you quite seriously and forcefully pulled you out of your train of thought. &ldquo;Ok, Google, stop!&rdquo; you immediately shout in response. The day has officially started. It&rsquo;s time to get things done.</p>
 ]]>
        </content:encoded>

    </item>
    
    <item>
      <title><![CDATA[ An Arrow ]]></title>
      <description><![CDATA[ He stretched his elbow backward a bit further from the bow, and the tension in the bowstring increased noticeably. A red synthetic string cut deep into his fingers, causing a few micro-fractures to appear on the skin. ]]></description>
      <link>https://mikhalevi.ch/an-arrow/</link>
      <guid>https://mikhalevi.ch/an-arrow/</guid>

      
          <category><![CDATA[ Creative Writing ]]></category>
        
      <dc:creator><![CDATA[ Yurij Mikhalevich ]]></dc:creator>
      <pubDate>Mon, 08 Jun 2020 17:05:00 +0000</pubDate>

      <media:content url="https://mikhalevi.ch/an-arrow/featured_hu99ab758145233b1c4e28fc649b66c877_239612_a989b03ea99641741d57a6f579f31d9c.webp" medium="image"/>
        <content:encoded>
          <![CDATA[ <img src="https://mikhalevi.ch/an-arrow/featured_hu99ab758145233b1c4e28fc649b66c877_239612_a989b03ea99641741d57a6f579f31d9c.webp" alt="An Arrow"><p>He stretched his elbow backward a bit further from the bow, and the tension in the bowstring increased noticeably. A red synthetic string cut deep into his fingers, causing a few micro-fractures to appear on the skin. The archer pulled the bowstring a little bit more and let his grip go. All of the power accumulated in the bowstring, immediately launched an extremely lightweight carbon arrow forward, it rushed driven by the pressure passed to it from the bowstring. One of the feathers sliced the tip of the archer&rsquo;s index finger. The arrow cut through the air with its pointed head. It was barely visible, wobbling and racing towards the bullseye. The archer moved his gaze to his finger; it had been deeply cut by the feather.</p>
<p>A drop of dark red blood started to slowly form at the lower side of his index finger. It quickly grew in size, lengthened, being pulled down by gravity towards the archer&rsquo;s feet. In a moment, the drop lost its grasp of his finger and started the fall to the ground. The archer moved his head following the drop as it hurled down. The drop hit an old brown leaf with an almost inaudible splash sound and spread across the leaf veins. The archer fixed his gaze on the leaf, exploring how the single drop interacted with the leaf. And, at the exact same moment, he heard a loud and distinct sound of an arrow hitting the target. He instantly moved the gaze back towards the shooting target and opened his eyes and mouth wide in awe. The arrow had just hit the bullseye. The archer lowered his arms, relaxed his posture, and dropped his dark redwood bow in relief. He finally hit the bullseye.</p>
 ]]>
        </content:encoded>

    </item>
    
    <item>
      <title><![CDATA[ A Trade ]]></title>
      <description><![CDATA[ &ldquo;Did you bring it?&rdquo; said a familiar voice.
&ldquo;We have what you requested,&rdquo; a cold, inhumane voice slowly responded. &ldquo;Did you deliver on your part of the agreement?&rdquo;
&ldquo;Sure, I did. ]]></description>
      <link>https://mikhalevi.ch/a-trade/</link>
      <guid>https://mikhalevi.ch/a-trade/</guid>

      
          <category><![CDATA[ Creative Writing ]]></category>
        
      <dc:creator><![CDATA[ Yurij Mikhalevich ]]></dc:creator>
      <pubDate>Mon, 23 Mar 2020 14:03:00 +0000</pubDate>

      <media:content url="https://mikhalevi.ch/a-trade/featured_huc0b3d8fa93bb53daeb0145157f929e24_88163_d6cc5262613e4bf853ffcc795e4861c2.webp" medium="image"/>
        <content:encoded>
          <![CDATA[ <img src="https://mikhalevi.ch/a-trade/featured_huc0b3d8fa93bb53daeb0145157f929e24_88163_d6cc5262613e4bf853ffcc795e4861c2.webp" alt="A Trade"><p>&ldquo;Did you bring it?&rdquo; said a familiar voice.</p>
<p>&ldquo;We have what you requested,&rdquo; a cold, inhumane voice slowly responded. &ldquo;Did you deliver on your part of the agreement?&rdquo;</p>
<p>&ldquo;Sure, I did. Still, I don&rsquo;t understand why you may need this.&rdquo;</p>
<p>I slowly peeked around the corner and was shocked by what I saw. The captain of the ship is making a deal with one of the aliens, with one of the invaders!</p>
<p>I asked myself, &ldquo;Who would&rsquo;ve thought that they could speak English this well.&rdquo;</p>
<p>&ldquo;We don&rsquo;t expect you to understand. You only had to deliver.&rdquo;</p>
<p>A sudden sound of something small hitting the metal floor startled me. I quickly hid behind the wall.</p>
<p>&ldquo;Shit! Where did I drop it?&rdquo;</p>
<p>I heard some noise but didn&rsquo;t dare to look.</p>
<p>&ldquo;Here it is. Sorry about that, please, take it.&rdquo;</p>
<p>As I listened in, I heard a noise of a docking gate opening and closing. &ldquo;You humans can be adorably clumsy. I&rsquo;m surprised how you managed to hold your ground against us for so long.&rdquo;</p>
<p>It was quiet for a while.</p>
<p>I turned my sight around the corner and saw that the captain was standing there alone. &ldquo;What is he waiting for?&rdquo;</p>
<p>Not seeing the alien made me anxious. A chill ran through my spine. I had that weird, suspenseful, horror-like sensation of doubting whether the alien was behind me now. I slowly turned my head. No one was there, just a clean empty corridor.</p>
<p>The sound of the docking gate opening directed my head towards the captain again. The alien was back with a black bag the size of a bottle of whiskey. It looked heavy for its size.</p>
<p>&ldquo;Here is your payment, human. As agreed.&rdquo;</p>
<p>The captain briefly looked inside the bag. &ldquo;Good, good.&rdquo;</p>
<p>The alien silently moved back through the docking gate. A slight vibration made it clear that the alien ship had de-docked. It looked like the captain registered this too. Suddenly he became very relieved. And, with the threat of the alien threat, I became furious with the captain.</p>
<p>Without thinking, I ran towards him and punched him in the face. &ldquo;Why did you make deals with aliens?!&rdquo;</p>
<p>The captain was surprised and wasn&rsquo;t able to react. He moved back, almost falling behind. The bag he received from the alien dropped to the floor. Beautiful, crystal clear rocks of different sizes were scattered across the floor.</p>
<p>&ldquo;And for what? For a bunch of diamonds?! You ignorant fool! What did you give them?&rdquo;</p>
<p>He stood up and cleaned up the blood from his mouth.</p>
<p>&ldquo;You&rsquo;ll see.&rdquo;</p>
<p>He took out a small remote control with a single button. My eyes widened.</p>
<p>&ldquo;What&rsquo;s that? Don&rsquo;t make any moves, or I&rsquo;ll shoot you.&rdquo;</p>
<p>My hands went for the gun. I took a step back.</p>
<p>&ldquo;Calm down. I&rsquo;ll explain everything. You shouldn&rsquo;t have seen this.&rdquo;</p>
<p>I pointed the gun to his chest. He raised his arms above his head.</p>
<p>&ldquo;Listen, boy.&rdquo;</p>
<p>&ldquo;Jared, my name is Jared.&rdquo;</p>
<p>&ldquo;Listen, Jared, I will explain everything to you. But you have to trust me.&rdquo;</p>
<p>&ldquo;Shut up! I&rsquo;ve heard enough. Put the remote slowly on the floor. Keep your other hand in the air. Do it! Or I&rsquo;ll shoot you!&rdquo;</p>
<p>&ldquo;Calm down, Jared. We don&rsquo;t have much time.&rdquo;</p>
<p>The captain took a step towards me and tried to grab the gun in one smooth motion. The plasma from my gun burned his shoulder as I panicked and pulled the trigger. He involuntarily screamed and fell to the floor. The air was filled with the smell of burned flesh. But he was still holding the remote and looking at his wrist computer. He was checking something!</p>
<p>&ldquo;It&rsquo;s time.&rdquo;</p>
<p>The captain pressed the button on the remote and passed out.</p>
<p>A few seconds passed in complete silence before my wrist computer alerted me of an explosion wave hitting our station. The wave was of minor power, nothing to worry about. Another fact was brought to my attention. According to the computations, the epicenter of the explosion was somewhere behind the enemy lines.</p>
<p>&ldquo;The explosion should&rsquo;ve been huge.&rdquo;</p>
 ]]>
        </content:encoded>

    </item>
    
    <item>
      <title><![CDATA[ The Writer ]]></title>
      <description><![CDATA[ The guy sitting at the window in a coffee shop on the corner of Church Street and Left Side Street got up from his table to get the order. The pen that he dropped, when standing up, rolled to the edge of the small, wooden square table and stopped there, demonstrating quite distinct bite marks around the barrel. ]]></description>
      <link>https://mikhalevi.ch/the-writer/</link>
      <guid>https://mikhalevi.ch/the-writer/</guid>

      
          <category><![CDATA[ Creative Writing ]]></category>
        
      <dc:creator><![CDATA[ Yurij Mikhalevich ]]></dc:creator>
      <pubDate>Thu, 19 Mar 2020 09:15:00 +0000</pubDate>

      <media:content url="https://mikhalevi.ch/the-writer/featured_hu2eb45d36141b01f4048c4e080c694089_137995_f758349b8a1865fee4928f36c8e49e33.webp" medium="image"/>
        <content:encoded>
          <![CDATA[ <img src="https://mikhalevi.ch/the-writer/featured_hu2eb45d36141b01f4048c4e080c694089_137995_f758349b8a1865fee4928f36c8e49e33.webp" alt="The Writer"><p>The guy sitting at the window in a coffee shop on the corner of Church Street and Left Side Street got up from his table to get the order. The pen that he dropped, when standing up, rolled to the edge of the small, wooden square table and stopped there, demonstrating quite distinct bite marks around the barrel.</p>
<p>The guy was writing something, but the notebook was left on the blank page, like he either doesn&rsquo;t want to risk anyone occasionally looking at his work, or wants to start with a blank page when he gets back. There is visible steam coming from a large, almost full teacup waiting for the &ldquo;writer&rdquo; beside the notebook near a small plate hosting a few bites left of an almond donut. There is no way not to notice a ridiculously massive amount of used napkins covered in donut frosting lying all over the table; some of them tucked under the plate. Two empty creamer tubs are hiding in a small pile of napkins behind the cup. The dark gray long coat is hanging on the backrest of the chair, opposite to the one the &ldquo;writer&rdquo; just left.</p>
<p>Oh! And there is also a large black backpack carelessly tucked under the table. A charger cable is leading from inside of one of the backpack compartments to the table, but the guy took the phone with him, so, now, the cable&rsquo;s connector is lying freely on the table, waiting for a small pool of spilled tea slowly creeping towards it. Fortunately, the notebook is in the other direction.</p>
<p>Wait! The pool has met one of the napkins and is now being consumed by it; it looks as if the cable avoided the risky encounter this time. Now the &ldquo;writer&rdquo; is back with more donuts.</p>
<p>Perhaps we should leave him alone with his work.</p>
 ]]>
        </content:encoded>

    </item>
    
    <item>
      <title><![CDATA[ Always a Race ]]></title>
      <description><![CDATA[ I set the spaceship on course to the universe&rsquo;s most delicious edible and maxed out the engines. &ldquo;Treat of the ages, here I come.&rdquo; I had been waiting for it long enough. ]]></description>
      <link>https://mikhalevi.ch/always-a-race/</link>
      <guid>https://mikhalevi.ch/always-a-race/</guid>

      
          <category><![CDATA[ Creative Writing ]]></category>
        
      <dc:creator><![CDATA[ Yurij Mikhalevich ]]></dc:creator>
      <pubDate>Fri, 27 Dec 2019 14:16:00 +0000</pubDate>

      <media:content url="https://mikhalevi.ch/always-a-race/featured_hu1e2514420d2fc725d295e1b3173fe798_435207_16bcc54a2e229d4494dea4cde72d0bd5.webp" medium="image"/>
        <content:encoded>
          <![CDATA[ <img src="https://mikhalevi.ch/always-a-race/featured_hu1e2514420d2fc725d295e1b3173fe798_435207_16bcc54a2e229d4494dea4cde72d0bd5.webp" alt="Always a Race"><p>I set the spaceship on course to the universe&rsquo;s most delicious edible and maxed out the engines. &ldquo;Treat of the ages, here I come.&rdquo; I had been waiting for it long enough.</p>
<p>&ldquo;What&rsquo;s up? Are you down for a race?&rdquo; â€” The communicator went alive.</p>
<p>&ldquo;It looks like he got the coordinates too,&rdquo; I thought to myself while tracing his coordinates. &ldquo;Shut up, Eddie. You are parsecs behind me; keep dreaming.&rdquo;</p>
<p>&ldquo;We&rsquo;ll see,&rdquo; â€” I heard a familiar noise of his Marta&rsquo;s boost engine starting up.</p>
<p>&ldquo;Did you get your hands on that illegal fuel? I&rsquo;m impressed.&rdquo;</p>
<p>&ldquo;You don&rsquo;t know the half of it. This is going to be interesting!&rdquo;</p>
<p>I have never allowed Eddie to get the best of me, and I am not going to start today. &ldquo;Marcus, look for shortcuts, ignore safety restrictions,&rdquo; I commanded the computer.</p>
<p>&ldquo;I have found a faster route through Amanda&rsquo;s asteroid belt that will save six hours and twenty-four minutes. New ETA is in fifteen hours, forty-seven minutes. Do you want to follow it?&rdquo; â€” The computer responded immediately.</p>
<p>&ldquo;Yes. Go for it,&rdquo; I replied.</p>
<p>&ldquo;This will make sure that Eddie will never catch up with me,&rdquo; I thought to myself as I smiled.</p>
<p>&ldquo;Reaching the asteroid belt in 30 minutes,&rdquo; Marcus roughly interrupted my nap. &ldquo;Please, move to the pilot seat and be prepared to use the manual control.&rdquo;</p>
<p>&ldquo;Did it kick in?&rdquo; â€” Eddie interrupted.</p>
<p>&ldquo;What? What are you talking about?&rdquo; Then I felt a sudden, painful sensation in my stomach. &ldquo;Ahhh!&rdquo;</p>
<p>&ldquo;About time,&rdquo; Eddie commented. &ldquo;Do you remember that smoothie we drank at the port?&rdquo;</p>
<p>&ldquo;Crap! You poisoned me, you sleazy bastard!&rdquo;</p>
<p>&ldquo;Yeah. FYI, you have 24 hours to live,&rdquo; Eddie chuckled. &ldquo;Ask Marcus if you don&rsquo;t believe me. The antidote is at the port in a storage box under your name. You can still get to it in time if you turn around.&rdquo;</p>
<p>I disabled the communicator and injected myself with a painkiller shot I grabbed from the medicine compartment. &ldquo;Marcus, full power to the engines,&rdquo; I said while engaging the manual control mode.</p>
<p>Maneuvering through asteroids wasn&rsquo;t as stressful as I anticipated. I had already crossed about two-thirds of the belt when I was blinded by a bright explosion by mine right. Marcus immediately traced the rocket that caused the explosion and zoomed in on it. &ldquo;The last thing I need right now,&rdquo; I noticed a familiar emblem, &ldquo;is for some jockeys to prank around here with rockets!&rdquo; Right this second, I saw an asteroid fragment flying at me. &ldquo;Shit! I&rsquo;m still in manual mode!&rdquo; I turned the ship to the direction perpendicular to the rock trajectory and&hellip; impact.</p>
<p>Marcus tried to stabilize the ship. &ldquo;Engine damaged. Overriding manual mode. Engaging in safety protocol.&rdquo;</p>
<p>The right engine was damaged. I activated the service bot to assess the severity. The driver was slightly misplaced, I moved the bot inside and explored the contact panel. It looked fine except for one damaged wire leading from the driver. &ldquo;Cheap Martian tech!&rdquo; After quickly patching it, I ran the driver self-diagnostic and let the bot to examine and fix external damage in autonomous mode.</p>
<p>&ldquo;Self-diagnostic tests passed successfully. Driver re-calibrated to compensate for displacement,&rdquo; Marcus reported shortly.</p>
<p>&ldquo;Get me out of here, Marcus,&rdquo; I said and passed out of pain and exhaustion.</p>
<p>&ldquo;You have reached your destination,&rdquo; Marcus announced, waking me up.</p>
<p>The pain moved from my stomach to my head, but was bearable; I injected myself with another shot of painkiller. &ldquo;Marcus, look for an ARC-5 object, collect it, validate, and serve, as usual.&rdquo; Retrieving the edible didn&rsquo;t take long. In a few minutes, I was looking at the table served with wine and a weird gooey mass as the main dish. One bite and striking pain forced my spine to bend. I fell to the floor. &ldquo;The edible is a catalyst for the poison! Oh, Eddie, you don&rsquo;t want to know what is coming for you next time.&rdquo; I laughed, crashed the consciousness backup capsule, and died. Again.</p>
 ]]>
        </content:encoded>

    </item>
    
    <item>
      <title><![CDATA[ When We Were Orphans by Kazuo Ishiguro ]]></title>
      <description><![CDATA[ TL;DR: 8/10. I like the book; it is a captivating story written in a fantastic style, which I completely fell in love with! There are a few weird moments in the second part of the book, but they can be perceived realistically, depending on your perspective. ]]></description>
      <link>https://mikhalevi.ch/when-we-were-orphans-by-kazuo-ishiguro/</link>
      <guid>https://mikhalevi.ch/when-we-were-orphans-by-kazuo-ishiguro/</guid>

      
          <category><![CDATA[ Books ]]></category>
        
      <dc:creator><![CDATA[ Yurij Mikhalevich ]]></dc:creator>
      <pubDate>Thu, 05 Dec 2019 06:39:00 +0000</pubDate>

      <media:content url="https://mikhalevi.ch/when-we-were-orphans-by-kazuo-ishiguro/featured_hu78800c1f8bf6e4ed077efc3c6931fbab_395047_85349868a158c9612eec692235008854.webp" medium="image"/>
        <content:encoded>
          <![CDATA[ <img src="https://mikhalevi.ch/when-we-were-orphans-by-kazuo-ishiguro/featured_hu78800c1f8bf6e4ed077efc3c6931fbab_395047_85349868a158c9612eec692235008854.webp" alt="When We Were Orphans by Kazuo Ishiguro"><p><strong>TL;DR:</strong> 8/10. I like the book; it is a captivating story written in a fantastic style, which I completely fell in love with! There are a few weird moments in the second part of the book, but they can be perceived realistically, depending on your perspective. Also, the climax of the novel truly deserves a &ldquo;what a twist&rdquo; meme reaction :-D</p>
<blockquote>
<p>I think it would be no bad thing if boys like you all grew up with a bit of everything. We might all treat each other a good deal better then. Be less of these wars for one thing. Oh yes. Perhaps one day, all these conflicts will end, and it wonâ€™t be because of great statesmen or churches or organisations like this one. Itâ€™ll be because people have changed. Theyâ€™ll be like you, Puffin. More a mixture. So why not become a mongrel? Itâ€™s healthy.</p>
</blockquote>
<p>The author tells us the story of a boy named Christopher, who spends his childhood in Shanghai, loses his parents under mysterious circumstances, and grows up with his aunt in London to become a successful and renowned detective. That was a summary of the first half of the book. The second half, or more precisely, the last third of the book starts with Christopher moving to Shanghai to once and for all finally close his parents&rsquo; case, and, hopefully, find them. By that time, he gathered all the evidence he thinks he needs, and, most importantly, enough confidence to finish the mission that is about to bring quite a few surprises and reunite him with a childhood friend.</p>
<blockquote>
<p>â€œI can see it might look that way. At least to someone observing me with a cynical eye.â€ â€œI hope I donâ€™t observe you in that way. It would upset me to think I did so.â€</p>
</blockquote>
<p>The number one thing I love about the book is the author&rsquo;s style. It makes me want to read his other books. I also like the plot and that the story develops along two different timelines in parallel to each other for most of the book. I enjoyed the &ldquo;detective&rdquo; aspect of the book. In addition, it is interesting, and adds to the story a lot, that the author touches the subject of the Second Sino-Japanese War and the implications it had. Furthermore, I like a lot of small scenes through the book due to the combination of style and story.</p>
<blockquote>
<p>Here, in other words, at the heart of the maelstrom threatening to suck in the whole of the civilised world, is a pathetic conspiracy of denial; a denial of responsibility which has turned in on itself and gone sour, manifesting itself in the sort of pompous defensiveness I have encountered so often. And here they now were, the so-called elite of Shanghai, treating with such contempt the suffering of their Chinese neighbours across the canal.</p>
</blockquote>
<p>What I don&rsquo;t like about the book is a few weird moments in the last third part of it, which made me question Christopher&rsquo;s sanity. However, maybe it was the intention of the author. Also, the main plot twist was unexpected and didn&rsquo;t resonate with the mood of the book for me.</p>
<p>Overall, the book is a great entertaining read; the style is fantastic, and I recommend it!</p>
 ]]>
        </content:encoded>

    </item>
    
    <item>
      <title><![CDATA[ This is Me ]]></title>
      <description><![CDATA[ Once, when I was about six years old, I found myself looking inside a tube of super glue. The thing is, I was curious about how it can work so well. ]]></description>
      <link>https://mikhalevi.ch/this-is-me/</link>
      <guid>https://mikhalevi.ch/this-is-me/</guid>

      
          <category><![CDATA[ Creative Writing ]]></category>
        
          <category><![CDATA[ Beyond ]]></category>
        
      <dc:creator><![CDATA[ Yurij Mikhalevich ]]></dc:creator>
      <pubDate>Sat, 30 Nov 2019 09:56:00 +0000</pubDate>

      <media:content url="https://mikhalevi.ch/this-is-me/featured_huf5623e3b39edee3341e7714c9d85bbe6_111321_2110c2405553c98dc6e59f795349d006.webp" medium="image"/>
        <content:encoded>
          <![CDATA[ <img src="https://mikhalevi.ch/this-is-me/featured_huf5623e3b39edee3341e7714c9d85bbe6_111321_2110c2405553c98dc6e59f795349d006.webp" alt="This is Me"><p>Once, when I was about six years old, I found myself looking inside a tube of super glue. The thing is, I was curious about how it can work so well. I wasn&rsquo;t able to figure out much by peeking inside, so I decided to squeeze some glue out in order to examine it closer. I pressed the tube while holding it in front of my face, the glue erupted towards my mouth &hellip;and glued my lips together. I panicked. I didn&rsquo;t know what else to do, so I ran to my grandma â€” I was staying alone with her that day. My grandma cleaned up my mouth and hid the glue on the very top shelf of the tall wardrobe. This is not the end of the story. Neither the incident nor the present location of the glue was enough to stop my curiosity. After I waited for some time and made sure that grandma was busy in the kitchen, cooking something delicious for me like she usually did, I expertly constructed a ladder by putting one wooden stool on top of another. And, in a short while, I continued the ever so important study. Once again, I applied pressure to the tube, and, this time, I glued one of my eyelids shut. My grandma saved the day once again. Thanks to the blink reflex, I didn&rsquo;t get any glue in my eye. But, to be safe, she called my dad to take me to the doctor. The doctor cleaned up my eye using some mixture and made me an incredibly cool eye-patch as the one actual pirates had!</p>
 ]]>
        </content:encoded>

    </item>
    
    <item>
      <title><![CDATA[ Into the Night ]]></title>
      <description><![CDATA[ Mike, the hedgehog, was out late evening looking for food. It was getting dark too fast, almost like someone was playing a trick on him. He was afraid of the darkness. ]]></description>
      <link>https://mikhalevi.ch/into-the-night/</link>
      <guid>https://mikhalevi.ch/into-the-night/</guid>

      
          <category><![CDATA[ Creative Writing ]]></category>
        
      <dc:creator><![CDATA[ Yurij Mikhalevich ]]></dc:creator>
      <pubDate>Tue, 26 Nov 2019 18:20:00 +0000</pubDate>

      <media:content url="https://mikhalevi.ch/into-the-night/featured_hu825a7db99107c60e9f6ff66f3ae6634f_641415_cb8ff965f1888110ea801eb488da21b7.webp" medium="image"/>
        <content:encoded>
          <![CDATA[ <img src="https://mikhalevi.ch/into-the-night/featured_hu825a7db99107c60e9f6ff66f3ae6634f_641415_cb8ff965f1888110ea801eb488da21b7.webp" alt="Into the Night"><p>Mike, the hedgehog, was out late evening looking for food. It was getting dark too fast, almost like someone was playing a trick on him. He was afraid of the darkness. &ldquo;Darkness is uncertainty; darkness can hide all kinds of threats, like this tiger sitting in the tree â€” oh, it is just a carving someone made on a hike, how barbarously,&rdquo; - came through the hedgehog&rsquo;s mind. Suddenly, his train of thought was interrupted by a crow&rsquo;s cry, and then he heard another, and another. &ldquo;It sounds like there is a murder,&rdquo; - Mike says to himself, too quiet, almost like he is afraid of the sound of his voice. He cannot pretend that he does not hear this. A chill went up through the hedgehog&rsquo;s spine â€” another &ldquo;kraa&rdquo; rings through the air. Mike considered returning to his warm nest, and, after a short period of hesitation, decided that his hunger is stronger than his fear of crows, darkness, and whatever other filthy omens can be hiding in the woods.</p>
<p>&ldquo;Just an apple, or maybe a mushroom,&rdquo; - the hedgehog keeps repeating to himself, trying to focus on the task at hand. He draws upon his memory, reassuring himself with past instances of all the times he was out at night looking for food, and how nothing had happened to him. He expects to find these thoughts comforting, but instead obsesses over everything that could&rsquo;ve happened to him, like that one with the cage. The time when he almost got caught. &ldquo;Hey, who do we have here?&rdquo; - Mike&rsquo;s reliving of the cage incident was interrupted by a voice too close and too loud for comfort. The hedgehog felt like the air explode around him. Then, an unbearably bright light blinded him.</p>
 ]]>
        </content:encoded>

    </item>
    
    <item>
      <title><![CDATA[ Alita: Battle Angel ]]></title>
      <description><![CDATA[ TL;DR: 7/10. Alita is an OK movie. Stunning visual, a few good actors, and a fine story.
Being familiar with some live-action anime adaptations (awful Netflix&rsquo;s Death Note comes to mind immediately), I haven&rsquo;t been expecting much from this one. ]]></description>
      <link>https://mikhalevi.ch/alita-battle-angel/</link>
      <guid>https://mikhalevi.ch/alita-battle-angel/</guid>

      
          <category><![CDATA[ What to Watch ]]></category>
        
      <dc:creator><![CDATA[ Yurij Mikhalevich ]]></dc:creator>
      <pubDate>Fri, 15 Nov 2019 16:25:00 +0000</pubDate>

      <media:content url="https://mikhalevi.ch/alita-battle-angel/featured_hu43054b6854a8de26bb8c4e10d6d54451_340396_78cf184afda73e5a3275b7b7fe65ef07.webp" medium="image"/>
        <content:encoded>
          <![CDATA[ <img src="https://mikhalevi.ch/alita-battle-angel/featured_hu43054b6854a8de26bb8c4e10d6d54451_340396_78cf184afda73e5a3275b7b7fe65ef07.webp" alt="Alita: Battle Angel"><p><strong>TL;DR:</strong> 7/10. Alita is an OK movie. Stunning visual, a few good actors, and a fine story.</p>
<p>Being familiar with some live-action anime adaptations (awful Netflix&rsquo;s Death Note comes to mind immediately), I haven&rsquo;t been expecting much from this one. And, perhaps, my lowered expectations are the reason that I&rsquo;ve enjoyed the movie.</p>
<p>If you are expecting deepness and rich story, this movie will leave you disappointed. The film is your typical action-centered show, with good visuals, and almost only enough of the plot to move the action forward.<br>
The characters are likable, but there is a feeling that some of them haven&rsquo;t received enough screen time for us to understand them and the changes in them properly.</p>
<p>Christopher Waltz is an awesome <del>Gepetto</del> Dr. Ido. Rosa Salazar is a nice Alita. Big anime-like eyes is a controversial decision, but they do not spoil the impression at all. If anything, they help you to accept the artificial essence of the drama we are being presented with and to forgive some plot issues. The details and quality of the CGI in this movie is impressive. It definitely creates most of the attractiveness of this movie. All the techie stuff looks smooth and impressive too.</p>
<p>Summing up, I recommend the movie. It is pretty binge-worthy, it will look perfect on a big screen (this is what it was filmed for! - to be watched on a big screen), and it is a great party movie.</p>
 ]]>
        </content:encoded>

    </item>
    
    <item>
      <title><![CDATA[ On Learning Languages ]]></title>
      <description><![CDATA[ A continuation of my previous post, &ldquo;Why do I write?&rdquo;.
I&rsquo;m excited about learning languages.
Learning new languages is an incredibly useful exercise for your brain that expands your horizons, familiarizes you with different cultures, with different ways of thinking. ]]></description>
      <link>https://mikhalevi.ch/on-learning-languages/</link>
      <guid>https://mikhalevi.ch/on-learning-languages/</guid>

      
          <category><![CDATA[ Beyond ]]></category>
        
      <dc:creator><![CDATA[ Yurij Mikhalevich ]]></dc:creator>
      <pubDate>Wed, 13 Nov 2019 17:44:00 +0000</pubDate>

      <media:content url="https://mikhalevi.ch/on-learning-languages/featured_hu0b9fc4767aa12bce605c0d4578bfebe7_248657_863adba42bf878e14f5ef1e34227e2b2.webp" medium="image"/>
        <content:encoded>
          <![CDATA[ <img src="https://mikhalevi.ch/on-learning-languages/featured_hu0b9fc4767aa12bce605c0d4578bfebe7_248657_863adba42bf878e14f5ef1e34227e2b2.webp" alt="On Learning Languages"><p>A continuation of my previous post, <a href="https://mikhalevi.ch/why-do-i-write/">&ldquo;Why do I write?&rdquo;</a>.</p>
<p>I&rsquo;m excited about learning languages.</p>
<p>Learning new languages is an incredibly useful exercise for your brain that expands your horizons, familiarizes you with different cultures, with different ways of thinking. By studying how language evolved, you can explore how knowledge and thinking evolved. By studying the etymology of similar words from different languages, you may find how this word is perceived in different cultures, and surprise yourself a lot with how structurally similar are a lot of, at first sight, completely different words.</p>
<p>We use languages every day. And it is truly amazing how they affect us, how they almost imperceptibly shape the way we think, and how the way we think shapes them. I&rsquo;m talking not only about languages. I&rsquo;m also talking about dialects, subcultures&rsquo; slang, and professional jargon.</p>
<p>When thinking about languages and the thought process, one may argue that we are thinking in images, not in words. I tend to agree that it&rsquo;s right in general, but how many images you can think of without naming or describing them? And learning languages is like discovering shortcuts to the new images, new ways of expressing them, working with them, and perceiving them. And an amazing thing happens when you start to combine shortcuts you&rsquo;ve learned from different languages.</p>
<p>To sum it all up, I&rsquo;ll say that, most importantly, learning foreign languages allows you to understand people better. Even when you speak in your native language.</p>
 ]]>
        </content:encoded>

    </item>
    
    <item>
      <title><![CDATA[ Why Do I Write? ]]></title>
      <description><![CDATA[ I write this blog to improve my English. Simple as that.
I&rsquo;m a native Russian speaker, heavily invested in learning English, C1 level certified. For a few recent years, I&rsquo;ve been consuming all media - movies, shows, books, articles, etc. ]]></description>
      <link>https://mikhalevi.ch/why-do-i-write/</link>
      <guid>https://mikhalevi.ch/why-do-i-write/</guid>

      
          <category><![CDATA[ Beyond ]]></category>
        
      <dc:creator><![CDATA[ Yurij Mikhalevich ]]></dc:creator>
      <pubDate>Sun, 10 Nov 2019 09:56:00 +0000</pubDate>

      <media:content url="https://mikhalevi.ch/why-do-i-write/featured_hu8b2b3c46acb57a06939419350d618cef_410986_798e41243cb45b3a3ca4d97e8413720e.webp" medium="image"/>
        <content:encoded>
          <![CDATA[ <img src="https://mikhalevi.ch/why-do-i-write/featured_hu8b2b3c46acb57a06939419350d618cef_410986_798e41243cb45b3a3ca4d97e8413720e.webp" alt="Why Do I Write?"><p>I write this blog to improve my English. Simple as that.</p>
<p>I&rsquo;m a native Russian speaker, heavily invested in learning English, C1 level certified. For a few recent years, I&rsquo;ve been consuming all media - movies, shows, books, articles, etc. - exclusively in English. In addition to that, I continuously have speaking practice, and a blog could be a great way to top it off with some writing practice, which is more than text communication.</p>
<p>As a side note, I&rsquo;m excited about learning languages, know a little bit of French and German, and in love with English. My ultimate goal is to be able to maintain a deep, existential conversation in Eglish as easily as I can in Russian :-D</p>
<p>Why write a public blog then, you may ask. Writing public posts comes with extra responsibilities compared to writing a private journal. These responsibilities include, but are not limited to:</p>
<ul>
<li>being extremely accurate with grammar and punctuation</li>
<li>caring about clearly communicating your thoughts</li>
<li>caring about writing well-structured and engaging texts</li>
</ul>
<p>What else can boost my writing skills and deepen my understanding of the language in the same way the responsibilities listed above can do? :-)</p>
<p>All these said, there is no particular theme to this blog. I want to write more and to write well, not to write about a thing. But generally, you can expect discussion or sharing posts, like this one, movie, anime, book reviews (check out my bookshelf), photo sharing, travel logs, maybe some short stories, and, given my professional specialization and life passion being software development and machine learning, a handful of posts dedicated to it.</p>
 ]]>
        </content:encoded>

    </item>
    
    <item>
      <title><![CDATA[ The Red Turtle ]]></title>
      <description><![CDATA[ TL;DR: 10/10. Unique and captivating, visually stunning, beautiful wordless story about the existential loneliness, relationships, family, generations, life, love, aspirations, desires, understanding, - people.
The movie &ldquo;The Red Turtle&rdquo; is neither your average cartoon nor anime. ]]></description>
      <link>https://mikhalevi.ch/the-red-turtle/</link>
      <guid>https://mikhalevi.ch/the-red-turtle/</guid>

      
          <category><![CDATA[ What to Watch ]]></category>
        
      <dc:creator><![CDATA[ Yurij Mikhalevich ]]></dc:creator>
      <pubDate>Sun, 03 Nov 2019 07:38:00 +0000</pubDate>

      <media:content url="https://mikhalevi.ch/the-red-turtle/featured_hu0fa5c81ea2ae356ee1248a182b779653_1295498_cf5f8affa787a97bddc9c6d267364cdc.webp" medium="image"/>
        <content:encoded>
          <![CDATA[ <img src="https://mikhalevi.ch/the-red-turtle/featured_hu0fa5c81ea2ae356ee1248a182b779653_1295498_cf5f8affa787a97bddc9c6d267364cdc.webp" alt="The Red Turtle"><p><strong>TL;DR:</strong> 10/10. Unique and captivating, visually stunning, beautiful wordless story about the existential loneliness, relationships, family, generations, life, love, aspirations, desires, understanding, - people.</p>
<p>The movie &ldquo;The Red Turtle&rdquo; is neither your average cartoon nor anime. It is not your typical Studio Ghibli movie either and not even a Studio Ghibli movie per se. Instead, it&rsquo;s a collaborative work between multiple production companies. Co-written by French and Dutch writers, and produced by Japanese Studio Ghibli, German studio Wild Bunch, and French studio Why Not Productions. Which on its own, makes it a unique piece of art.</p>
<p>The movie has no dialog and relies entirely on visuals and sound to tell the story. They both are beautiful on their own, but they are simply amazing when contributing to such a story.</p>
<p>The story itself starts simple. Still, it becomes richly absorbing as the plot progresses and has a few controversial and ambiguous moments, which, among other things, makes it so good. You&rsquo;ll be presented with one view on the matters of human relationships, life, love, the importance of opening up, being actively understanding and helping. There are a lot of separate, often small, scenes that can be discussed independently, each bringing up a new matter, adding up to an overall impression of the movie. It&rsquo;s also notorious how your perception of the movie shifts with the plot progressing when you are watching it the first time.</p>
<p>Overall, I highly recommend the movie for the beautifully told captivating and kind story about often unseen things everyone can use a reminder about from time to time.</p>
 ]]>
        </content:encoded>

    </item>
    
    <item>
      <title><![CDATA[ Arrival ]]></title>
      <description><![CDATA[ TL;DR: 9/10. Nice science fiction movie about the importance of clear communication and mutual understanding in the context of learning a language. Drama &amp; love substory included.
The movie tells the aliens&rsquo; arrival story, but it&rsquo;s not your typical &ldquo;aliens&rdquo; invasion. ]]></description>
      <link>https://mikhalevi.ch/arrival/</link>
      <guid>https://mikhalevi.ch/arrival/</guid>

      
          <category><![CDATA[ What to Watch ]]></category>
        
      <dc:creator><![CDATA[ Yurij Mikhalevich ]]></dc:creator>
      <pubDate>Thu, 31 Oct 2019 17:13:00 +0000</pubDate>

      <media:content url="https://mikhalevi.ch/arrival/featured_hue291410a05086dde0e1dedccc68a1307_207196_91277073adb795fa73025721c792c90a.webp" medium="image"/>
        <content:encoded>
          <![CDATA[ <img src="https://mikhalevi.ch/arrival/featured_hue291410a05086dde0e1dedccc68a1307_207196_91277073adb795fa73025721c792c90a.webp" alt="Arrival"><p><strong>TL;DR:</strong> 9/10. Nice science fiction movie about the importance of clear communication and mutual understanding in the context of learning a language. Drama &amp; love substory included.</p>
<p>The movie tells the aliens&rsquo; <strong>arrival</strong> story, but it&rsquo;s not your typical &ldquo;aliens&rdquo; invasion. Twelve extraterrestrial spaceships arrive at a set of distant locations across the globe and are just <del>sitting</del> hovering there. Of course, the government agencies of the &ldquo;host&rdquo; countries are closing territories for an investigation. The story centered around an expert linguist researcher Louise Banks who is invited to establish meaningful contact with the newcomers. And it turns out to be a life-changing, perception-shuttering, moving-to-the-new-step-of-evolution contact for both humankind and our heroine. There is a love substory (of course!), it doesn&rsquo;t take too much attention on itself and feels reasonably natural.</p>
<p>On the other hand, I haven&rsquo;t been able to help but notice a few cliches and was sometimes feeling that something is missing or going wrong. It can be a candidate for a CinemaSins episode (actually, there is one). But there is nothing you (I :-)) can&rsquo;t forgive.</p>
<p>I like the mood of the movie.</p>
<p>Being a person captivated by the vastness of space, I like that it&rsquo;s a story about aliens.</p>
<p>I like that it&rsquo;s a story about languages, how they affect how you think and perceive the world. After all, this is one of the reasons I&rsquo;m learning foreign languages and writing this blog - to expand my horizons by improving my English.</p>
<p>I like that it&rsquo;s a story about a terminological misunderstanding, which is often the reason for disagreement between humans â€” an important and valuable question to remind yourself about.</p>
<p>Overall, I recommend the movie. At the very beginning, it creates a very distinctive atmosphere and properly develops it during the following hours.</p>
 ]]>
        </content:encoded>

    </item>
    
    <item>
      <title><![CDATA[ The Humans by Matt Haig ]]></title>
      <description><![CDATA[ TL;DR: 6.5/10. Great start, excellent adventure, great humor (mostly concentrated in the first half of the book), very well written, but an unrealistic and much weaker ending.
Human is a real bipedal life form of midrange intelligence, living a largely deluded existence on a small, waterlogged planet in a very lonely corner of the universe. ]]></description>
      <link>https://mikhalevi.ch/the-humans-by-matt-haig/</link>
      <guid>https://mikhalevi.ch/the-humans-by-matt-haig/</guid>

      
          <category><![CDATA[ Books ]]></category>
        
      <dc:creator><![CDATA[ Yurij Mikhalevich ]]></dc:creator>
      <pubDate>Sun, 13 Oct 2019 05:36:00 +0000</pubDate>

      <media:content url="https://mikhalevi.ch/the-humans-by-matt-haig/featured_hu6e9e8d4eff470cafa331733f0bf5909a_134400_c7c64a5a30a91ec4a79e8115128a9713.webp" medium="image"/>
        <content:encoded>
          <![CDATA[ <img src="https://mikhalevi.ch/the-humans-by-matt-haig/featured_hu6e9e8d4eff470cafa331733f0bf5909a_134400_c7c64a5a30a91ec4a79e8115128a9713.webp" alt="The Humans by Matt Haig"><p><strong>TL;DR:</strong> 6.5/10. Great start, excellent adventure, great humor (mostly concentrated in the first half of the book), very well written, but an unrealistic and much weaker ending.</p>
<blockquote>
<p>Human is a real bipedal life form of midrange intelligence, living a largely deluded existence on a small, waterlogged planet in a very lonely corner of the universe.</p>
</blockquote>
<blockquote>
<p>Don&rsquo;t ever be afraid of telling someone you love them. There are things wrong with your world, but an excess of love is not one.</p>
</blockquote>
<p>&ldquo;The Humans&rdquo; starts as a guide into the humankind written from the point of view of the super-intelligent alien. The alien is not familiar with Earth except knowing about its existence and sharing a limited set of prejudices about its inhabitants; this allows us to explore ourselves anew through its eyes. The author is succeeding a lot in depicting the alien&rsquo;s first experiences among us, filling them with a lot of cynical jokes and comments.</p>
<blockquote>
<p>I have come to a planet where the most intelligent life-form still has to drive its own cars&hellip;</p>
</blockquote>
<p>The alien arrives with a pretty explicit goal: to save the humankind and the universe (from the humanity) by slowing down its progress. The issue is that Andrew Martin, Mathematics Professor of Cambridge University, discovered a solution to the Riemann hypothesis. The discovery means an immerse scientific leap for humans: instant space travel, immortality, and anything else we can, and can not, imagine. And, according to the aliens who sent our hero to Earth, humans, destructive by nature, are not ready for this technological leap.</p>
<p><strong>What I like about this book:</strong> an original alien perspective on humanity, the quite well thought-out beginning of the book, jokes in the first 2/3 half of the book, a few nice thoughts, emphasis on the value of human life, human relationships, kindness, honesty, love, care.</p>
<p><strong>What I don&rsquo;t like about this book:</strong> that the author is bending established rules in the last third of the book, a blunt &ldquo;deus ex machina&rdquo; moment closer to the end of the book, and that author mentions a conflict between technological progress and humanity, intelligence and emotional ability, sensitivity.</p>
<p>Overall, the book is a good entertaining read, and I recommend it.</p>
 ]]>
        </content:encoded>

    </item>
    
    <item>
      <title><![CDATA[ The Sky Above the Woods Was the Color Purple ]]></title>
      <description><![CDATA[ Warming yourself up with the delicious hot tea under the Milky Way at the top of the crag, after a short hike up through the dark mountain forest, is a special treat. ]]></description>
      <link>https://mikhalevi.ch/the-sky-above-the-woods-was-the-color-purple/</link>
      <guid>https://mikhalevi.ch/the-sky-above-the-woods-was-the-color-purple/</guid>

      
          <category><![CDATA[ Photography ]]></category>
        
      <dc:creator><![CDATA[ Yurij Mikhalevich ]]></dc:creator>
      <pubDate>Sun, 06 Oct 2019 07:03:00 +0000</pubDate>

      <media:content url="https://mikhalevi.ch/the-sky-above-the-woods-was-the-color-purple/featured_hu9dfb0377d22e0cadee013cf0e047e90a_674302_455a80c3b6a26d4dbfd8cee4c3585f48.webp" medium="image"/>
        <content:encoded>
          <![CDATA[ <img src="https://mikhalevi.ch/the-sky-above-the-woods-was-the-color-purple/featured_hu9dfb0377d22e0cadee013cf0e047e90a_674302_455a80c3b6a26d4dbfd8cee4c3585f48.webp" alt="The Sky Above the Woods Was the Color Purple"><p>Warming yourself up with the delicious hot tea under the Milky Way at the top of the crag, after a short hike up through the dark mountain forest, is a special treat.</p>
 ]]>
        </content:encoded>

    </item>
    
  </channel>
</rss>
