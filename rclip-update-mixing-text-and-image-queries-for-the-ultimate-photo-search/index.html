<!doctype html><html lang=en-us dir=ltr data-wc-theme-default=system><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=generator content="Hugo Blox Builder 0.2.0"><meta name=author content="Yurij Mikhalevich"><meta name=description content="Hi! Today, I am introducing a fantastic new feature of rclip (an AI-powered command-line photo search tool I built): the ability to add and subtract different queries. It&rsquo;s fun to play around with different concepts in this way."><link rel=alternate hreflang=en-us href=https://mikhalevi.ch/rclip-update-mixing-text-and-image-queries-for-the-ultimate-photo-search/><link rel=stylesheet href=https://mikhalevi.ch/css/themes/purple.min.css><link href=https://mikhalevi.ch/dist/wc.min.css rel=stylesheet><link href=https://mikhalevi.ch/css/custom.min.4560bca2a18ef2ea0bf7132b836292a5e0039d842e8d20c692a37bc58e92ead5.css rel=stylesheet><script>window.hbb={defaultTheme:document.documentElement.dataset.wcThemeDefault,setDarkTheme:()=>{document.documentElement.classList.add("dark"),document.documentElement.style.colorScheme="dark"},setLightTheme:()=>{document.documentElement.classList.remove("dark"),document.documentElement.style.colorScheme="light"}},console.debug(`Default Hugo Blox Builder theme is ${window.hbb.defaultTheme}`),"wc-color-theme"in localStorage?localStorage.getItem("wc-color-theme")==="dark"?window.hbb.setDarkTheme():window.hbb.setLightTheme():(window.hbb.defaultTheme==="dark"?window.hbb.setDarkTheme():window.hbb.setLightTheme(),window.hbb.defaultTheme==="system"&&(window.matchMedia("(prefers-color-scheme: dark)").matches?window.hbb.setDarkTheme():window.hbb.setLightTheme()))</script><script>document.addEventListener("DOMContentLoaded",function(){let e=document.querySelectorAll("li input[type='checkbox'][disabled]");e.forEach(e=>{e.parentElement.parentElement.classList.add("task-list")});const t=document.querySelectorAll(".task-list li");t.forEach(e=>{let t=Array.from(e.childNodes).filter(e=>e.nodeType===3&&e.textContent.trim().length>1);if(t.length>0){const n=document.createElement("label");t[0].after(n),n.appendChild(e.querySelector("input[type='checkbox']")),n.appendChild(t[0])}})})</script><link rel=icon type=image/png sizes=32x32 href=https://mikhalevi.ch/media/icon_hu22f15536e9918e9e849189ceda99d382_340250_32x32_fill_lanczos_center_3.png><link rel=icon type=image/png sizes=16x16 href=https://mikhalevi.ch/media/icon_hu22f15536e9918e9e849189ceda99d382_340250_16x16_fill_lanczos_center_3.png><link rel=apple-touch-icon sizes=300x300 type=image/png href=https://mikhalevi.ch/media/icon_hu22f15536e9918e9e849189ceda99d382_340250_300x300_fill_lanczos_center_3.png><link rel=canonical href=https://mikhalevi.ch/rclip-update-mixing-text-and-image-queries-for-the-ultimate-photo-search/><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://mikhalevi.ch/rclip-update-mixing-text-and-image-queries-for-the-ultimate-photo-search/featured_hudf139667da090f78acf55b8d8b4b6f5b_238553_b9e35fc36345336e0951c04e39c568be.webp"><meta name=twitter:title content="rclip update: mixing text and image queries for the ultimate photo search | Yurij Mikhalevich"><meta name=twitter:description content="Hi! Today, I am introducing a fantastic new feature of rclip (an AI-powered command-line photo search tool I built): the ability to add and subtract different queries. It&rsquo;s fun to play around with different concepts in this way."><meta name=twitter:site content="@theyurij"><meta name=twitter:creator content="@theyurij"><meta property="og:site_name" content="Yurij Mikhalevich"><meta property="og:url" content="https://mikhalevi.ch/rclip-update-mixing-text-and-image-queries-for-the-ultimate-photo-search/"><meta property="og:title" content="rclip update: mixing text and image queries for the ultimate photo search | Yurij Mikhalevich"><meta property="og:description" content="Hi! Today, I am introducing a fantastic new feature of rclip (an AI-powered command-line photo search tool I built): the ability to add and subtract different queries. It&rsquo;s fun to play around with different concepts in this way."><meta property="og:image" content="https://mikhalevi.ch/rclip-update-mixing-text-and-image-queries-for-the-ultimate-photo-search/featured_hudf139667da090f78acf55b8d8b4b6f5b_238553_b9e35fc36345336e0951c04e39c568be.webp"><meta property="og:locale" content="en-us"><meta property="article:published_time" content="2023-07-31T12:05:26+00:00"><meta property="article:modified_time" content="2023-07-31T12:25:27+00:00"><title>rclip update: mixing text and image queries for the ultimate photo search | Yurij Mikhalevich</title><style>@font-face{font-family:inter var;font-style:normal;font-weight:100 900;font-display:swap;src:url(https://mikhalevi.ch/dist/font/Inter.var.woff2)format("woff2")}</style><link rel=alternate href=https://mikhalevi.ch/rss.xml title="Yurij Mikhalevich" type=application/rss+xml><link rel=alternate href=https://mikhalevi.ch/tag/software-engineering/rss.xml title="Software Engineering | Yurij Mikhalevich" type=application/rss+xml><link type=text/css rel=stylesheet href=/dist/lib/katex/katex.min.505d5f829022bb7b4f24dfee0aa1141cd7bba67afe411d1240335f820960b5c3.css integrity="sha256-UF1fgpAiu3tPJN/uCqEUHNe7pnr+QR0SQDNfgglgtcM="><script defer src=/dist/lib/katex/katex.min.dc84b296ec3e884de093158f760fd9d45b6c7abe58b5381557f4e138f46a58ae.js integrity="sha256-3ISyluw+iE3gkxWPdg/Z1Ftser5YtTgVV/ThOPRqWK4="></script>
<script defer src=/js/katex-renderer.0d99234398222967acfc659035cc2c269fbae1a3f942642d1da3d4e4a7463027.js integrity="sha256-DZkjQ5giKWes/GWQNcwsJp+64aP5QmQtHaPU5KdGMCc="></script>
<script defer src=https://mikhalevi.ch/js/hugo-blox-en.min.078b219c8a98772427f102269cf46781e83e9f861633c0aaed4bcc882179e8ed.js integrity="sha256-B4shnIqYdyQn8QImnPRngeg+n4YWM8Cq7UvMiCF56O0="></script>
<script defer src=https://cloud.umami.is/script.js data-website-id=6709bf0e-0994-42c8-bd78-70d54f45741d></script></head><body class="dark:bg-gray-800 dark:text-white-800 page-wrapper" id=top><div id=page-bg></div><div class=page-header><div class="absolute right-0 top-0 m-3 bg-primary-100 dark:bg-primary-700 rounded-full p-2 z-10"><div class="h-[24px] w-[24px]"><button class=theme-toggle accesskey=t title aria-label="Display preferences"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="dark:hidden"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#fff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="dark:block [&:not(dark)]:hidden"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div></div><div class="page-body my-10"><div class="flex flex-col items-center space-y-2"><a href=/><img alt="Yurij Mikhalevich" class="aspect-square rounded-full bg-zinc-100 object-cover dark:bg-zinc-800" data-nimg=1 decoding=async height=60 loading=lazy src=/author/yurij-mikhalevich/avatar_hu1e000e9c50a9eca951db9b54a3873359_284455_200x200_fill_q85_h2_lanczos_center.webp style="color:transparent;background:linear-gradient(37deg,#423a35b3,#423a3500 75%),linear-gradient(127deg,#b4a491b3,#b4a49100 75%),linear-gradient(217deg,#927062b3,#92706200 75%),linear-gradient(307deg,#a08e76b3,#a08e7600 75%);background-size:cover;background-repeat:no-repeat" width=60></a><div class="font-normal tracking-widest"><a href=/>YURIJ MIKHALEVICH</a></div></div><div class="mx-auto flex max-w-screen-lg"><article class="w-full break-words flex min-h-[calc(100vh-var(--navbar-height))] min-w-0 justify-center pb-6 pr-[calc(env(safe-area-inset-right)-1.5rem)]"><div class="w-full min-w-0 max-w-screen-lg px-6 pt-4 md:px-12"><div class="max-w-screen-md mx-auto"><div class="flex justify-between"><div class="mt-4 text-gray-500 dark:text-gray-300 text-sm flex items-center flex-wrap gap-y-2"><span class=mr-1>July 31, 2023</span></div><div class=mt-3><a class="no-underline inline-block text-xs font-medium tracking-wider mt-1 uppercase text-primary-600 dark:text-primary-300" href=https://mikhalevi.ch/tag/software-engineering/>Software Engineering</a></div></div><h1 class="mt-2 mb-10 text-4xl font-bold tracking-tight text-slate-900 dark:text-slate-100">rclip update: mixing text and image queries for the ultimate photo search</h1></div><div class="mx-auto article-header article-container featured-image-wrapper mb-10" style=max-width:840px;max-height:560px><div style=position:relative><img srcset="https://mikhalevi.ch/rclip-update-mixing-text-and-image-queries-for-the-ultimate-photo-search/featured_hudf139667da090f78acf55b8d8b4b6f5b_238553_360f37ffb98a4d70dfcae7d8b406abb8.webp 420w, https://mikhalevi.ch/rclip-update-mixing-text-and-image-queries-for-the-ultimate-photo-search/featured_hudf139667da090f78acf55b8d8b4b6f5b_238553_6110284384af5241f5f9d0981892e144.webp 840w, https://mikhalevi.ch/rclip-update-mixing-text-and-image-queries-for-the-ultimate-photo-search/featured_hudf139667da090f78acf55b8d8b4b6f5b_238553_1680x1680_fit_q85_h2_lanczos.webp 1680w" src=https://mikhalevi.ch/rclip-update-mixing-text-and-image-queries-for-the-ultimate-photo-search/featured_hudf139667da090f78acf55b8d8b4b6f5b_238553_360f37ffb98a4d70dfcae7d8b406abb8.webp width=840 height=560 alt class="featured-image rounded-md" style="background:linear-gradient(37deg,#494b32b3,#494b3200 75%),linear-gradient(127deg,#949256b3,#94925600 75%),linear-gradient(217deg,#887854b3,#88785400 75%),linear-gradient(307deg,#77873bb3,#77873b00 75%);background-size:cover;background-repeat:no-repeat"></div></div><div class="mx-auto prose prose-slate lg:prose-xl dark:prose-invert"><p>Hi! Today, I am introducing a fantastic new feature of rclip (an AI-powered command-line photo search tool I built): the ability to add and subtract different queries. It&rsquo;s fun to play around with different concepts in this way. This feature is also handy when you want to find similar images. If it&rsquo;s the first time you read about rclip, check out <a href=https://mikhalevi.ch/rclip-an-ai-powered-command-line-photo-search-tool/>this</a> and <a href=https://mikhalevi.ch/unveiling-rclips-new-power-image-to-image-search/>this</a> blog posts.</p><p>The feature works like this. If you want to add two queries together, add a &ldquo;plus&rdquo; sign between them like this:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl><span class=nb>cd</span> photos <span class=o>&amp;&amp;</span> rclip horse + stripes
</span></span></code></pre></div><p>If you want to subtract one query from the other, use the &ldquo;minus&rdquo; sign:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl><span class=nb>cd</span> photos <span class=o>&amp;&amp;</span> rclip apple - fruit
</span></span></code></pre></div><p>It works with image queries too:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl><span class=nb>cd</span> photos <span class=o>&amp;&amp;</span> rclip <span class=s2>&#34;./new york city.jpg&#34;</span> + night
</span></span></code></pre></div><p>When combining image and text queries, you may notice that sometimes your text queries are seemingly ignored by rclip. This can happen because CLIP (an AI model that rclip uses) weights features extracted from images more than features extracted from text. Luckily, rclip provides a way to fix this. You can control the influence the query has on the result by prefixing it with a multiplier. It can be any positive number, and you can multiply both image and text queries. Here is an example which doubles the influence of the &ldquo;golden retriever&rdquo; query:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl><span class=nb>cd</span> photos <span class=o>&amp;&amp;</span> rclip <span class=s2>&#34;2:golden retriever&#34;</span> + <span class=s2>&#34;./swimming pool.jpg&#34;</span>
</span></span></code></pre></div><p>And last but not least, when combining queries like this, you are not limited to two queries. Combine as many as you want. For example:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl><span class=nb>cd</span> photos <span class=o>&amp;&amp;</span> rclip <span class=s2>&#34;./racing car.jpg&#34;</span> - <span class=s2>&#34;2:sports car&#34;</span> + <span class=s2>&#34;2:snow&#34;</span>
</span></span></code></pre></div><p>If you are interested in seeing how all these queries perform when executed on the 1.28 million images ImageNet-1k dataset, check out the video demo on YouTube:</p><div style=position:relative;padding-bottom:56.25%;height:0;overflow:hidden><iframe src=https://www.youtube.com/embed/MsTgYdOpgcQ style=position:absolute;top:0;left:0;width:100%;height:100%;border:0 allowfullscreen title="YouTube Video"></iframe></div><p>This is another rclip feature initially introduced by a GitHub user <a href=https://github.com/ramayer target=_blank rel=noopener>ramayer</a>. Huge thanks to ramayer for this incredible contribution! Speaking of contributors, I always appreciate the enthusiasm and fresh perspectives that new contributors bring! If you&rsquo;re considering getting involved in open-source projects and making a positive impact, <a href=https://github.com/yurijmikhalevich/rclip/issues target=_blank rel=noopener>a number of issues on the rclip GitHub page</a> could benefit from your attention and expertise. Why not give them a look?</p><p>That&rsquo;s all you need to know about the new feature. You can download the latest version of rclip by following <a href=https://github.com/yurijmikhalevich/rclip#installation target=_blank rel=noopener>the instructions in the repository&rsquo;s README</a>. Try it out and share your thoughts. Stay curious, and enjoy your photo searches with rclip!</p></div><div class="mx-auto prose prose-slate lg:prose-xl dark:prose-invert mt-6 lg:mt-4 flex justify-center"><a class="no-underline bg-primary-100 hover:bg-primary-600 text-primary-800 hover:text-primary-100 font-medium mr-2 px-4 py-1 rounded hover:rounded dark:bg-primary-300 dark:hover:bg-primary-700 dark:text-primary-700" href="mailto:yurij@mikhalevi.ch?subject=Re%3a%20rclip%20update%3a%20mixing%20text%20and%20image%20queries%20for%20the%20ultimate%20photo%20search&body=In%20reply%20to%20https%3a%2f%2fmikhalevi.ch%2frclip-update-mixing-text-and-image-queries-for-the-ultimate-photo-search%2f">Reply</a></div><div class="container mx-auto prose prose-slate lg:prose-xl dark:prose-invert mt-5"><div class="max-w-prose print:hidden"></div><div class="flex flex-col items-center mt-8 max-w-prose"><div class="prose prose-slate dark:prose-invert font-normal tracking-widest">ABOUT YURIJ MIKHALEVICH</div><div class="flex flex-col items-center mt-4 mx-2"><div class="max-w-2xl mx-auto text-center prose prose-slate dark:prose-invert">Makes magic at <a href=https://www.qawolf.com/ target=_blank>QA Wolf</a>,
creator of the <a href=https://github.com/move-fast-and-break-things target=_blank>Move Fast and Break Things community of software engineers</a>,
<a href=https://community.deeplearning.ai/ target=_blank>DeepLearning.AI</a> mentor,
creator of <a href=https://github.com/yurijmikhalevich/rclip target=_blank>rclip</a>, writes about
<a href=https://mikhalevi.ch/tag/tech/>tech</a>,
<a href=https://mikhalevi.ch/tag/software-engineering/>software engineering</a>,
<a href=https://mikhalevi.ch/tag/books/>books</a>,
<a href=https://mikhalevi.ch/tag/what-to-watch/>what to watch</a>,
and <a href=https://mikhalevi.ch/tag/beyond/>beyond</a>,
practices <a href=https://mikhalevi.ch/tag/creative-writing/>creative writing</a>
and captures moments through <a href=https://mikhalevi.ch/tag/photography/>photography</a></div></div><div class="flex flex-col items-center mt-4"><div class="max-w-xxl mx-auto text-center prose prose-slate dark:prose-invert">This post is tagged with
<a href=https://mikhalevi.ch/tag/software-engineering/>software engineering</a>. Grab the
<a href=https://mikhalevi.ch/tag/software-engineering/rss.xml>software engineering RSS feed</a>
or the <a href=https://mikhalevi.ch/rss.xml>main RSS feed</a> to get future posts.</div></div></div></div></div></article></div></div><div class=page-footer></div></body></html>